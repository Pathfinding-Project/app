{"version":3,"sources":["components/script-editor/transpile.tsx","../node_modules/@babel/standalone sync","components/script-editor/call.tsx","client/theme.tsx","components/generic/Flex.tsx","components/generic/Space.tsx","components/generic/Snackbar.tsx","slices/createSlice.tsx","client/RPCClient.ts","client/getClient.ts","slices/info.tsx","slices/specimen.tsx","components/script-editor/makeTemplate.tsx","components/script-editor/templates.tsx","slices/UIState.tsx","hooks/usePlaybackState.tsx","components/specimen-renderer/default-renderer/DefaultRenderer.tsx","components/specimen-renderer/default-renderer/getDefaults.tsx","components/specimen-renderer/grid-renderer/parseMap.tsx","components/specimen-renderer/grid-renderer/getDefaults.tsx","components/specimen-renderer/grid-renderer/colors.tsx","components/specimen-renderer/grid-renderer/config.tsx","components/specimen-renderer/grid-renderer/makeGraphic.tsx","components/specimen-renderer/grid-renderer/Guides.tsx","components/specimen-renderer/grid-renderer/Node.tsx","components/specimen-renderer/grid-renderer/NodeList.tsx","components/specimen-renderer/grid-renderer/Overlay.tsx","components/specimen-renderer/grid-renderer/Path.tsx","components/specimen-renderer/grid-renderer/Selection.tsx","components/specimen-renderer/grid-renderer/selectionInfo.tsx","components/specimen-renderer/grid-renderer/PixiViewport.tsx","components/specimen-renderer/grid-renderer/Viewport.tsx","components/specimen-renderer/grid-renderer/GridRenderer.tsx","components/specimen-renderer/getRenderer.tsx","slices/loading.tsx","services/SpecimenService.tsx","slices/features.tsx","slices/SliceProvider.tsx","hooks/useSmallDisplay.tsx","components/generic/Select.tsx","components/control-bar/FeaturePicker.tsx","components/control-bar/InputControls.tsx","components/generic/IconButtonWithTooltip.tsx","components/control-bar/PlaybackControls.tsx","components/generic/Switch.tsx","components/generic/ListEditor.tsx","components/breakpoint-editor/comparators.tsx","components/breakpoint-editor/intrinsicProperties.tsx","components/breakpoint-editor/eventTypes.tsx","components/breakpoint-editor/BreakpointEditor.tsx","components/breakpoint-editor/propertyPaths.tsx","components/breakpoint-editor/BreakpointListEditor.tsx","components/script-editor/ScriptEditor.tsx","components/DebugOptionsEditor.tsx","components/generic/ScrollPanel.tsx","components/generic/Modal.tsx","hooks/useScrollState.tsx","components/control-bar/UtilityControls.tsx","components/control-bar/Controls.tsx","components/generic/LazyList.tsx","components/generic/Overline.tsx","components/generic/Property.tsx","components/specimen-inspector/EventInspector.tsx","components/specimen-inspector/EventListInspector.tsx","components/specimen-inspector/SelectionMenu.tsx","components/specimen-inspector/SpecimenInspector.tsx","components/Title.tsx","App.tsx","reportWebVitals.ts","index.tsx","services/ConnectionStateService.tsx","services/PlaybackService.tsx","hooks/useBreakpoints.tsx"],"names":["transpile","script","transform","code","webpackEmptyContext","req","e","Error","keys","resolve","module","exports","id","TIMEOUT","call","method","params","a","es6","UNSTABLE_evaluate","interpret","eval","makeCallExpression","interpreter","Interpreter","appendCode","Promise","res","start","Date","now","step","requestAnimationFrame","value","map","JSON","stringify","join","theme","createTheme","palette","primary","colors","shadows","times","Flex","vertical","props","Box","position","height","width","display","flexDirection","Space","px","SnackbarContext","createContext","noop","useSnackbar","useContext","SnackbarProvider","children","useState","snackPack","setSnackPack","open","setOpen","undefined","current","setCurrent","useEffect","length","prev","slice","handleMessage","useCallback","message","key","getTime","handleClose","_","reason","Provider","Snackbar","autoHideDuration","onClose","TransitionProps","onExited","action","IconButton","color","sx","p","onClick","SnackbarLabel","secondary","opacity","defaultReducer","next","createSlice","initialState","initializer","reducer","Store","useReducer","dispatch","useMemo","then","RPCClient","options","rpc","socket","this","io","url","JSONRPCClient","request","listener","response","off","receive","emit","on","connect","disconnect","name","window","location","hostname","protocol","isLocalHost","getClient","once","fetch","json","servers","client","useInfo","InfoProvider","useSpecimen","SpecimenProvider","makeTypeString","returnType","type","makeComment","chunks","chunk","split","description","c","makeBody","defaultReturnValue","methods","templates","shouldRender","shouldBreak","values","m","useUIState","UIStateProvider","TARGET_FRAME_TIME","usePlaybackState","specimen","playback","setUIState","ready","playing","end","eventList","lastFrame","setLastFrame","delta","setDelta","max","ceil","useFrameTime","tick","lag","state","canPlay","canPause","canStop","canStepForward","canStepBackward","stepBy","n","clamp","callbacks","play","pause","stop","stepForward","stepBackward","DefaultRenderer","justifyContent","alignItems","mb","fontSize","getDefaults","parseMap","wall","h","w","d","last","grid","x","y","filter","flat","row","tile","variables","valid","node","find","range","i","floor","convert","hex","parseInt","replace","mapValues","source","green","tint","destination","red","expanding","blue","generating","yellow","closing","blueGrey","getColor","orange","scale","devicePixelRatio","makeGraphic","draw","g","Grid","alpha","clear","lineStyle","forEach","moveTo","WEIGHT","lineTo","Guides","point","left","top","radius","resolution","r","beginFill","drawCircle","endFill","square","drawRect","box","Node","NodeList","nodes","variant","memo","keyBy","v","Overlay","size","Path","path","s","obj","out","push","pId","isUndefined","isNull","Selected","animateScale","animateAlpha","t","useTween","Selection","hover","highlight","between","min","events","prop","event","PixiViewport","handler","f","global","data","input","clickedAvailable","world","toWorld","PixiViewportBase","applyProps","equal","apply","register","resize","Component","PixiComponent","create","viewport","interaction","app","renderer","plugins","ticker","stopPropagation","passiveWheel","drag","pinch","wheel","decelerate","friction","clampZoom","maxScale","minScale","Viewport","useApp","getPoint","renderers","onSelect","selection","ref","setRef","active","setActive","setHover","take","merge","bgNodes","bgNodeColor","handleClick","info","findLastIndex","entry","findIndex","index","selectionInfo","getBoundingClientRect","handleMouseEvent","timeout","clearTimeout","delay","cursor","backgroundColor","onMouseDown","onMouseOver","getGridDefaults","getRenderer","get","useLoading","LoadingProvider","getMap","content","solve","hash","encodeURIComponent","mapURI","algorithms","maps","useFeatures","FeaturesProvider","SliceProvider","slices","services","reduce","createElement","cloneElement","useSmallDisplay","useTheme","useMediaQuery","breakpoints","down","itemHeight","sm","Select","trigger","items","onChange","placeholder","Tooltip","title","bindTrigger","Menu","bindMenu","anchorOrigin","horizontal","transformOrigin","label","MenuItem","selected","close","SelectField","TextField","minWidth","select","target","item","FeaturePicker","startCase","Button","disabled","mapDefaults","InputControls","algorithm","IconButtonWithTooltip","icon","rest","PlaybackControls","Switch","FormControlLabel","control","defaultChecked","DefaultListEditorInput","forwardRef","InputBase","fullWidth","inputRef","ListEditorField","useSwitch","useDelete","useEdit","useEditButton","onChangeItem","onDeleteItem","enabled","element","extrasPlacement","autoFocus","style","cardStyle","field","setField","marginRight","spacing","marginTop","marginBottom","flexGrow","marginLeft","onDelete","onValueChange","edge","checked","focus","Card","borderColor","paddingRight","transition","transitions","Editor","addItemLabel","text","onAddItem","placeholderText","getCategory","getOrder","isInitialRender","useRef","useInitialRender","intermediateItems","setIntermediateItems","newIndex","setNewIndex","setTimeout","duration","standard","uniqBy","c2","render","Collapse","in","unmountOnExit","appear","mountOnEnter","sorted","sortBy","List","subheader","ListSubheader","disableSticky","Typography","gutterBottom","mt","arr","isNewCategory","some","pl","pb","pt","ml","disableElevation","startIcon","Add","ListEditor","editor","setState","handleChange","k","b","comparators","intrinsicProperties","eventTypes","BreakpointEditor","properties","Divider","flexItem","orientation","mx","textOverflow","whiteSpace","component","property","condition","reference","inputProps","inputMode","pattern","propertyPaths","BreakpointListEditor","uniq","paths","nodeStructure","overflow","debounce","ScriptEditor","loading","CircularProgress","language","defaultValue","minimap","DebugOptionsEditor","monotonicF","monotonicG","tab","setTab","renderHeading","TabContext","TabList","Tab","TabPanel","ScrollPanel","onTarget","onScroll","setTarget","addEventListener","passive","removeEventListener","PanelContext","AppBarTitle","ModalAppBar","elevatedStyle","transitionProperties","elevatedChildren","simple","panel","threshold","showControls","setShowControls","isAbsoluteTop","setIsAbsoluteTop","isTop","setIsTop","lastTop","newIsTop","scrollTop","Math","abs","useScrollState","styles","background","paper","boxShadow","AppBar","elevation","Toolbar","ArrowBack","gridColumn","gridRow","flex","Fade","Modal","actions","scrollable","setContent","contentRef","setContentRef","hasOverflowingChildren","setHasOverflowingChildren","childHeight","setChildHeight","callback","doesOverflow","innerHeight","offsetHeight","ob","ResizeSensor","detach","useVariant","Dialog","fullScreen","paddingTop","PaperProps","borderRadius","shape","default","maxWidth","ManagedModal","ModalProps","ModalAppBarProps","appBar","isOpen","UtilityControls","divider","Controls","LazyList","renderItem","listOptions","totalCount","itemContent","Overline","my","Property","mr","EventInspector","cardStyles","bgcolor","CardActionArea","flexWrap","entries","EventListInspector","scrollToIndex","align","behavior","offset","SelectionMenu","notify","anchorReference","anchorPosition","ListItem","ListItemText","ListItemIcon","SpecimenInspector","mapType","setSelection","LinearProgress","zIndex","right","Title","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","version","es5","memoize","result","isType","match","lower","error","useBreakpoints","renderLabel","cancelled","cancellable","trimEnd","setLoading","setSpecimen","useAsync","signal","defaults","solution","aborted","CssBaseline","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.56407860.chunk.js","sourcesContent":["import { transform } from \"@babel/standalone\";\r\n\r\nexport function transpile(script: string = \"\") {\r\n  try {\r\n    return transform(script, {}).code;\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 295;","import { transpile } from \"./transpile\";\r\nimport Interpreter from \"js-interpreter\";\r\nimport { map } from \"lodash\";\r\nimport { templates } from \"./templates\";\r\nimport { FunctionTemplate } from \"./FunctionTemplate\";\r\n\r\nconst TIMEOUT = 1000;\r\n\r\ntype TemplateMap = typeof templates;\r\n\r\ntype Key = keyof TemplateMap;\r\n\r\ntype ReturnTypeOf<T extends Key> = TemplateMap[T] extends FunctionTemplate<\r\n  [...any],\r\n  infer R\r\n>\r\n  ? R\r\n  : never;\r\n\r\ntype ParamsOf<T extends Key> = TemplateMap[T] extends FunctionTemplate<\r\n  infer R,\r\n  any\r\n>\r\n  ? R\r\n  : [];\r\n\r\nexport async function call<T extends Key>(\r\n  script: string,\r\n  method: T,\r\n  params: ParamsOf<T>,\r\n  es6: boolean = true,\r\n  fast: boolean = false\r\n): Promise<ReturnTypeOf<T> | undefined> {\r\n  return fast\r\n    ? UNSTABLE_evaluate(script, method, params)\r\n    : await interpret(script, method, params, es6);\r\n}\r\n\r\nexport function UNSTABLE_evaluate<T extends Key>(\r\n  script: string,\r\n  method: T,\r\n  params: ParamsOf<T>\r\n) {\r\n  /* eslint-disable no-eval */\r\n  return eval(`${script}\\n${makeCallExpression(method, params)}`);\r\n}\r\n\r\nexport async function interpret<T extends Key>(\r\n  script: string,\r\n  method: T,\r\n  params: ParamsOf<T>,\r\n  es6: boolean = true\r\n): Promise<ReturnTypeOf<T> | undefined> {\r\n  const code = es6 ? transpile(script) : script;\r\n  if (code) {\r\n    const interpreter = new Interpreter(code);\r\n    interpreter.appendCode(makeCallExpression(method, params));\r\n    return new Promise((res) => {\r\n      const start = Date.now();\r\n      const step = () => {\r\n        const active = Date.now() - start <= TIMEOUT;\r\n        if (active && interpreter.step()) {\r\n          requestAnimationFrame(step);\r\n        } else {\r\n          res(interpreter.value);\r\n        }\r\n      };\r\n      step();\r\n    });\r\n  }\r\n}\r\n\r\nfunction makeCallExpression<T extends Key>(method: T, params: ParamsOf<T>) {\r\n  return `${method}(${map(params, JSON.stringify).join(\", \")});`;\r\n}\r\n","import { colors, createTheme } from \"@material-ui/core\";\r\nimport { times } from \"lodash\";\r\n\r\nconst shadow = `\r\n    0px 8px 18px -1px rgb(0 0 0 / 8%), \r\n    0px 10px 48px 0px rgb(0 0 0 / 1%), \r\n    0px 20px 96px 0px rgb(0 0 0 / 0.5%)\r\n`;\r\n\r\nexport const theme = createTheme({\r\n  palette: {\r\n    primary: colors[\"blueGrey\"],\r\n  },\r\n  shadows: [\"\", ...times(24, () => shadow)] as any,\r\n});\r\n","import { Box, BoxProps } from \"@material-ui/core\";\r\n\r\nexport type FlexProps = {\r\n  vertical?: boolean;\r\n} & BoxProps;\r\n\r\nexport function Flex({ vertical, ...props }: FlexProps) {\r\n  return (\r\n    <Box\r\n      position=\"relative\"\r\n      height=\"100%\"\r\n      width=\"100%\"\r\n      display=\"flex\"\r\n      flexDirection={vertical ? \"column\" : \"row\"}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n","import { Box } from \"@material-ui/core\";\r\nimport { BoxProps } from \"@material-ui/system\";\r\n\r\nexport function Space(props: BoxProps) {\r\n  return <Box px={0.5} display=\"inline-block\" {...props} />;\r\n}\r\n","import { Box, IconButton, Snackbar } from \"@material-ui/core\";\r\nimport { CloseOutlined as CloseIcon } from \"@material-ui/icons\";\r\nimport { noop } from \"lodash\";\r\nimport {\r\n  createContext,\r\n  ReactNode,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { Flex } from \"./Flex\";\r\nimport { Space } from \"./Space\";\r\n\r\nconst SnackbarContext = createContext<(message?: ReactNode) => void>(noop);\r\n\r\nexport interface SnackbarMessage {\r\n  message?: ReactNode;\r\n  key: number;\r\n}\r\n\r\nexport interface State {\r\n  open: boolean;\r\n  snackPack: readonly SnackbarMessage[];\r\n  messageInfo?: SnackbarMessage;\r\n}\r\n\r\nexport function useSnackbar() {\r\n  return useContext(SnackbarContext);\r\n}\r\n\r\nexport function SnackbarProvider({ children }: { children?: ReactNode }) {\r\n  const [snackPack, setSnackPack] = useState<readonly SnackbarMessage[]>([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [current, setCurrent] = useState<SnackbarMessage | undefined>(\r\n    undefined\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (snackPack.length && !current) {\r\n      setCurrent({ ...snackPack[0] });\r\n      setSnackPack((prev) => prev.slice(1));\r\n      setOpen(true);\r\n    } else if (snackPack.length && current && open) {\r\n      setOpen(false);\r\n    }\r\n  }, [snackPack, current, open]);\r\n\r\n  const handleMessage = useCallback(\r\n    (message: ReactNode) => {\r\n      setSnackPack((prev) => [...prev, { message, key: new Date().getTime() }]);\r\n    },\r\n    [setSnackPack]\r\n  );\r\n\r\n  const handleClose = (_: any, reason?: string) => {\r\n    reason !== \"clickaway\" && setOpen(false);\r\n  };\r\n\r\n  const handleExited = () => setCurrent(undefined);\r\n\r\n  return (\r\n    <>\r\n      <SnackbarContext.Provider value={handleMessage}>\r\n        {children}\r\n      </SnackbarContext.Provider>\r\n      <Snackbar\r\n        key={current?.key}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        TransitionProps={{ onExited: handleExited }}\r\n        message={current?.message}\r\n        action={\r\n          <>\r\n            <IconButton\r\n              aria-label=\"close\"\r\n              color=\"inherit\"\r\n              sx={{ p: 0.5 }}\r\n              onClick={handleClose}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </>\r\n        }\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\ntype SnackbarLabelProps = {\r\n  primary?: ReactNode;\r\n  secondary?: ReactNode;\r\n};\r\n\r\nexport function SnackbarLabel({ primary, secondary }: SnackbarLabelProps) {\r\n  return (\r\n    <Flex>\r\n      <Box>{primary}</Box>\r\n      <Space />\r\n      <Box sx={{ opacity: 0.56 }}>{secondary}</Box>\r\n    </Flex>\r\n  );\r\n}\r\n","import { noop } from \"lodash\";\r\nimport {\r\n  createContext,\r\n  ReactNode,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer,\r\n} from \"react\";\r\n\r\ntype Slice<T, U = T> = [T, (next: U) => void];\r\n\r\ntype Reducer<T, U> = (prev: T, next: U) => T;\r\n\r\nconst defaultReducer = (_: any, next: any) => next;\r\n\r\nexport function createSlice<T, U = T>(\r\n  initialState: T,\r\n  initializer?: () => Promise<U>,\r\n  reducer: Reducer<T, U> = defaultReducer\r\n) {\r\n  const Store = createContext<Slice<T, U>>([initialState, noop]);\r\n  return [\r\n    // Hook\r\n    () => useContext(Store),\r\n    // Context\r\n    ({ children }: { children?: ReactNode }) => {\r\n      const [value, dispatch] = useReducer(reducer, initialState);\r\n      const slice = useMemo<Slice<T, U>>(\r\n        () => [value, dispatch],\r\n        [value, dispatch]\r\n      );\r\n      useEffect(() => void initializer?.().then?.(dispatch), [dispatch]);\r\n      return <Store.Provider value={slice}>{children}</Store.Provider>;\r\n    },\r\n  ] as const;\r\n}\r\n","import { JSONRPCClient, JSONRPCResponse as Response } from \"json-rpc-2.0\";\r\nimport { NameMethodMap } from \"protocol\";\r\nimport { Request, RequestOf, ResponseOf } from \"protocol/Message\";\r\nimport { io, Socket } from \"socket.io-client\";\r\n\r\nexport interface RPCClientOptions {\r\n  url: string;\r\n}\r\n\r\nexport class RPCClient {\r\n  rpc: JSONRPCClient;\r\n  socket: Socket;\r\n\r\n  constructor(readonly options: RPCClientOptions) {\r\n    this.socket = io(options.url);\r\n    this.rpc = new JSONRPCClient(async (request: Request) => {\r\n      const listener = (response: Response) => {\r\n        if (response.id === request.id) {\r\n          this.socket.off(\"response\", listener);\r\n          this.rpc.receive(response);\r\n        }\r\n      };\r\n      this.socket.emit(\"request\", request);\r\n      this.socket.on(\"response\", listener);\r\n    });\r\n  }\r\n\r\n  async connect() {\r\n    this.socket.connect();\r\n  }\r\n\r\n  async disconnect() {\r\n    this.socket.disconnect();\r\n  }\r\n\r\n  async call<T extends keyof NameMethodMap>(\r\n    name: T,\r\n    params?: RequestOf<NameMethodMap[T]>[\"params\"]\r\n  ): Promise<ResponseOf<NameMethodMap[T]>[\"result\"]> {\r\n    return await this.rpc.request(name, params);\r\n  }\r\n}\r\n","import { once } from \"lodash\";\r\nimport { RPCClient } from \"./RPCClient\";\r\n\r\nconst DEV_PORT = 8001;\r\n\r\nconst { hostname, protocol } = window.location;\r\nconst isLocalHost = hostname === \"localhost\";\r\n\r\nconst registry =\r\n  \"https://raw.githubusercontent.com/Pathfinding-Project/registry/master/index.json\";\r\n\r\ntype Registry = string[];\r\n\r\nexport const getClient = once(async () => {\r\n  if (isLocalHost) {\r\n    return new RPCClient({\r\n      url: `${protocol}//${hostname}:${DEV_PORT}/`,\r\n    });\r\n  } else {\r\n    const response = await fetch(registry);\r\n    const servers = (await response.json()) as Registry;\r\n    return new RPCClient({\r\n      url: servers[0],\r\n    });\r\n  }\r\n});\r\n","import { createSlice } from \"./createSlice\";\r\nimport { CheckConnectionResponse } from \"protocol/CheckConnection\";\r\nimport { getClient } from \"client/getClient\";\r\n\r\ntype Info = CheckConnectionResponse[\"result\"];\r\n\r\nexport const [useInfo, InfoProvider] = createSlice<Info | undefined>(\r\n  undefined,\r\n  async () => {\r\n    const client = await getClient();\r\n    return await client.call(\"about\");\r\n  }\r\n);\r\n","import { createSlice } from \"./createSlice\";\r\nimport { Trace } from \"protocol/Trace\";\r\nimport { PathfindingTask } from \"protocol/SolveTask\";\r\nimport { ParamsOf } from \"protocol/Message\";\r\n\r\ntype Specimen = {\r\n  specimen?: Trace;\r\n  map?: string;\r\n} & Partial<ParamsOf<PathfindingTask>>;\r\n\r\nexport const [useSpecimen, SpecimenProvider] = createSlice<Specimen>({});\r\n","import { chunk, join, map, split } from \"lodash\";\r\nimport { FunctionTemplate } from \"./FunctionTemplate\";\r\n\r\ntype GenericFunctionTemplate = FunctionTemplate<[...any], any>;\r\n\r\nfunction makeTypeString({ returnType, params }: GenericFunctionTemplate) {\r\n  return `@type {(${join(\r\n    map(params, (p) => `${p.name}: ${p.type}`),\r\n    \", \"\r\n  )}) => ${returnType}}`;\r\n}\r\n\r\nfunction makeComment(method: GenericFunctionTemplate) {\r\n  const [open, prefix, close] = [\"/**\", \" * \", \" */\"];\r\n  const chunks = map(chunk(split(method.description, \" \"), 9), (c) =>\r\n    join(c, \" \")\r\n  );\r\n  return join(\r\n    [\r\n      open,\r\n      ...map(chunks, (c) => `${prefix}${c}`),\r\n      `${prefix}${makeTypeString(method)}`,\r\n      close,\r\n    ],\r\n    \"\\n\"\r\n  );\r\n}\r\n\r\nfunction makeBody({\r\n  name,\r\n  params,\r\n  defaultReturnValue,\r\n}: GenericFunctionTemplate) {\r\n  return join(\r\n    [\r\n      `function ${name}(${join(map(params, \"name\"), \", \")}) {`,\r\n      `    return ${JSON.stringify(defaultReturnValue)};`,\r\n      `}`,\r\n    ],\r\n    \"\\n\"\r\n  );\r\n}\r\n\r\nexport function makeTemplate(methods?: GenericFunctionTemplate[]) {\r\n  return join(\r\n    map(methods, (m) => join([makeComment(m), makeBody(m)], \"\\n\")),\r\n    \"\\n\\n\"\r\n  );\r\n}\r\n","import { TraceEvent } from \"protocol/Trace\";\r\nimport { FunctionTemplate } from \"./FunctionTemplate\";\r\n\r\nexport type ShouldBreak = FunctionTemplate<[number, TraceEvent], boolean>;\r\n\r\nexport const shouldBreak: ShouldBreak = {\r\n  name: \"shouldBreak\",\r\n  description:\r\n    \"Define in what situations the debugger should break, in addition to the conditions defined in the standard options.\",\r\n  params: [\r\n    { name: \"step\", type: \"number\" },\r\n    { name: \"event\", type: \"any\" },\r\n  ],\r\n  defaultReturnValue: false,\r\n  returnType: \"boolean\",\r\n};\r\n\r\nexport type ShouldRender = FunctionTemplate<[number], boolean>;\r\n\r\nexport const shouldRender: ShouldRender = {\r\n  name: \"shouldRender\",\r\n  description:\r\n    \"Define which objects the renderer should display, in addition to the conditions defined in the standard options.\",\r\n  params: [{ name: \"step\", type: \"number\" }],\r\n  defaultReturnValue: true,\r\n  returnType: \"boolean\",\r\n};\r\n\r\nexport const templates = {\r\n  shouldRender,\r\n  shouldBreak,\r\n};\r\n","import { makeTemplate } from \"components/script-editor/makeTemplate\";\r\nimport { templates } from \"components/script-editor/templates\";\r\nimport { values } from \"lodash\";\r\nimport { Feature } from \"protocol/FeatureQuery\";\r\nimport { TraceEventType } from \"protocol/Trace\";\r\nimport { createSlice } from \"./createSlice\";\r\n\r\nexport type PlaybackStateType = \"playing\" | \"paused\" | undefined;\r\n\r\ntype PlaybackState = { playback?: PlaybackStateType; step?: number };\r\n\r\ntype InputState = {\r\n  algorithm?: string;\r\n  map?: Partial<Feature & { type: string }>;\r\n};\r\n\r\nexport type Comparator = {\r\n  key: string;\r\n  apply: (value: number, reference: number) => boolean;\r\n};\r\n\r\nexport type Breakpoint = {\r\n  key: string;\r\n  property?: string;\r\n  reference?: number;\r\n  condition?: Comparator;\r\n  active?: boolean;\r\n  type?: TraceEventType;\r\n};\r\n\r\ntype DebugOptionsState = {\r\n  code?: string;\r\n  monotonicF?: boolean;\r\n  monotonicG?: boolean;\r\n  breakpoints?: Breakpoint[];\r\n};\r\n\r\ntype SpecimenState = {\r\n  start?: number;\r\n  end?: number;\r\n};\r\n\r\nexport type UIState = InputState &\r\n  PlaybackState &\r\n  DebugOptionsState &\r\n  SpecimenState;\r\n\r\nexport const [useUIState, UIStateProvider] = createSlice<\r\n  UIState,\r\n  Partial<UIState>\r\n>(\r\n  {\r\n    code: makeTemplate(values(templates)),\r\n  },\r\n  undefined,\r\n  (prev, next) => ({ ...prev, ...next })\r\n);\r\n","import { ceil, clamp, max } from \"lodash\";\r\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nconst TARGET_FRAME_TIME = 1000 / 60;\r\n\r\nfunction useFrameTime(playing: boolean) {\r\n  const [lastFrame, setLastFrame] = useState(0);\r\n  const [delta, setDelta] = useState(TARGET_FRAME_TIME);\r\n\r\n  useEffect(() => {\r\n    if (!playing) setLastFrame(0);\r\n  }, [playing, setLastFrame]);\r\n\r\n  const tick = useCallback(() => {\r\n    if (playing) {\r\n      const now = Date.now();\r\n      if (lastFrame) {\r\n        setDelta(now - lastFrame);\r\n        setLastFrame(now);\r\n      } else {\r\n        setDelta(TARGET_FRAME_TIME);\r\n        setLastFrame(now);\r\n      }\r\n    }\r\n  }, [setDelta, setLastFrame, lastFrame, playing]);\r\n\r\n  return [tick, delta, max([1, ceil(delta / TARGET_FRAME_TIME)]) ?? 1] as const;\r\n}\r\n\r\nexport function usePlaybackState() {\r\n  const [{ specimen }] = useSpecimen();\r\n  const [{ playback, step = 0 }, setUIState] = useUIState();\r\n\r\n  const ready = !!specimen;\r\n  const playing = playback === \"playing\";\r\n  const [start, end] = [0, (specimen?.eventList?.length ?? 1) - 1];\r\n\r\n  const [tick, , lag] = useFrameTime(playing);\r\n\r\n  return useMemo(() => {\r\n    const state = {\r\n      start,\r\n      end,\r\n      step,\r\n      canPlay: ready && !playing,\r\n      canPause: ready && playing,\r\n      canStop: ready,\r\n      canStepForward: ready && !playing && step < end,\r\n      canStepBackward: ready && !playing && step > 0,\r\n    };\r\n\r\n    const stepBy = (n: number) => clamp(step + n, start, end);\r\n\r\n    const callbacks = {\r\n      play: () => setUIState({ playback: \"playing\", step: stepBy(1) }),\r\n      pause: () => setUIState({ playback: \"paused\" }),\r\n      stop: () => setUIState({ step: start, playback: \"paused\" }),\r\n      stepForward: () => setUIState({ step: stepBy(1) }),\r\n      stepBackward: () => setUIState({ step: stepBy(-1) }),\r\n      tick: () => {\r\n        setUIState({ playback: \"playing\", step: stepBy(1 * lag) });\r\n        tick();\r\n      },\r\n    };\r\n\r\n    return {\r\n      playing: playback === \"playing\",\r\n      ...state,\r\n      ...callbacks,\r\n    };\r\n  }, [end, lag, playback, playing, ready, tick, setUIState, start, step]);\r\n}\r\n","import { BlurOffOutlined as DisabledIcon } from \"@material-ui/icons\";\nimport { Flex } from \"components/generic/Flex\";\nimport { RendererProps } from \"components/specimen-renderer/Renderer\";\n\nexport function DefaultRenderer({ width, height }: RendererProps) {\n  return (\n    <Flex\n      {...{ width, height }}\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      color=\"text.secondary\"\n      vertical\n    >\n      <DisabledIcon sx={{ mb: 2 }} fontSize=\"large\" />\n      No renderer is installed for the current map style.\n    </Flex>\n  );\n}\n","export const getDefaults = () => ({\n  start: 0,\n  end: 0,\n});\n","import { Point } from \"components/specimen-renderer/Renderer\";\nimport { filter, flatMap as flat, last, map, split } from \"lodash\";\nimport { TraceEvent } from \"protocol/Trace\";\n\nexport function parseMap(m: string = \"\", wall: string = \"@\") {\n  const [, h, w] = split(m, \"\\n\");\n  const [width, height] = map([w, h], (d) => +last(split(d, \" \"))!);\n  const grid = split(m, \"\\n\").slice(4);\n  return [\n    { x: width, y: height },\n    filter(\n      flat(grid, (row, y) =>\n        map(row, (tile, x) =>\n          tile === wall ? { variables: { x, y } } : undefined\n        )\n      )\n    ) as TraceEvent[],\n    ({ x, y }: Point) => grid[y]?.[x] !== wall,\n  ] as const;\n}\n","import { find, floor, range } from \"lodash\";\nimport { parseMap } from \"./parseMap\";\n\nexport function getDefaults(m: string = \"\", wall: string = \"@\") {\n  const [{ x: w, y: h }, , valid] = parseMap(m, wall);\n  const node =\n    find(range(w * h), (i) => valid({ x: i % w, y: floor(i / w) })) ?? 0;\n  return {\n    start: node,\n    end: node,\n  };\n}\n","import {\n  blue,\n  blueGrey,\n  green,\n  orange,\n  red,\n  yellow,\n} from \"@material-ui/core/colors\";\nimport { mapValues } from \"lodash\";\nimport { TraceEventType } from \"protocol/Trace\";\n\nconst tint = \"500\";\n\nexport function convert(hex: string) {\n  return parseInt(hex.replace(\"#\", \"0x\"));\n}\n\nexport const colors: { [K in TraceEventType]: number } = mapValues(\n  {\n    source: green[tint],\n    destination: red[tint],\n    expanding: blue[tint],\n    generating: yellow[tint],\n    closing: blueGrey[tint],\n  },\n  convert\n);\n\nexport function getColor(key?: TraceEventType) {\n  return (key && colors[key]) || convert(orange[tint]);\n}\n","export const scale = 10 * devicePixelRatio;\nexport const size = 1200;\n","import { Graphics } from \"@inlet/react-pixi\";\nimport { ComponentProps } from \"react\";\nimport { Graphics as PIXIGraphics } from \"@pixi/graphics\";\n\nexport function makeGraphic<T = any>(\n  draw: (g: PIXIGraphics, props: ComponentProps<typeof Graphics> & T) => void\n) {\n  return (props: ComponentProps<typeof Graphics> & T) => {\n    return <Graphics {...props} draw={(g) => draw(g, props)} />;\n  };\n}\n","import { ceil, forEach, range } from \"lodash\";\nimport { makeGraphic } from \"./makeGraphic\";\nimport { scale } from \"./config\";\nimport { ComponentProps } from \"react\";\n\nconst WEIGHT = 1;\n\nconst Grid = makeGraphic<{ alpha?: number; grid?: number }>(\n  (g, { width = 0, height = 0, alpha = 1, grid = 5 }) => {\n    g.clear();\n    g.lineStyle(WEIGHT, 0x000000, alpha);\n    forEach(range(scale * grid, height, scale * grid), (i) =>\n      g.moveTo(0, i + WEIGHT / 2).lineTo(width, i + WEIGHT / 2)\n    );\n    forEach(range(scale * grid, width, scale * grid), (i) =>\n      g.moveTo(i + WEIGHT / 2, 0).lineTo(i + WEIGHT / 2, height)\n    );\n  }\n);\n\ntype Props = ComponentProps<typeof Grid>;\n\nexport function Guides({\n  width = 0,\n  height = 0,\n  x = 0,\n  y = 0,\n  grid = 5,\n  ...params\n}: Props) {\n  return (\n    <Grid\n      width={ceil(width / grid) * grid * scale}\n      height={ceil(height / grid) * grid * scale}\n      grid={grid}\n      {...params}\n    />\n  );\n}\n","import { makeGraphic } from \"./makeGraphic\";\nimport { scale } from \"./config\";\nimport { Graphics } from \"@pixi/graphics\";\n\nexport type NodeProps = {\n  color?: number;\n  left?: number;\n  top?: number;\n  radius?: number;\n  resolution?: number;\n};\n\nexport const point = (\n  g: Graphics,\n  { color, left = 0, top = 0, radius = 0.25, resolution: r = 1 }: NodeProps\n) =>\n  g\n    .beginFill(color ?? 0x000000)\n    .drawCircle(\n      r * (1.5 * scale + left),\n      r * (1.5 * scale + top),\n      r * radius * scale\n    )\n    .endFill();\n\nexport const square = (\n  g: Graphics,\n  { color, left = 0, top = 0, radius = 0.25, resolution: r = 1 }: NodeProps\n) =>\n  g\n    .beginFill(color ?? 0x000000)\n    .drawRect(\n      r * (1.25 * scale + (radius * scale) / 2 + left),\n      r * (1.25 * scale + (radius * scale) / 2 + top),\n      r * (radius * scale),\n      r * (radius * scale)\n    )\n    .endFill();\n\nexport const box = (\n  g: Graphics,\n  { color, left = 0, top = 0, resolution: r = 1 }: NodeProps\n) =>\n  g\n    .beginFill(color ?? 0x000000)\n    .drawRect(\n      r * (scale + left),\n      r * (scale + top),\n      r * (1 * scale),\n      r * (1 * scale)\n    )\n    .endFill();\n\nexport const Node = makeGraphic<NodeProps>((g, p) => {\n  g.clear();\n  point(g, p);\n});\n","import { Graphics } from \"@inlet/react-pixi\";\nimport { keyBy, values } from \"lodash\";\nimport * as PIXI from \"pixi.js\";\nimport { Trace, TraceEventType } from \"protocol/Trace\";\nimport { useCallback, useMemo } from \"react\";\nimport { scale } from \"./config\";\nimport { point, NodeProps } from \"./Node\";\n\ntype Props = {\n  nodes: Trace[\"eventList\"];\n  color?: (type?: TraceEventType) => number;\n  variant?: (g: PIXI.Graphics, options: NodeProps) => PIXI.Graphics;\n  resolution?: number;\n};\n\nexport function NodeList({\n  nodes,\n  color,\n  variant = point,\n  resolution = 0.15,\n}: Props) {\n  const memo = useMemo(\n    () =>\n      values(keyBy(nodes, ({ variables: v }) => `${v?.x ?? 0}::${v?.y ?? 0}`)),\n    [nodes]\n  );\n  const draw = useCallback(\n    (g: PIXI.Graphics) => {\n      g.clear();\n      for (const { variables: v, type } of memo) {\n        variant(g, {\n          color: color?.(type) ?? 0xe0e0e0,\n          left: (v?.x ?? 0) * scale,\n          top: (v?.y ?? 0) * scale,\n          radius: 0.25,\n          resolution,\n        });\n      }\n      return g;\n    },\n    [memo, color, resolution, variant]\n  );\n  return <Graphics draw={draw} scale={1 / resolution} />;\n}\n","import { Point } from \"components/specimen-renderer/Renderer\";\nimport { floor, map } from \"lodash\";\nimport { getColor } from \"./colors\";\nimport { scale } from \"./config\";\nimport { Node } from \"./Node\";\n\ntype OverlayProps = {\n  start?: number;\n  end?: number;\n  size?: Point;\n};\nexport function Overlay({\n  start = 0,\n  end = 0,\n  size = { x: 0, y: 0 },\n}: OverlayProps) {\n  return (\n    <>\n      {map(\n        [\n          { color: getColor(\"source\"), node: start },\n          { color: getColor(\"destination\"), node: end },\n        ],\n        ({ color, node }, i) => (\n          <Node\n            key={i}\n            x={scale * (node % size.x)}\n            y={scale * floor(node / size.x)}\n            color={color}\n            alpha={0.25}\n          />\n        )\n      )}\n    </>\n  );\n}\n","import { Graphics } from \"@inlet/react-pixi\";\nimport { Graphics as PixiGraphics } from \"@pixi/graphics\";\nimport { isNull, isUndefined, keyBy } from \"lodash\";\nimport { TraceEvent } from \"protocol/Trace\";\nimport { useMemo } from \"react\";\nimport { getColor } from \"./colors\";\nimport { scale } from \"./config\";\n\nfunction defined<T>(obj: T): obj is Exclude<T, undefined | null> {\n  return !isUndefined(obj) && !isNull(obj);\n}\n\ntype PathProps = {\n  nodes?: TraceEvent[];\n  step?: number;\n};\n\nexport function Path({ nodes = [], step = 0 }: PathProps) {\n  const path = useMemo(() => {\n    const memo = keyBy(nodes, \"id\");\n    return (s: number) => {\n      const out = [];\n      let next: TraceEvent | undefined = nodes[s];\n      while (next) {\n        out.push(next);\n        next = defined(next.pId) ? memo[`${next.pId}`] : undefined;\n      }\n      return out;\n    };\n  }, [nodes]);\n\n  const draw = useMemo(() => {\n    const p = path(step);\n    return (g: PixiGraphics) => {\n      g.clear();\n      for (const node of p) {\n        const { x = 0, y = 0 } = node?.variables ?? {};\n        g.lineTo((x + 1.5) * scale, (y + 1.5) * scale);\n        g.lineStyle(3, getColor(nodes[step]?.type));\n      }\n    };\n  }, [path, step, nodes]);\n\n  return <Graphics draw={draw} />;\n}\n","import { map } from \"lodash\";\nimport { Point } from \"components/specimen-renderer/Renderer\";\nimport { scale } from \"./config\";\nimport { useTween } from \"react-use\";\nimport { ComponentProps as PropsOf } from \"react\";\nimport { Node } from \"./Node\";\n\ntype SelectedProps = {\n  animateScale?: boolean;\n  animateAlpha?: boolean;\n} & PropsOf<typeof Node>;\n\ntype Props = {\n  hover?: Point;\n  highlight?: Point;\n};\n\nexport function Selected({\n  x = 0,\n  y = 0,\n  animateScale,\n  animateAlpha,\n  ...props\n}: SelectedProps) {\n  const t = useTween(\"outCirc\", 300);\n  return (\n    <Node\n      {...props}\n      scale={animateScale ? t : 1}\n      x={x + (animateScale ? 1.5 * scale - 1.5 * scale * t : 0)}\n      y={y + (animateScale ? 1.5 * scale - 1.5 * scale * t : 0)}\n      radius={1}\n      alpha={animateAlpha ? t : 1}\n    />\n  );\n}\n\nexport function Selection({ hover, highlight }: Props) {\n  return (\n    <>\n      {map(\n        [\n          { point: hover, color: 0xf9f9f9, animateAlpha: true },\n          { point: highlight, color: 0xf1f1f1, animateScale: true },\n        ],\n        ({ point, ...props }, i) =>\n          point && (\n            <Selected\n              key={`${i}::${point.x}::${point.y}`}\n              x={point.x * scale}\n              y={point.y * scale}\n              {...props}\n            />\n          )\n      )}\n    </>\n  );\n}\n","import { Point, SelectionInfo } from \"components/specimen-renderer/Renderer\";\nimport { findIndex, findLastIndex, take } from \"lodash\";\nimport { Trace } from \"protocol/Trace\";\nimport { parseMap } from \"./parseMap\";\n\nfunction between(v: number, min: number, max: number) {\n  return v >= min && v < max;\n}\n\nexport function selectionInfo(\n  map: string = \"\",\n  specimen: Trace = {},\n  step: number = 0\n) {\n  const [{ x: w, y: h }, , valid] = parseMap(map);\n  return ({ x, y }: Point) => {\n    const nodes = take(specimen?.eventList, step);\n    const node = findLastIndex(\n      nodes,\n      ({ variables: v }) => (v?.x ?? 0) === x && (v?.y ?? 0) === y\n    );\n    const entry = findIndex(\n      specimen?.eventList,\n      ({ variables: v, type }) =>\n        type === \"expanding\" && (v?.x ?? 0) === x && (v?.y ?? 0) === y\n    );\n    return {\n      current: node !== -1 ? { index: node, event: nodes[node] } : undefined,\n      entry: entry !== -1 ? { index: entry, event: nodes[entry] } : undefined,\n      node:\n        between(x, 0, w) && between(y, 0, h) && valid({ x, y })\n          ? { key: y * w + x }\n          : undefined,\n    } as SelectionInfo;\n  };\n}\n","import { find } from \"lodash\";\nimport { Viewport as PixiViewportBase } from \"pixi-viewport\";\nimport * as PIXI from \"pixi.js\";\n\nexport type ViewportEvent = {\n  global: PIXI.Point;\n  world: PIXI.Point;\n  event: PointerEvent;\n};\n\nexport type ViewportEventHandler = (e: ViewportEvent) => void;\n\nexport type PointerEvent = \"onMouseOver\" | \"onClick\" | \"onMouseDown\";\n\nexport type PropEventPair = {\n  prop: PointerEvent;\n  event: string;\n  filter?: boolean;\n};\n\nexport const events = [\n  { prop: \"onMouseOver\", event: \"mousemove\" },\n  { prop: \"onClick\", event: \"click\", filter: true },\n  { prop: \"onClick\", event: \"tap\", filter: true },\n  { prop: \"onMouseDown\", event: \"pointerdown\", filter: true },\n] as PropEventPair[];\n\nexport class PixiViewport extends PixiViewportBase {\n  events: {\n    [K in string]?: () => void;\n  } = {};\n  register(prop: PointerEvent, handler?: ViewportEventHandler) {\n    const { event, filter } = find(events, (c) => c.prop === prop)!;\n    this.events?.[event]?.();\n    if (handler) {\n      const f = (e: PIXI.InteractionEvent) => {\n        const { global } = e.data;\n        if (!filter || this.input.clickedAvailable) {\n          handler?.({\n            global,\n            world: this.toWorld(global),\n            event: prop,\n          });\n        }\n      };\n      this.on(event, f);\n      this.events[event] = () => this.off(event, f);\n    }\n  }\n}\n","/**\n * Adapted from https://codesandbox.io/s/react-pixi-viewport-9ngfd\n * @author roxgarage\n */\n\nimport { PixiComponent, useApp } from \"@inlet/react-pixi\";\nimport { map } from \"lodash\";\nimport * as PIXI from \"pixi.js\";\nimport React from \"react\";\nimport {\n  PointerEvent,\n  PixiViewport,\n  events,\n  ViewportEventHandler,\n} from \"./PixiViewport\";\n\nexport type ViewportProps = {\n  width?: number;\n  height?: number;\n  children?: React.ReactNode;\n  event?: PIXI.InteractionEvent;\n} & { [K in PointerEvent]?: ViewportEventHandler };\n\nexport type Props = {\n  app: PIXI.Application;\n} & ViewportProps;\n\nfunction create(props: Props) {\n  const viewport = new PixiViewport({\n    interaction: props.app.renderer.plugins.interaction,\n    ticker: props.app.ticker,\n    stopPropagation: true,\n    passiveWheel: false,\n  })\n    .drag()\n    .pinch()\n    .wheel()\n    .decelerate({ friction: 0.98 })\n    .clampZoom({ maxScale: 10, minScale: 0.1 });\n  return viewport as PixiViewport;\n}\n\nfunction applyProps(\n  v: PixiViewport,\n  prev: Props,\n  { width, height, ...next }: Props\n) {\n  for (const { equal, apply } of [\n    ...map(events, ({ prop }) => ({\n      equal: prev[prop] === next[prop],\n      apply: () => v.register(prop, next[prop]),\n    })),\n    {\n      prop: prev.width === width && prev.height === height,\n      apply: () => v.resize(width, height, (width ?? 0) * 2, (height ?? 0) * 2),\n    },\n  ]) {\n    !equal && apply();\n  }\n}\n\nconst Component = PixiComponent<Props, PixiViewport>(\"Viewport\", {\n  create: (props) => {\n    const viewport = create(props);\n    applyProps(viewport, props, props);\n    return viewport;\n  },\n  applyProps,\n});\n\nexport const Viewport = (props: ViewportProps) => {\n  const app = useApp();\n  return <Component app={app} {...props} />;\n};\n","import { Stage } from \"@inlet/react-pixi\";\nimport { Box } from \"@material-ui/core\";\nimport { Point, RendererProps } from \"components/specimen-renderer/Renderer\";\nimport { delay, floor, merge, take } from \"lodash\";\nimport { ComponentProps, useMemo, useState } from \"react\";\nimport { useSpecimen } from \"slices/specimen\";\nimport { useUIState } from \"slices/UIState\";\nimport { getColor } from \"./colors\";\nimport { scale } from \"./config\";\nimport { getDefaults } from \"./getDefaults\";\nimport { Guides } from \"./Guides\";\nimport { square, box } from \"./Node\";\nimport { NodeList } from \"./NodeList\";\nimport { Overlay } from \"./Overlay\";\nimport { parseMap } from \"./parseMap\";\nimport { Path } from \"./Path\";\nimport { ViewportEvent } from \"./PixiViewport\";\nimport { Selection } from \"./Selection\";\nimport { selectionInfo } from \"./selectionInfo\";\nimport { Viewport } from \"./Viewport\";\n\ntype GridRendererProps = RendererProps &\n  Omit<ComponentProps<typeof Stage>, \"onSelect\">;\n\nfunction getPoint({ x, y }: Point) {\n  return { x: floor(x / scale) - 1, y: floor(y / scale) - 1 };\n}\n\nexport function GridRenderer({\n  onSelect,\n  selection,\n  ...props\n}: GridRendererProps) {\n  const [ref, setRef] = useState<HTMLDivElement | null>(null);\n  const { width = 0, height = 0 } = props;\n  const [{ specimen, map: m }] = useSpecimen();\n  const [{ step = 0, ...state }] = useUIState();\n\n  const [active, setActive] = useState<Point | undefined>(undefined);\n  const [hover, setHover] = useState<Point | undefined>(undefined);\n\n  const nodes = useMemo(\n    () => take(specimen?.eventList, step + 1),\n    [specimen, step]\n  );\n\n  const [size, bgNodes, , bgNodeColor, { start, end }] = useMemo(\n    () =>\n      [\n        ...parseMap(m),\n        () => 0xe1e1e1,\n        merge(getDefaults(m), { start: state.start, end: state.end }),\n      ] as const,\n    [m, state.start, state.end]\n  );\n\n  const handleClick = useMemo(() => {\n    const info = selectionInfo(m, specimen, step);\n    return ({ global, world }: ViewportEvent) => {\n      if (ref && specimen) {\n        const { top, left } = ref.getBoundingClientRect();\n        const point = getPoint(world);\n        onSelect?.({\n          global: { x: left + global.x, y: top + global.y },\n          world: point,\n          info: info(point),\n        });\n      }\n    };\n  }, [ref, onSelect, specimen, step, m]);\n\n  const handleMouseEvent = useMemo(() => {\n    let timeout = 0;\n    return ({ world, event }: ViewportEvent) => {\n      switch (event) {\n        case \"onMouseOver\":\n          setHover(getPoint(world));\n          setActive(undefined);\n          clearTimeout(timeout);\n          break;\n        case \"onMouseDown\":\n          timeout = delay(() => setActive(getPoint(world)), 100);\n          break;\n      }\n    };\n  }, [setHover]);\n\n  return (\n    <Box sx={{ cursor: \"pointer\" }} ref={setRef}>\n      <Stage options={{ backgroundColor: 0xffffff }} {...props}>\n        <Viewport\n          width={width}\n          height={height}\n          onClick={handleClick}\n          onMouseDown={handleMouseEvent}\n          onMouseOver={handleMouseEvent}\n        >\n          <Selection hover={hover} highlight={selection || active} />\n          <NodeList nodes={specimen?.eventList} variant={square} />\n          <NodeList nodes={bgNodes} color={bgNodeColor} variant={box} />\n          <Overlay start={start} end={end} size={size} />\n          <NodeList nodes={nodes} color={getColor} />\n          <Path nodes={specimen?.eventList} step={step} />\n          <Guides width={size.x} height={size.y} alpha={0.56} grid={10} />\n          <Guides width={size.x} height={size.y} alpha={0.24} grid={1} />\n        </Viewport>\n      </Stage>\n    </Box>\n  );\n}\n","import { get } from \"lodash\";\nimport { DefaultRenderer } from \"./default-renderer/DefaultRenderer\";\nimport { getDefaults } from \"./default-renderer/getDefaults\";\nimport { getDefaults as getGridDefaults } from \"./grid-renderer/getDefaults\";\nimport { GridRenderer } from \"./grid-renderer/GridRenderer\";\nimport { RendererEntry, RendererMap } from \"./Renderer\";\n\nconst renderers: RendererMap = {\n  grid: [GridRenderer, getGridDefaults],\n};\n\nexport function getRenderer(key = \"\") {\n  return get(renderers, key, [DefaultRenderer, getDefaults] as RendererEntry);\n}\n","import { createSlice } from \"./createSlice\";\r\n\r\ntype Loading = {\r\n  specimen?: boolean;\r\n  map?: boolean;\r\n};\r\n\r\nexport const [useLoading, LoadingProvider] = createSlice<Loading>(\r\n  {},\r\n  undefined,\r\n  (prev, next) => ({\r\n    ...prev,\r\n    ...next,\r\n  })\r\n);\r\n","import { getClient } from \"client/getClient\";\r\nimport {\r\n  SnackbarLabel as Label,\r\n  useSnackbar,\r\n} from \"components/generic/Snackbar\";\r\nimport { getRenderer } from \"components/specimen-renderer/getRenderer\";\r\nimport { memoize as memo } from \"lodash\";\r\nimport { ParamsOf } from \"protocol/Message\";\r\nimport { PathfindingTask } from \"protocol/SolveTask\";\r\nimport { useAsyncAbortable as useAsync } from \"react-async-hook\";\r\nimport { useLoading } from \"slices/loading\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport hash from \"md5\";\r\n\r\nconst getMap = memo(async (map: string) => {\r\n  const client = await getClient();\r\n  return (await client.call(\"features/map\", { id: map }))?.content;\r\n});\r\n\r\nasync function solve(\r\n  map: string,\r\n  params: Omit<ParamsOf<PathfindingTask>, \"mapURI\">\r\n) {\r\n  const client = await getClient();\r\n  if (map) {\r\n    for (const mapURI of [\r\n      `hash:${hash(map)}`,\r\n      `map:${encodeURIComponent(map)}`,\r\n    ] as const) {\r\n      const p = { ...params, mapURI };\r\n      const specimen = await client.call(\"solve/pathfinding\", p);\r\n      if (specimen) return { ...p, specimen, map };\r\n    }\r\n  }\r\n}\r\n\r\nexport function SpecimenService() {\r\n  const notify = useSnackbar();\r\n  const [, setLoading] = useLoading();\r\n  const [, setSpecimen] = useSpecimen();\r\n  const [{ algorithm, map, start, end }, setUIState] = useUIState();\r\n\r\n  useAsync(\r\n    async (signal) => {\r\n      setLoading({ specimen: true });\r\n      if (algorithm && map?.id && map?.type) {\r\n        const m = await getMap(map.id);\r\n        if (m) {\r\n          const [, defaults] = getRenderer(map.type);\r\n          try {\r\n            const solution = await solve(m, {\r\n              algorithm,\r\n              end: end ?? defaults(m)?.end,\r\n              start: start ?? defaults(m)?.start,\r\n              mapType: map?.type,\r\n            });\r\n            if (solution && !signal.aborted) {\r\n              setSpecimen(solution);\r\n              setUIState({ step: 0, playback: \"paused\", breakpoints: [] });\r\n              notify(\r\n                <Label\r\n                  primary=\"Solution generated.\"\r\n                  secondary={`${solution.specimen.eventList?.length} steps`}\r\n                />\r\n              );\r\n            }\r\n          } catch (e) {\r\n            notify(`${e}`);\r\n          }\r\n        }\r\n      }\r\n      setLoading({ specimen: false });\r\n    },\r\n    [algorithm, start, end, map?.id, map?.type, getClient, setLoading, notify]\r\n  );\r\n\r\n  return <></>;\r\n}\r\n","import { getClient } from \"client/getClient\";\r\nimport { FeatureDescriptor } from \"protocol/FeatureQuery\";\r\nimport { createSlice } from \"./createSlice\";\r\n\r\ntype Features = {\r\n  algorithms: FeatureDescriptor[];\r\n  maps: (FeatureDescriptor & { type: string })[];\r\n};\r\n\r\nexport const [useFeatures, FeaturesProvider] = createSlice<Features>(\r\n  { algorithms: [], maps: [] },\r\n  async () => {\r\n    const client = await getClient();\r\n    return {\r\n      algorithms: (await client.call(\"features/algorithm\")) ?? [],\r\n      maps: (await client.call(\"features/maps\")) ?? [],\r\n    };\r\n  }\r\n);\r\n","import { map, reduce } from \"lodash\";\r\nimport {\r\n  cloneElement,\r\n  createElement,\r\n  FunctionComponent,\r\n  ReactNode,\r\n} from \"react\";\r\n\r\ntype SliceProviderProps = {\r\n  slices?: FunctionComponent[];\r\n  services?: FunctionComponent[];\r\n  children?: ReactNode;\r\n};\r\n\r\nexport function SliceProvider({\r\n  slices,\r\n  children,\r\n  services,\r\n}: SliceProviderProps) {\r\n  return (\r\n    <>\r\n      {reduce(\r\n        map(slices, (s) => createElement(s)),\r\n        (prev, next) => cloneElement(next, {}, prev),\r\n        <>\r\n          {children}\r\n          {map(services, (s, i) => createElement(s, { key: i }))}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useMediaQuery, useTheme } from \"@material-ui/core\";\r\n\r\nexport function useSmallDisplay() {\r\n  const theme = useTheme();\r\n  return useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n}\r\n","import {\r\n  Menu,\r\n  MenuItem,\r\n  TextField,\r\n  TextFieldProps,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { useSmallDisplay } from \"hooks/useSmallDisplay\";\r\nimport { findIndex, map, max } from \"lodash\";\r\nimport State, { bindMenu, bindTrigger } from \"material-ui-popup-state\";\r\nimport { ReactElement, ReactNode } from \"react\";\r\n\r\ntype Key = string | number;\r\n\r\nexport type SelectProps<T extends Key> = {\r\n  trigger?: (props: ReturnType<typeof bindTrigger>) => ReactElement;\r\n  items?: { value: T; label?: ReactNode }[];\r\n  value?: T;\r\n  onChange?: (value: T) => void;\r\n  placeholder?: string;\r\n};\r\n\r\nconst itemHeight = (sm: boolean) => (sm ? 48 : 36);\r\nconst padding = 8;\r\n\r\nexport function Select<T extends string>({\r\n  trigger,\r\n  items,\r\n  value,\r\n  onChange,\r\n  placeholder = \"Select Option\",\r\n}: SelectProps<T>) {\r\n  const sm = useSmallDisplay();\r\n  const index = max([findIndex(items, { value: value as any }), 0]) ?? 0;\r\n  return (\r\n    <State variant=\"popover\">\r\n      {(state) => (\r\n        <>\r\n          <Tooltip title={placeholder}>\r\n            <span>{trigger?.(bindTrigger(state))}</span>\r\n          </Tooltip>\r\n          <Menu\r\n            {...bindMenu(state)}\r\n            anchorOrigin={{\r\n              horizontal: \"center\",\r\n              vertical: -itemHeight(sm) * index - padding,\r\n            }}\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"center\",\r\n            }}\r\n          >\r\n            {map(items, ({ value: v, label }) => (\r\n              <MenuItem\r\n                key={v}\r\n                value={v}\r\n                selected={v === value}\r\n                onClick={() => {\r\n                  state.close();\r\n                  onChange?.(v);\r\n                }}\r\n              >\r\n                {label}\r\n              </MenuItem>\r\n            ))}\r\n          </Menu>\r\n        </>\r\n      )}\r\n    </State>\r\n  );\r\n}\r\n\r\nexport type SelectFieldProps<T extends string> = Pick<\r\n  SelectProps<T>,\r\n  \"items\" | \"onChange\"\r\n> &\r\n  Omit<TextFieldProps, \"onChange\">;\r\n\r\nexport function SelectField<T extends string>(props: SelectFieldProps<T>) {\r\n  const { placeholder, value, items = [], onChange } = props;\r\n  return (\r\n    <TextField\r\n      sx={{ minWidth: 120 }}\r\n      select\r\n      label={placeholder}\r\n      value={value}\r\n      variant=\"filled\"\r\n      {...props}\r\n      onChange={(e) => onChange?.(e.target.value as T)}\r\n    >\r\n      {map(items, (item) => (\r\n        <MenuItem key={item.value} value={item.value}>\r\n          {item.label}\r\n        </MenuItem>\r\n      ))}\r\n    </TextField>\r\n  );\r\n}\r\n","import { Button, Typography as Type } from \"@material-ui/core\";\r\nimport { Select } from \"components/generic/Select\";\r\nimport { Space } from \"components/generic/Space\";\r\nimport { find, map, startCase } from \"lodash\";\r\nimport { FeatureDescriptor } from \"protocol/FeatureQuery\";\r\n\r\ntype Props = {\r\n  label?: string;\r\n  value?: string;\r\n  onChange?: (key: string) => void;\r\n  items?: FeatureDescriptor[];\r\n};\r\n\r\nexport function FeaturePicker({ label, value, onChange, items }: Props) {\r\n  const selected = find(items, { id: value });\r\n  return (\r\n    <Select\r\n      placeholder={startCase(label)}\r\n      trigger={(props) => (\r\n        <Button {...props} disabled={!items?.length}>\r\n          {selected?.name ?? label}\r\n        </Button>\r\n      )}\r\n      items={map(items, ({ id, name }) => ({\r\n        value: id,\r\n        label: (\r\n          <>\r\n            <Type>{name}</Type>\r\n            <Space />\r\n            <Type variant=\"body2\" color=\"textSecondary\">\r\n              {id}\r\n            </Type>\r\n          </>\r\n        ),\r\n      }))}\r\n      value={selected?.id}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n","import { find } from \"lodash\";\r\nimport { useFeatures } from \"slices/features\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { FeaturePicker } from \"./FeaturePicker\";\r\n\r\nconst mapDefaults = { start: undefined, end: undefined };\r\n\r\nexport function InputControls() {\r\n  const [{ algorithms, maps }] = useFeatures();\r\n  const [{ algorithm, map }, setUIState] = useUIState();\r\n  return (\r\n    <>\r\n      <FeaturePicker\r\n        label=\"map\"\r\n        value={map?.id}\r\n        items={maps}\r\n        onChange={(v) =>\r\n          setUIState({ ...mapDefaults, map: find(maps, { id: v }) })\r\n        }\r\n      />\r\n      <FeaturePicker\r\n        label=\"algorithm\"\r\n        value={algorithm}\r\n        items={algorithms}\r\n        onChange={(v) => setUIState({ algorithm: v })}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { IconButton, IconButtonProps, Tooltip } from \"@material-ui/core\";\r\nimport { startCase } from \"lodash\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype IconButtonWithTooltipProps = {\r\n  label: string;\r\n  icon: ReactNode;\r\n} & IconButtonProps;\r\n\r\nexport function IconButtonWithTooltip({\r\n  label,\r\n  icon,\r\n  ...rest\r\n}: IconButtonWithTooltipProps) {\r\n  return (\r\n    <Tooltip title={startCase(label)} key={label}>\r\n      <span>\r\n        <IconButton {...rest}>{icon}</IconButton>\r\n      </span>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import {\r\n  PauseOutlined as PauseIcon,\r\n  PlayArrowOutlined as PlayIcon,\r\n  SkipNextOutlined as ForwardIcon,\r\n  SkipPreviousOutlined as PreviousIcon,\r\n  StopOutlined as StopIcon,\r\n} from \"@material-ui/icons\";\r\nimport { IconButtonWithTooltip as Button } from \"components/generic/IconButtonWithTooltip\";\r\nimport { usePlaybackState } from \"hooks/usePlaybackState\";\r\n\r\nexport function PlaybackControls() {\r\n  const {\r\n    playing,\r\n    canPause,\r\n    canPlay,\r\n    canStepBackward,\r\n    canStepForward,\r\n    canStop,\r\n    pause,\r\n    play,\r\n    stepBackward,\r\n    stepForward,\r\n    stop,\r\n  } = usePlaybackState();\r\n  return (\r\n    <>\r\n      <Button\r\n        label=\"step-backward\"\r\n        icon={<PreviousIcon />}\r\n        onClick={stepBackward}\r\n        disabled={!canStepBackward}\r\n      />\r\n      <Button\r\n        {...(playing\r\n          ? {\r\n              label: \"pause\",\r\n              icon: <PauseIcon />,\r\n              onClick: pause,\r\n              disabled: !canPause,\r\n            }\r\n          : {\r\n              label: \"play\",\r\n              icon: <PlayIcon />,\r\n              onClick: play,\r\n              disabled: !canPlay,\r\n              color: \"primary\",\r\n            })}\r\n      />\r\n      <Button\r\n        label=\"step-forward\"\r\n        icon={<ForwardIcon />}\r\n        onClick={stepForward}\r\n        disabled={!canStepForward}\r\n      />\r\n      <Button\r\n        label=\"stop\"\r\n        icon={<StopIcon />}\r\n        onClick={stop}\r\n        disabled={!canStop}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  FormControlLabel,\r\n  Switch as MuiSwitch,\r\n  SwitchProps as MuiSwitchProps,\r\n} from \"@material-ui/core\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype SwitchProps = { label?: ReactNode } & MuiSwitchProps;\r\n\r\nexport function Switch({ label = <></>, ...props }: SwitchProps) {\r\n  return (\r\n    <FormControlLabel\r\n      control={<MuiSwitch defaultChecked {...props} />}\r\n      {...{ label }}\r\n    />\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  Collapse,\r\n  IconButton,\r\n  InputBase,\r\n  List,\r\n  ListSubheader,\r\n  Switch,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  DeleteOutlined as DeleteIcon,\r\n  EditOutlined as EditIcon,\r\n  LabelOutlined as LabelIcon,\r\n} from \"@material-ui/icons\";\r\nimport { filter, map, sortBy, uniqBy } from \"lodash\";\r\nimport { nanoid as id } from \"nanoid\";\r\nimport {\r\n  cloneElement,\r\n  ComponentProps,\r\n  CSSProperties,\r\n  forwardRef,\r\n  ReactElement,\r\n  ReactNode,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\n\r\nexport const DefaultListEditorInput = forwardRef(function StyledInputBase(\r\n  props: ComponentProps<typeof InputBase>,\r\n  ref\r\n) {\r\n  return (\r\n    <InputBase\r\n      fullWidth\r\n      {...props}\r\n      placeholder=\"Untitled item\"\r\n      inputRef={ref}\r\n    />\r\n  );\r\n});\r\n\r\ntype Key = string | number;\r\n\r\ntype Item<T = any> = {\r\n  element?: ReactElement;\r\n  enabled?: boolean;\r\n  value?: T;\r\n  id: Key;\r\n};\r\n\r\ntype Props<T = any> = {\r\n  addItemLabel?: ReactNode;\r\n  label?: ReactNode;\r\n  text?: ReactNode;\r\n  items?: Item<T>[];\r\n  useSwitch?: boolean;\r\n  useDelete?: boolean;\r\n  onChangeItem?: (key: Key, value: T, enabled: boolean) => void;\r\n  onAddItem?: () => void;\r\n  onDeleteItem?: (key: Key) => void;\r\n  icon?: ReactElement | null;\r\n  useEdit?: boolean;\r\n  variant?: \"outlined\" | \"default\";\r\n  extrasPlacement?: \"flex-start\" | \"center\" | \"flex-end\";\r\n  placeholderText?: ReactNode;\r\n  cardStyle?: CSSProperties;\r\n  autoFocus?: boolean;\r\n  getCategory?: (value?: T) => string;\r\n  getOrder?: (value?: T) => string | number;\r\n};\r\n\r\ntype ListEditorFieldProps = {\r\n  isPlaceholder?: boolean;\r\n  i?: number;\r\n};\r\n\r\nfunction useInitialRender() {\r\n  const ref = useRef(false);\r\n  const current = ref.current;\r\n  ref.current = true;\r\n  return !current;\r\n}\r\n\r\nexport function ListEditorField({\r\n  icon = <LabelIcon />,\r\n  useSwitch,\r\n  useDelete,\r\n  useEdit: useEditButton = true,\r\n  onChangeItem = () => {},\r\n  onDeleteItem = () => {},\r\n  enabled = false,\r\n  element = <DefaultListEditorInput />,\r\n  value,\r\n  id,\r\n  i = 0,\r\n  variant = \"default\",\r\n  extrasPlacement = \"center\",\r\n  autoFocus,\r\n  cardStyle: style,\r\n}: Props & ListEditorFieldProps & Item) {\r\n  const [field, setField] = useState<HTMLElement | null>(null);\r\n  const theme = useTheme();\r\n  const content = (\r\n    <Box display=\"flex\" alignItems={extrasPlacement}>\r\n      {icon !== null &&\r\n        cloneElement(icon, {\r\n          style: {\r\n            marginRight: theme.spacing(1),\r\n            marginTop: theme.spacing(0.5),\r\n            marginBottom: theme.spacing(0.5),\r\n          },\r\n          color: \"action\",\r\n        })}\r\n      <Box\r\n        flexGrow={1}\r\n        style={{\r\n          marginLeft: -theme.spacing(icon === null ? 2 : 0),\r\n        }}\r\n      >\r\n        {cloneElement(element, {\r\n          onDelete: () => onDeleteItem(id ?? i),\r\n          autoFocus,\r\n          value,\r\n          key: id ?? i,\r\n          onValueChange: (e: any) => onChangeItem(id ?? i, e, enabled),\r\n          onChange: (e: any) => onChangeItem(id ?? i, e.target.value, enabled),\r\n          ref: (e: HTMLElement | null) => setField(e),\r\n        })}\r\n      </Box>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        {useSwitch && (\r\n          <Switch\r\n            color=\"primary\"\r\n            edge=\"end\"\r\n            onChange={(_, v) => onChangeItem(id ?? i, value, v)}\r\n            checked={enabled}\r\n          />\r\n        )}\r\n        {useEditButton && (\r\n          <IconButton\r\n            edge=\"end\"\r\n            onClick={() => {\r\n              if (field?.focus) {\r\n                field.focus();\r\n              }\r\n            }}\r\n          >\r\n            <EditIcon />\r\n          </IconButton>\r\n        )}\r\n        {useDelete && (\r\n          <IconButton onClick={() => onDeleteItem(id ?? i)}>\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n  return (\r\n    <Box\r\n      style={{\r\n        marginBottom: theme.spacing(1),\r\n        marginLeft: theme.spacing(2),\r\n      }}\r\n    >\r\n      {variant === \"outlined\" ? (\r\n        <Card\r\n          variant=\"outlined\"\r\n          style={{\r\n            borderColor: \"transparent\",\r\n            paddingRight: theme.spacing(2),\r\n            transition: theme.transitions.create([\r\n              \"box-shadow\",\r\n              \"border-color\",\r\n            ]),\r\n            ...style,\r\n          }}\r\n        >\r\n          {content}\r\n        </Card>\r\n      ) : (\r\n        content\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default function Editor<T>(props: Props<T>) {\r\n  const {\r\n    addItemLabel = \"Add Item\",\r\n    label,\r\n    text,\r\n    onAddItem = () => {},\r\n    onDeleteItem = () => {},\r\n    items = [],\r\n    placeholderText,\r\n    autoFocus,\r\n    getCategory,\r\n    getOrder,\r\n  } = props;\r\n  const isInitialRender = useInitialRender();\r\n  const theme = useTheme();\r\n  const [intermediateItems, setIntermediateItems] = useState(items);\r\n  const [newIndex, setNewIndex] = useState(-1);\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setIntermediateItems(items);\r\n    }, theme.transitions.duration.standard);\r\n    return () => {\r\n      clearTimeout(timeout);\r\n    };\r\n  }, [items, setIntermediateItems, theme.transitions.duration.standard]);\r\n  const children = uniqBy([...intermediateItems, ...items], (c) => c.id)\r\n    .map((c) => items.find((c2) => c.id === c2.id) ?? c)\r\n    .map((x, i) => {\r\n      const { enabled, element, value, id } = x ?? {};\r\n      return {\r\n        value,\r\n        render: (p?: ComponentProps<typeof ListEditorField>) => (\r\n          <Collapse\r\n            in={!!items.find((p) => p.id === x.id)}\r\n            unmountOnExit\r\n            appear={!isInitialRender}\r\n            mountOnEnter\r\n          >\r\n            <ListEditorField\r\n              {...props}\r\n              onDeleteItem={(e) => {\r\n                onDeleteItem(e);\r\n                setNewIndex(-1);\r\n              }}\r\n              enabled={enabled}\r\n              element={element}\r\n              value={value}\r\n              id={id}\r\n              i={i}\r\n              autoFocus={autoFocus || i === newIndex}\r\n              {...p}\r\n            />\r\n          </Collapse>\r\n        ),\r\n        key: id,\r\n        in: !!items.find((p) => p.id === x.id),\r\n      };\r\n    });\r\n  const sorted = sortBy(\r\n    children,\r\n    (c) => getCategory?.(c.value),\r\n    (c) => getOrder?.(c.value)\r\n  ).map((c) => ({\r\n    ...c,\r\n    render: (p?: ComponentProps<typeof ListEditorField>) => (\r\n      <Box key={c.key}>{c.render(p)}</Box>\r\n    ),\r\n  }));\r\n  return (\r\n    <List\r\n      subheader={\r\n        label || text ? (\r\n          <>\r\n            <ListSubheader disableSticky>\r\n              {label && (\r\n                <Typography variant=\"body1\" gutterBottom color=\"textPrimary\">\r\n                  {label}\r\n                </Typography>\r\n              )}\r\n              {text && (\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  color=\"textSecondary\"\r\n                  gutterBottom\r\n                  style={{ marginBottom: theme.spacing(3) }}\r\n                >\r\n                  {text}\r\n                </Typography>\r\n              )}\r\n            </ListSubheader>\r\n          </>\r\n        ) : undefined\r\n      }\r\n    >\r\n      <Box mt={getCategory ? -1 : 0}>\r\n        {(() => {\r\n          const out: ReactNode[] = [];\r\n          sorted.forEach((c, i) => {\r\n            if (getCategory && isNewCategory(sorted, i, c)) {\r\n              out.push(\r\n                <Collapse\r\n                  in={items.some(\r\n                    (c2) => getCategory(c2.value) === getCategory(c.value)\r\n                  )}\r\n                  appear\r\n                  key={getCategory(c.value)}\r\n                >\r\n                  <Box pl={2} pb={2} pt={1}>\r\n                    <Typography variant=\"overline\" color=\"textSecondary\">\r\n                      {getCategory(c.value)}\r\n                    </Typography>\r\n                  </Box>\r\n                </Collapse>\r\n              );\r\n            }\r\n            out.push(c.render());\r\n          });\r\n          return out;\r\n        })()}\r\n      </Box>\r\n      <Collapse in={!items?.length}>\r\n        <Box ml={2} mb={1} pt={getCategory ? 1 : 0}>\r\n          <Typography color=\"textSecondary\">\r\n            {placeholderText ?? \"No items\"}\r\n          </Typography>\r\n        </Box>\r\n      </Collapse>\r\n      <Box p={2} mb={-3}>\r\n        <Button\r\n          disableElevation\r\n          variant=\"contained\"\r\n          startIcon={<Add />}\r\n          color=\"primary\"\r\n          onClick={() => {\r\n            onAddItem();\r\n            setNewIndex(items.length);\r\n          }}\r\n        >\r\n          {addItemLabel}\r\n        </Button>\r\n      </Box>\r\n    </List>\r\n  );\r\n\r\n  function isNewCategory(\r\n    arr: {\r\n      value: T | undefined;\r\n      render: (\r\n        p?: (Props<any> & ListEditorFieldProps & Item<any>) | undefined\r\n      ) => JSX.Element;\r\n      key: Key;\r\n    }[],\r\n    i: number,\r\n    c: {\r\n      value: T | undefined;\r\n      render: (\r\n        p?: (Props<any> & ListEditorFieldProps & Item<any>) | undefined\r\n      ) => JSX.Element;\r\n      key: Key;\r\n    }\r\n  ) {\r\n    return !!(\r\n      getCategory &&\r\n      (arr[i - 1] === undefined ||\r\n        getCategory(arr[i - 1].value) !== getCategory(c.value))\r\n    );\r\n  }\r\n}\r\n\r\nexport function ListEditor<T extends { key: string }>({\r\n  onChange,\r\n  value,\r\n  editor,\r\n  create,\r\n  ...props\r\n}: Omit<Props<T>, \"items\"> & {\r\n  items?: T[];\r\n  onChange?: (value: T[]) => void;\r\n  value?: T[];\r\n  editor?: (item: T) => ReactElement;\r\n  create?: () => Omit<T, \"key\">;\r\n}) {\r\n  const [state, setState] = useState(value ?? []);\r\n  function handleChange(next: T[]) {\r\n    setState(next);\r\n    onChange?.(next);\r\n  }\r\n  return (\r\n    <Box sx={{ ml: -2 }}>\r\n      <Editor\r\n        {...props}\r\n        items={state.map((c) => ({\r\n          id: c.key,\r\n          value: c,\r\n          element: editor?.(c),\r\n        }))}\r\n        useDelete\r\n        useEdit={false}\r\n        onAddItem={() =>\r\n          handleChange([...state, { key: id(), ...create?.() } as T])\r\n        }\r\n        onDeleteItem={(k) => {\r\n          return handleChange(filter(state, (b) => b.key !== k));\r\n        }}\r\n        onChangeItem={(k, v) =>\r\n          handleChange(map(state, (b) => (b.key === k ? v : b)))\r\n        }\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Comparator } from \"slices/UIState\";\r\n\r\nexport const comparators: Comparator[] = [\r\n  {\r\n    key: \"equal\",\r\n    apply: (a, b) => a === b,\r\n  },\r\n  {\r\n    key: \"less-than\",\r\n    apply: (a, b) => a < b,\r\n  },\r\n  {\r\n    key: \"greater-than\",\r\n    apply: (a, b) => a > b,\r\n  },\r\n];\r\n","export const intrinsicProperties = [\"f\", \"g\"];\r\n","import { TraceEventType } from \"protocol/Trace\";\r\n\r\nexport const eventTypes: (TraceEventType | \"any\")[] = [\r\n  \"any\",\r\n  \"source\",\r\n  \"destination\",\r\n  \"expanding\",\r\n  \"generating\",\r\n  \"closing\",\r\n];\r\n","import { Divider, TextField, Typography as Type } from \"@material-ui/core\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { SelectField as Select } from \"components/generic/Select\";\r\nimport { Space } from \"components/generic/Space\";\r\nimport { Switch } from \"components/generic/Switch\";\r\nimport { find, last, map, startCase } from \"lodash\";\r\nimport { Breakpoint } from \"slices/UIState\";\r\nimport { comparators } from \"./comparators\";\r\nimport { eventTypes } from \"./eventTypes\";\r\n\r\ntype BreakpointEditorProps = {\r\n  value: Breakpoint;\r\n  onValueChange?: (v: Breakpoint) => void;\r\n  properties?: string[];\r\n};\r\n\r\nexport function BreakpointEditor({\r\n  value,\r\n  onValueChange: onChange,\r\n  properties,\r\n}: BreakpointEditorProps) {\r\n  function handleChange(next: Partial<Breakpoint>) {\r\n    onChange?.({ ...value, ...next });\r\n  }\r\n  return (\r\n    <Flex>\r\n      <Select\r\n        placeholder=\"Event\"\r\n        sx={{ minWidth: 160 }}\r\n        items={map(eventTypes, (c) => ({ value: c, label: startCase(c) }))}\r\n        onChange={(v) => handleChange({ type: v === \"any\" ? undefined : v })}\r\n        value={value.type ?? \"any\"}\r\n      />\r\n      <Divider flexItem orientation=\"vertical\" sx={{ mx: 2 }} />\r\n      <Select\r\n        placeholder=\"Property\"\r\n        sx={{\r\n          minWidth: 140,\r\n          textOverflow: \"ellipsis\",\r\n          whiteSpace: \"nowrap\",\r\n        }}\r\n        items={map(properties, (c) => ({\r\n          value: c,\r\n          label: (\r\n            <>\r\n              {last(c.split(\".\"))}\r\n              <Space />\r\n              <Type\r\n                color=\"textSecondary\"\r\n                variant=\"body2\"\r\n                component=\"span\"\r\n              >{`event.${c}`}</Type>\r\n            </>\r\n          ),\r\n        }))}\r\n        onChange={(v) => handleChange({ property: v })}\r\n        value={value.property}\r\n      />\r\n      <Space />\r\n      <Select\r\n        placeholder=\"Condition\"\r\n        items={comparators.map((c) => ({\r\n          value: c.key,\r\n          label: startCase(c.key),\r\n        }))}\r\n        value={value?.condition?.key ?? comparators?.[0]?.key}\r\n        onChange={(v) =>\r\n          handleChange({ condition: find(comparators, { key: v }) })\r\n        }\r\n      />\r\n      <Space />\r\n      <TextField\r\n        label=\"Reference\"\r\n        fullWidth\r\n        value={`${value.reference ?? 0}`}\r\n        variant=\"filled\"\r\n        inputProps={{ inputMode: \"numeric\", pattern: \"[0-9]*\" }}\r\n        onChange={(v) => handleChange({ reference: +v.target.value })}\r\n        type=\"number\"\r\n      />\r\n      <Space sx={{ px: 2 }} />\r\n      <Switch\r\n        checked={!!value.active}\r\n        onChange={(_, v) => handleChange({ active: v })}\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n","export const propertyPaths = [\"variables\"];\r\n","import { ListEditor } from \"components/generic/ListEditor\";\r\nimport { debounce, flatMap as flat, get, keys, map, uniq } from \"lodash\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { Breakpoint, useUIState } from \"slices/UIState\";\r\nimport { comparators } from \"./comparators\";\r\nimport { intrinsicProperties } from \"./intrinsicProperties\";\r\nimport { BreakpointEditor } from \"./BreakpointEditor\";\r\nimport { Box } from \"@material-ui/system\";\r\nimport { propertyPaths as paths } from \"./propertyPaths\";\r\n\r\nexport function BreakpointListEditor() {\r\n  const [{ breakpoints = [] }, setUIState] = useUIState();\r\n  const [{ specimen }] = useSpecimen();\r\n\r\n  const properties = uniq([\r\n    ...intrinsicProperties,\r\n    ...flat(paths, (p) =>\r\n      flat(specimen?.nodeStructure, (v) =>\r\n        map(keys(get(v, p)), (k) => `${p}.${k}`)\r\n      )\r\n    ),\r\n  ]);\r\n\r\n  return (\r\n    <Box sx={{ overflow: \"auto hidden\", width: \"100%\" }}>\r\n      <Box sx={{ minWidth: 720, mb: 2 }}>\r\n        <ListEditor<Breakpoint>\r\n          icon={null}\r\n          value={breakpoints}\r\n          useDelete\r\n          useEdit={false}\r\n          editor={(v) => <BreakpointEditor value={v} properties={properties} />}\r\n          create={() => ({\r\n            active: true,\r\n            property: properties?.[0],\r\n            condition: comparators?.[0],\r\n            type: undefined,\r\n            reference: 0,\r\n          })}\r\n          onChange={debounce((v) => setUIState({ breakpoints: v }), 1000)}\r\n          addItemLabel=\"Breakpoint\"\r\n          placeholderText=\"Click the button below to add a breakpoint.\"\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { debounce } from \"lodash\";\r\nimport AutoSize from \"react-virtualized-auto-sizer\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nexport function ScriptEditor() {\r\n  const [{ code }, setUIState] = useUIState();\r\n  return (\r\n    <Flex height=\"70vh\" overflow=\"hidden\">\r\n      <AutoSize>\r\n        {({ width, height }) => (\r\n          <Editor\r\n            width={width}\r\n            loading={<CircularProgress variant=\"indeterminate\" />}\r\n            height={height}\r\n            language=\"javascript\"\r\n            defaultValue={code}\r\n            onChange={debounce((v) => setUIState({ code: v }), 1000)}\r\n            options={{\r\n              minimap: {\r\n                enabled: false,\r\n              },\r\n            }}\r\n          />\r\n        )}\r\n      </AutoSize>\r\n    </Flex>\r\n  );\r\n}\r\n","import { Box, Divider, Tab, Typography as Type } from \"@material-ui/core\";\r\nimport { TabContext, TabList, TabPanel } from \"@material-ui/lab\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { Space } from \"components/generic/Space\";\r\nimport { Switch } from \"components/generic/Switch\";\r\nimport { ReactNode, useState } from \"react\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { BreakpointListEditor } from \"./breakpoint-editor/BreakpointListEditor\";\r\nimport { ScriptEditor } from \"./script-editor/ScriptEditor\";\r\n\r\nexport function DebugOptionsEditor() {\r\n  const [{ monotonicF, monotonicG }, setUIState] = useUIState();\r\n  const [tab, setTab] = useState(\"standard\");\r\n  function renderHeading(label: ReactNode) {\r\n    return (\r\n      <Type variant=\"overline\" color=\"textSecondary\">\r\n        {label}\r\n      </Type>\r\n    );\r\n  }\r\n  return (\r\n    <TabContext value={tab}>\r\n      <TabList onChange={(_, v) => setTab(v)}>\r\n        <Tab label=\"Standard\" value=\"standard\" />\r\n        <Tab label=\"Advanced\" value=\"advanced\" />\r\n      </TabList>\r\n      <Divider />\r\n      <TabPanel value=\"standard\">\r\n        <Box>\r\n          {renderHeading(\"General\")}\r\n          <Flex>\r\n            <Switch\r\n              label=\"Monotonic f value\"\r\n              checked={!!monotonicF}\r\n              onChange={(_, v) => setUIState({ monotonicF: v })}\r\n            />\r\n            <Space />\r\n            <Switch\r\n              label=\"Monotonic g value\"\r\n              checked={!!monotonicG}\r\n              onChange={(_, v) => setUIState({ monotonicG: v })}\r\n            />\r\n          </Flex>\r\n        </Box>\r\n        <Space />\r\n        <Box>\r\n          {renderHeading(\"Breakpoints\")}\r\n          <BreakpointListEditor />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value=\"advanced\" sx={{ p: 0 }}>\r\n        <ScriptEditor />\r\n      </TabPanel>\r\n    </TabContext>\r\n  );\r\n}\r\n","import { noop } from \"lodash\";\r\nimport {\r\n  ComponentProps,\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\n\r\ntype ScrollPanelProps = {\r\n  onTarget?: (e: HTMLDivElement | null) => void;\r\n} & ComponentProps<\"div\">;\r\n\r\nexport function ScrollPanel({\r\n  onTarget = noop,\r\n  onScroll,\r\n  ...props\r\n}: ScrollPanelProps) {\r\n  const [target, setTarget] = useState<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (target && onScroll) {\r\n      target.addEventListener(\"scroll\", onScroll as any, { passive: true });\r\n      return () => target.removeEventListener(\"scroll\", onScroll as any);\r\n    }\r\n  }, [target, onScroll]);\r\n\r\n  return (\r\n    <div\r\n      {...props}\r\n      style={{\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        overflow: \"hidden scroll\",\r\n        ...props.style,\r\n      }}\r\n      ref={(e) => {\r\n        setTarget(e);\r\n        onTarget?.(e);\r\n      }}\r\n    >\r\n      <PanelContext.Provider value={target}>\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          {props.children}\r\n        </div>\r\n      </PanelContext.Provider>\r\n    </div>\r\n  );\r\n}\r\nconst PanelContext = createContext<HTMLDivElement | null>(null);\r\n\r\nexport function usePanel() {\r\n  return useContext(PanelContext);\r\n}\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Dialog,\r\n  Fade,\r\n  IconButton,\r\n  Toolbar,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { ArrowBack } from \"@material-ui/icons\";\r\nimport { ResizeSensor } from \"css-element-queries\";\r\nimport PopupState from \"material-ui-popup-state\";\r\nimport {\r\n  cloneElement,\r\n  ComponentProps,\r\n  CSSProperties,\r\n  ReactElement,\r\n  ReactNode,\r\n  SyntheticEvent,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { useScrollState } from \"hooks/useScrollState\";\r\nimport { useSmallDisplay } from \"hooks/useSmallDisplay\";\r\nimport { ScrollPanel, usePanel } from \"./ScrollPanel\";\r\n\r\nexport function AppBarTitle({ children }: { children?: ReactNode }) {\r\n  return <Typography variant=\"h6\">{children}</Typography>;\r\n}\r\n\r\nexport type Props = {\r\n  children?: ReactNode;\r\n  actions?: ReactNode;\r\n  width?: number;\r\n  height?: string | number;\r\n  onTarget?: (target: HTMLDivElement | null) => void;\r\n  variant?: \"default\" | \"submodal\";\r\n  scrollable?: boolean;\r\n};\r\n\r\ntype ModalAppBarProps = {\r\n  onClose?: () => void;\r\n  style?: CSSProperties;\r\n  elevatedStyle?: CSSProperties;\r\n  transitionProperties?: string[];\r\n  children?: ReactNode;\r\n  elevatedChildren?: ReactNode;\r\n  simple?: boolean;\r\n  position?: \"fixed\" | \"absolute\" | \"sticky\" | \"static\";\r\n};\r\n\r\nexport function ModalAppBar({\r\n  onClose = () => {},\r\n  style,\r\n  elevatedStyle,\r\n  children,\r\n  transitionProperties = [\"box-shadow\", \"background\", \"border-bottom\"],\r\n  elevatedChildren,\r\n  simple,\r\n  position = \"sticky\",\r\n}: ModalAppBarProps) {\r\n  const panel = usePanel();\r\n  const theme = useTheme();\r\n  const [, , isAbsoluteTop, , setTarget] = useScrollState();\r\n  useEffect(() => {\r\n    setTarget(panel);\r\n  }, [panel, setTarget]);\r\n\r\n  const styles = isAbsoluteTop\r\n    ? {\r\n        background: theme.palette.background.paper,\r\n        ...(!simple && {\r\n          boxShadow: theme.shadows[0],\r\n        }),\r\n        ...style,\r\n      }\r\n    : {\r\n        background: theme.palette.background.paper,\r\n        ...(!simple && {\r\n          boxShadow: theme.shadows[4],\r\n        }),\r\n        ...elevatedStyle,\r\n      };\r\n\r\n  return (\r\n    <AppBar\r\n      elevation={0}\r\n      position={position}\r\n      style={{\r\n        color: theme.palette.text.primary,\r\n        transition: theme.transitions.create(transitionProperties),\r\n        ...styles,\r\n      }}\r\n    >\r\n      <Toolbar>\r\n        <IconButton\r\n          style={{\r\n            marginRight: theme.spacing(1),\r\n          }}\r\n          aria-label=\"open drawer\"\r\n          edge=\"start\"\r\n          onClick={() => onClose()}\r\n        >\r\n          <ArrowBack />\r\n        </IconButton>\r\n\r\n        {children && (\r\n          <div\r\n            style={{\r\n              gridColumn: 1,\r\n              gridRow: 1,\r\n              flex: 1,\r\n              overflow: \"auto\",\r\n            }}\r\n          >\r\n            <Fade\r\n              in={!!(!elevatedChildren || isAbsoluteTop)}\r\n              mountOnEnter\r\n              unmountOnExit\r\n            >\r\n              <Box style={{ width: \"100%\" }}>{children}</Box>\r\n            </Fade>\r\n          </div>\r\n        )}\r\n        {elevatedChildren && (\r\n          <div\r\n            style={{\r\n              gridColumn: 1,\r\n              gridRow: 1,\r\n              flex: 1,\r\n              overflow: \"auto\",\r\n            }}\r\n          >\r\n            <Fade\r\n              in={!!(elevatedChildren && !isAbsoluteTop)}\r\n              mountOnEnter\r\n              unmountOnExit\r\n            >\r\n              <Box style={{ width: \"100%\" }}>{elevatedChildren}</Box>\r\n            </Fade>\r\n          </div>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default function Modal({\r\n  children,\r\n  actions,\r\n  width = 480,\r\n  height,\r\n  onTarget,\r\n  variant = \"default\",\r\n  scrollable = true,\r\n  ...props\r\n}: Props & ComponentProps<typeof Dialog>) {\r\n  const [content, setContent] = useState<ReactNode | undefined>(undefined);\r\n  useEffect(() => {\r\n    if (children) setContent(children);\r\n  }, [children]);\r\n  const theme = useTheme();\r\n  const sm = useSmallDisplay();\r\n\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  const [contentRef, setContentRef] = useState<HTMLElement | null>(null);\r\n  const [hasOverflowingChildren, setHasOverflowingChildren] = useState(false);\r\n  const [childHeight, setChildHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (target && contentRef && !sm && !height) {\r\n      const callback = () => {\r\n        const doesOverflow = window.innerHeight - 64 < contentRef.offsetHeight;\r\n        setHasOverflowingChildren(doesOverflow);\r\n        setChildHeight(\r\n          contentRef.offsetHeight <= 1 ? 0 : Math.ceil(contentRef.offsetHeight)\r\n        );\r\n      };\r\n      window.addEventListener(\"resize\", callback);\r\n      const ob = new ResizeSensor(contentRef, callback);\r\n      callback();\r\n      return () => {\r\n        window.removeEventListener(\"resize\", callback);\r\n        ob.detach();\r\n      };\r\n    }\r\n  }, [target, contentRef, sm, height]);\r\n\r\n  const useVariant = variant === \"submodal\" && sm;\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={sm}\r\n      {...props}\r\n      style={{\r\n        ...(useVariant && {\r\n          paddingTop: theme.spacing(8),\r\n        }),\r\n        ...props.style,\r\n      }}\r\n      PaperProps={{\r\n        ref: (e: HTMLElement | null) => setTarget(e),\r\n        style: {\r\n          ...(useVariant && {\r\n            borderRadius: `${theme.shape.borderRadius}px ${theme.shape.borderRadius}px 0 0`,\r\n          }),\r\n          background: theme.palette.background.default,\r\n          overflow: \"hidden\",\r\n          height:\r\n            height && !sm\r\n              ? height\r\n              : hasOverflowingChildren || sm\r\n              ? \"100%\"\r\n              : childHeight || \"fit-content\",\r\n          position: \"relative\",\r\n          maxWidth: \"none\",\r\n          ...props.PaperProps?.style,\r\n        },\r\n        ...props.PaperProps,\r\n      }}\r\n    >\r\n      <ScrollPanel\r\n        style={{\r\n          height: \"100%\",\r\n          width: sm ? undefined : width,\r\n          maxWidth: \"100%\",\r\n          overflow: scrollable ? undefined : \"hidden\",\r\n        }}\r\n        onTarget={onTarget}\r\n      >\r\n        <div\r\n          ref={(e) => setContentRef(e)}\r\n          style={{ width: \"100%\", height: \"100%\" }}\r\n        >\r\n          {content}\r\n        </div>\r\n      </ScrollPanel>\r\n      {actions}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport function ManagedModal({\r\n  options: ModalProps,\r\n  appBar: ModalAppBarProps,\r\n  trigger = () => <></>,\r\n  children,\r\n}: {\r\n  options?: Props;\r\n  trigger?: (onClick: (e: SyntheticEvent<any, Event>) => void) => ReactElement;\r\n  appBar?: ModalAppBarProps;\r\n  children?: ReactNode;\r\n}) {\r\n  return (\r\n    <PopupState variant=\"popover\">\r\n      {({ open, close, isOpen }) => {\r\n        return (\r\n          <>\r\n            {cloneElement(trigger(open))}\r\n            <Modal open={isOpen} onClose={close} {...ModalProps}>\r\n              <ModalAppBar onClose={close} {...ModalAppBarProps} />\r\n              {children ?? ModalProps?.children}\r\n            </Modal>\r\n          </>\r\n        );\r\n      }}\r\n    </PopupState>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport function useScrollState(threshold: number = 128) {\r\n  const [showControls, setShowControls] = useState(true);\r\n  const [isAbsoluteTop, setIsAbsoluteTop] = useState(true);\r\n  const [isTop, setIsTop] = useState(true);\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  const lastTop = useRef(0);\r\n  useEffect(() => {\r\n    if (target) {\r\n      const listener = () => {\r\n        {\r\n          const newIsTop = target.scrollTop <= threshold;\r\n          if (newIsTop !== isTop) {\r\n            setIsTop(newIsTop);\r\n          }\r\n        }\r\n        {\r\n          const newIsTop = target.scrollTop <= 1;\r\n          if (newIsTop !== isAbsoluteTop) {\r\n            setIsAbsoluteTop(newIsTop);\r\n          }\r\n        }\r\n        if (lastTop.current - target.scrollTop) {\r\n          if (\r\n            Math.abs(lastTop.current - target.scrollTop) > 2 &&\r\n            lastTop.current >= 0\r\n          ) {\r\n            setShowControls(lastTop.current > target.scrollTop);\r\n          }\r\n          lastTop.current = target.scrollTop;\r\n        }\r\n      };\r\n      target.addEventListener(\"scroll\", listener, { passive: true });\r\n      return () => {\r\n        target.removeEventListener(\"scroll\", listener);\r\n      };\r\n    }\r\n  }, [target, isTop, isAbsoluteTop, lastTop, threshold]);\r\n  return [\r\n    showControls || isTop,\r\n    isTop,\r\n    isAbsoluteTop,\r\n    target,\r\n    setTarget,\r\n  ] as const;\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { BugReport as BugIcon } from \"@material-ui/icons\";\r\nimport { DebugOptionsEditor } from \"components/DebugOptionsEditor\";\r\nimport {\r\n  AppBarTitle as Title,\r\n  ManagedModal as Dialog,\r\n} from \"components/generic/Modal\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\n\r\nexport function UtilityControls() {\r\n  const [{ specimen }] = useSpecimen();\r\n  // const INTEROP_compare = useCompatibilityLayer(\"#comparator button\");\r\n  // const INTEROP_timeTravel = useCompatibilityLayer(\"#time-travel button\");\r\n  return (\r\n    <>\r\n      <Dialog\r\n        trigger={(onClick) => (\r\n          <Button {...{ onClick }} disabled={!specimen} startIcon={<BugIcon />}>\r\n            Debug\r\n          </Button>\r\n        )}\r\n        options={{ width: 960, scrollable: false }}\r\n        appBar={{ children: <Title>Debug Options</Title> }}\r\n      >\r\n        <DebugOptionsEditor />\r\n      </Dialog>\r\n      {/* <Button disabled={!specimen} onClick={INTEROP_compare}>\r\n        Compare...\r\n      </Button> */}\r\n      {/* <Button disabled={!specimen} onClick={INTEROP_timeTravel}>\r\n        Jump...\r\n      </Button> */}\r\n    </>\r\n  );\r\n}\r\n","import { AppBar, Box, Divider, Toolbar } from \"@material-ui/core\";\r\nimport { InputControls } from \"./InputControls\";\r\nimport { PlaybackControls } from \"./PlaybackControls\";\r\nimport { UtilityControls } from \"./UtilityControls\";\r\n\r\nconst divider = <Divider orientation=\"vertical\" flexItem sx={{ m: 1 }} />;\r\n\r\nexport function Controls() {\r\n  return (\r\n    <AppBar position=\"static\" color=\"transparent\" elevation={0}>\r\n      <Toolbar>\r\n        <Box m={-1} display=\"flex\" alignItems=\"center\">\r\n          <InputControls />\r\n          {divider}\r\n          <PlaybackControls />\r\n          {divider}\r\n          <UtilityControls />\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Box, BoxProps } from \"@material-ui/core\";\r\nimport { ReactElement } from \"react\";\r\nimport {\r\n  Virtuoso as List,\r\n  VirtuosoHandle as Handle,\r\n  VirtuosoProps as ListProps,\r\n} from \"react-virtuoso\";\r\n\r\nexport type LazyListHandle = Handle;\r\n\r\nexport type LazyListProps<T> = {\r\n  items?: T[];\r\n  renderItem?: (item: T, index: number) => ReactElement;\r\n  listOptions?: Partial<ListProps<T>>;\r\n} & BoxProps;\r\n\r\nexport function LazyList<T>({\r\n  items = [],\r\n  renderItem,\r\n  listOptions: options,\r\n  ...props\r\n}: LazyListProps<T>) {\r\n  return (\r\n    <Box {...props}>\r\n      <List\r\n        totalCount={items.length}\r\n        itemContent={(i) => renderItem?.(items[i], i)}\r\n        {...options}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Typography as Type } from \"@material-ui/core\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype Props = {\r\n  children?: ReactNode;\r\n};\r\n\r\nexport function Overline({ children }: Props) {\r\n  return (\r\n    <Type variant=\"overline\" sx={{ my: -0.75, display: \"block\" }}>\r\n      {children}\r\n    </Type>\r\n  );\r\n}\r\n","import { Flex } from \"./Flex\";\r\nimport {\r\n  Typography as Type,\r\n  TypographyProps as TypeProps,\r\n} from \"@material-ui/core\";\r\nimport { Space } from \"./Space\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype Props = {\r\n  label?: ReactNode;\r\n  value?: ReactNode;\r\n  type?: TypeProps;\r\n};\r\n\r\nexport function Property({ label, value, type }: Props) {\r\n  return (\r\n    <Flex width=\"auto\" mr={3} mt={0.5} key={`${label}::${value}`}>\r\n      <Type sx={{ opacity: 0.54 }} {...type}>\r\n        {label}\r\n      </Type>\r\n      <Space />\r\n      <Type {...type}>{value}</Type>\r\n    </Flex>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Card,\r\n  CardActionArea,\r\n  CardProps,\r\n  Divider,\r\n  Typography as Type,\r\n} from \"@material-ui/core\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { Overline } from \"components/generic/Overline\";\r\nimport { Property } from \"components/generic/Property\";\r\nimport { entries, filter, map } from \"lodash\";\r\nimport { TraceEvent } from \"protocol/Trace\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nexport function getHeight(event: TraceEvent) {}\r\n\r\ntype EventInspectorProps = {\r\n  event?: TraceEvent;\r\n  index?: number;\r\n  selected?: boolean;\r\n} & CardProps;\r\n\r\nexport function EventInspector({\r\n  event,\r\n  index,\r\n  selected,\r\n  ...props\r\n}: EventInspectorProps) {\r\n  const [, setUIState] = useUIState();\r\n\r\n  const cardStyles = selected\r\n    ? {\r\n        color: \"primary.contrastText\",\r\n        bgcolor: \"primary.main\",\r\n      }\r\n    : {};\r\n\r\n  return (\r\n    <Card\r\n      {...props}\r\n      sx={{\r\n        ...cardStyles,\r\n        ...props.sx,\r\n      }}\r\n    >\r\n      <CardActionArea\r\n        sx={{ p: 2, height: \"100%\" }}\r\n        onClick={() => setUIState({ step: index })}\r\n      >\r\n        <Flex alignItems=\"center\">\r\n          <Type>{index}</Type>\r\n          <Divider sx={{ mx: 2 }} flexItem orientation=\"vertical\" />\r\n          <Box>\r\n            <Overline>{`${event?.type ?? \"unsupported\"} #${\r\n              event?.id ?? \"-\"\r\n            }`}</Overline>\r\n            <Flex flexWrap=\"wrap\">\r\n              {map(\r\n                filter(\r\n                  [\r\n                    [\"f\", event?.f],\r\n                    [\"g\", event?.g],\r\n                    ...entries(event?.variables),\r\n                  ],\r\n                  ([, v]) => v !== undefined\r\n                ),\r\n                ([k, v]) => (\r\n                  <Property label={k} value={v} type={{ variant: \"body2\" }} />\r\n                )\r\n              )}\r\n            </Flex>\r\n          </Box>\r\n        </Flex>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n}\r\n","import { Flex } from \"components/generic/Flex\";\r\nimport {\r\n  LazyList as List,\r\n  LazyListHandle as ListHandle,\r\n  LazyListProps as ListProps,\r\n} from \"components/generic/LazyList\";\r\nimport { TraceEvent } from \"protocol/Trace\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { EventInspector } from \"./EventInspector\";\r\n\r\nexport function EventListInspector(props: ListProps<TraceEvent>) {\r\n  const [{ step = 0, playback }] = useUIState();\r\n  const [{ specimen }] = useSpecimen();\r\n  const ref = useRef<ListHandle | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (playback !== \"playing\") {\r\n      ref?.current?.scrollToIndex?.({\r\n        index: step,\r\n        align: \"start\",\r\n        behavior: \"smooth\",\r\n        offset: -16,\r\n      });\r\n    }\r\n  }, [ref, step, playback]);\r\n\r\n  return (\r\n    <List\r\n      {...props}\r\n      items={specimen?.eventList}\r\n      listOptions={{ ref }}\r\n      renderItem={(item, i) => (\r\n        <Flex p={2} pt={i ? 0 : 2}>\r\n          <EventInspector\r\n            sx={{ flex: 1 }}\r\n            event={item}\r\n            index={i}\r\n            selected={i === step}\r\n          />\r\n        </Flex>\r\n      )}\r\n    />\r\n  );\r\n}\r\n","import {\r\n  Divider,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Menu,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  PlaceOutlined as DestinationIcon,\r\n  TripOriginOutlined as StartIcon,\r\n} from \"@material-ui/icons\";\r\nimport { Overline } from \"components/generic/Overline\";\r\nimport { Property } from \"components/generic/Property\";\r\nimport { map } from \"lodash\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { SelectEvent as RendererSelectEvent } from \"components/specimen-renderer/Renderer\";\r\nimport { useSnackbar } from \"components/generic/Snackbar\";\r\n\r\ntype Props = {\r\n  selection?: RendererSelectEvent;\r\n  onClose?: () => void;\r\n};\r\n\r\nexport function SelectionMenu({ selection, onClose }: Props) {\r\n  const notify = useSnackbar();\r\n  const [, setUIState] = useUIState();\r\n  const { global, world, info } = selection ?? {};\r\n  const { current, entry, node } = info ?? {};\r\n\r\n  return (\r\n    <Menu\r\n      open={!!selection}\r\n      anchorReference=\"anchorPosition\"\r\n      anchorPosition={{\r\n        top: global?.y ?? 0,\r\n        left: global?.x ?? 0,\r\n      }}\r\n      onClose={onClose}\r\n    >\r\n      <ListItem>\r\n        <ListItemText>\r\n          <Overline>Point</Overline>\r\n          <Property label=\"x\" value={world?.x ?? \"-\"} />\r\n          <Property label=\"y\" value={world?.y ?? \"-\"} />\r\n        </ListItemText>\r\n      </ListItem>\r\n      <Divider sx={{ my: 1 }} />\r\n      {map(\r\n        [\r\n          {\r\n            label: \"Set Origin\",\r\n            icon: <StartIcon sx={{ transform: \"scale(0.5)\" }} />,\r\n            action: () => {\r\n              notify(\"Origin set.\");\r\n              setUIState({ start: node?.key });\r\n            },\r\n            disabled: !node,\r\n          },\r\n          {\r\n            label: \"Set Destination\",\r\n            icon: <DestinationIcon />,\r\n            action: () => {\r\n              notify(\"Destination set.\");\r\n              setUIState({ end: node?.key });\r\n            },\r\n            disabled: !node,\r\n          },\r\n          {\r\n            label: \"Go to Expansion Step\",\r\n            action: () => setUIState({ step: entry?.index ?? 0 }),\r\n            disabled: !entry,\r\n          },\r\n          {\r\n            label: \"Rewind to This Step\",\r\n            action: () => setUIState({ step: current?.index ?? 0 }),\r\n            disabled: !current,\r\n          },\r\n        ],\r\n        ({ label, icon, action, disabled }) => (\r\n          <MenuItem\r\n            disabled={disabled}\r\n            onClick={() => {\r\n              action();\r\n              onClose?.();\r\n            }}\r\n          >\r\n            <ListItemIcon>{icon}</ListItemIcon>\r\n            <ListItemText>{label}</ListItemText>\r\n          </MenuItem>\r\n        )\r\n      )}\r\n    </Menu>\r\n  );\r\n}\r\n","import { Fade, LinearProgress } from \"@material-ui/core\";\r\nimport { Flex, FlexProps } from \"components/generic/Flex\";\r\nimport { getRenderer } from \"components/specimen-renderer/getRenderer\";\r\nimport { SelectEvent as RendererSelectEvent } from \"components/specimen-renderer/Renderer\";\r\nimport { some, values } from \"lodash\";\r\nimport { createElement, useState } from \"react\";\r\nimport AutoSize from \"react-virtualized-auto-sizer\";\r\nimport { useLoading } from \"slices/loading\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { EventListInspector } from \"./EventListInspector\";\r\nimport { SelectionMenu } from \"./SelectionMenu\";\r\n\r\ntype SpecimenInspectorProps = {} & FlexProps;\r\n\r\nexport function SpecimenInspector(props: SpecimenInspectorProps) {\r\n  const [loading] = useLoading();\r\n  const [{ specimen, mapType }] = useSpecimen();\r\n  const [renderer] = getRenderer(mapType);\r\n  const [selection, setSelection] = useState<RendererSelectEvent | undefined>(\r\n    undefined\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Fade in={some(values(loading))}>\r\n        <LinearProgress variant=\"indeterminate\" sx={{ mb: -0.5, zIndex: 1 }} />\r\n      </Fade>\r\n      <Flex {...props}>\r\n        {specimen ? (\r\n          <Flex>\r\n            <AutoSize>\r\n              {(size) =>\r\n                createElement(renderer, {\r\n                  ...size,\r\n                  onSelect: setSelection,\r\n                  selection: selection?.world,\r\n                })\r\n              }\r\n            </AutoSize>\r\n            <EventListInspector\r\n              position=\"absolute\"\r\n              right={0}\r\n              height=\"100%\"\r\n              maxWidth={480}\r\n              minWidth=\"30vw\"\r\n            />\r\n          </Flex>\r\n        ) : (\r\n          <Flex\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            color=\"text.secondary\"\r\n          >\r\n            Select a map and an algorithm to get started.\r\n          </Flex>\r\n        )}\r\n      </Flex>\r\n      <SelectionMenu\r\n        selection={selection}\r\n        onClose={() => setSelection(undefined)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { AppBar, Toolbar, Typography } from \"@material-ui/core\";\r\n\r\nexport function Title() {\r\n  return (\r\n    <AppBar position=\"static\" elevation={0}>\r\n      <Toolbar>\r\n        <Typography variant=\"h6\">Path Search Visualiser</Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Controls } from \"components/control-bar/Controls\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { SpecimenInspector } from \"components/specimen-inspector/SpecimenInspector\";\r\nimport { Title } from \"components/Title\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Flex vertical>\r\n      <Flex vertical boxShadow={4} height=\"auto\" zIndex={1}>\r\n        <Title />\r\n        <Controls />\r\n      </Flex>\r\n      <SpecimenInspector flex={1} />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\nimport { theme } from \"client/theme\";\r\nimport { SnackbarProvider } from \"components/generic/Snackbar\";\r\nimport { StrictMode } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { ConnectionStateService } from \"services/ConnectionStateService\";\r\nimport { PlaybackService } from \"services/PlaybackService\";\r\nimport { SpecimenService } from \"services/SpecimenService\";\r\nimport { FeaturesProvider } from \"slices/features\";\r\nimport { InfoProvider } from \"slices/info\";\r\nimport { LoadingProvider } from \"slices/loading\";\r\nimport { SliceProvider as AppStateProvider } from \"slices/SliceProvider\";\r\nimport { SpecimenProvider } from \"slices/specimen\";\r\nimport { UIStateProvider } from \"slices/UIState\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nconst slices = [\r\n  InfoProvider,\r\n  FeaturesProvider,\r\n  UIStateProvider,\r\n  SpecimenProvider,\r\n  LoadingProvider,\r\n];\r\n\r\nconst services = [ConnectionStateService, PlaybackService, SpecimenService];\r\n\r\nrender(\r\n  <StrictMode>\r\n    <CssBaseline>\r\n      <ThemeProvider theme={theme}>\r\n        <SnackbarProvider>\r\n          <AppStateProvider slices={slices} services={services}>\r\n            <App />\r\n          </AppStateProvider>\r\n        </SnackbarProvider>\r\n      </ThemeProvider>\r\n    </CssBaseline>\r\n  </StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { useSnackbar } from \"components/generic/Snackbar\";\r\nimport { useEffect } from \"react\";\r\nimport { useInfo } from \"slices/info\";\r\n\r\nexport function ConnectionStateService() {\r\n  const notify = useSnackbar();\r\n  const [info] = useInfo();\r\n\r\n  useEffect(\r\n    () =>\r\n      notify(\r\n        info\r\n          ? `Connected: ${info.name} ${info.version}`\r\n          : \"Connecting to the solver...\"\r\n      ),\r\n    [notify, info]\r\n  );\r\n\r\n  return <></>;\r\n}\r\n","import {\r\n  SnackbarLabel as Label,\r\n  useSnackbar,\r\n} from \"components/generic/Snackbar\";\r\nimport { usePlaybackState } from \"hooks/usePlaybackState\";\r\nimport { trimEnd } from \"lodash\";\r\nimport { ReactNode, useCallback, useEffect } from \"react\";\r\nimport { useBreakpoints } from \"../hooks/useBreakpoints\";\r\n\r\nfunction cancellable<T = void>(f: () => Promise<T>, g: (result: T) => void) {\r\n  let cancelled = false;\r\n  requestAnimationFrame(async () => {\r\n    const result = await f();\r\n    if (!cancelled) g(result);\r\n  });\r\n  return () => {\r\n    cancelled = true;\r\n  };\r\n}\r\n\r\nexport function PlaybackService() {\r\n  const notify = useSnackbar();\r\n  const { playing, end, step, pause, tick } = usePlaybackState();\r\n  const shouldBreak = useBreakpoints();\r\n\r\n  const renderLabel = useCallback(\r\n    (label: ReactNode) => <Label primary={label} secondary={`Step ${step}`} />,\r\n    [step]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (playing) {\r\n      return step < end\r\n        ? cancellable(\r\n            () => shouldBreak(step),\r\n            ({ result, error }) => {\r\n              if (!error) {\r\n                if (result) {\r\n                  notify(renderLabel(`Breakpoint hit: ${result}.`));\r\n                  pause();\r\n                } else tick();\r\n              } else {\r\n                notify(renderLabel(`${trimEnd(error, \".\")}.`));\r\n                pause();\r\n              }\r\n            }\r\n          )\r\n        : pause();\r\n    }\r\n  }, [renderLabel, playing, end, step, pause, tick, notify, shouldBreak]);\r\n\r\n  return <></>;\r\n}\r\n","import { call } from \"components/script-editor/call\";\r\nimport { transpile } from \"components/script-editor/transpile\";\r\nimport { get, lowerCase as lower, memoize, startCase } from \"lodash\";\r\nimport { useMemo } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nconst EVAL = true;\r\n\r\nexport function useBreakpoints() {\r\n  const [{ specimen }] = useSpecimen();\r\n  const [{ code, breakpoints = [], monotonicF, monotonicG }] = useUIState();\r\n  const es5 = useMemo(() => transpile(code), [code]) ?? \"\";\r\n\r\n  return useMemo(\r\n    () =>\r\n      memoize(async (step: number) => {\r\n        const event = specimen?.eventList?.[step];\r\n        if (event) {\r\n          try {\r\n            // Check monotonic f or g values\r\n            // TODO Fix definition of a monotonic f or g value\r\n            if (step) {\r\n              for (const p of [monotonicF && \"f\", monotonicG && \"g\"]) {\r\n                const prev = specimen?.eventList?.[step - 1];\r\n                if (p && get(prev, p) > get(event, p)) {\r\n                  return { result: `Monotonicity violation on ${p}` };\r\n                }\r\n              }\r\n            }\r\n            // Check breakpoints in the breakpoints section\r\n            for (const {\r\n              active,\r\n              condition,\r\n              type,\r\n              property = \"\",\r\n              reference = 0,\r\n            } of breakpoints) {\r\n              const isType = !type || type === event.type;\r\n              const match = condition?.apply?.(get(event, property), reference);\r\n              if (active && isType && match) {\r\n                return {\r\n                  result: `${property} ${lower(\r\n                    startCase(condition?.key)\r\n                  )} ${reference}`,\r\n                };\r\n              }\r\n            }\r\n            // Check breakpoints in the script editor section\r\n            if (await call(es5, \"shouldBreak\", [step, event], false, EVAL)) {\r\n              return { result: `Script editor` };\r\n            }\r\n          } catch (e) {\r\n            return { error: `${e}` };\r\n          }\r\n        }\r\n        return { result: \"\" };\r\n      }),\r\n    [es5, specimen, breakpoints, monotonicF, monotonicG]\r\n  );\r\n}\r\n"],"sourceRoot":""}
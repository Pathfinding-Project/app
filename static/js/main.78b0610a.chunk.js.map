{"version":3,"sources":["components/script-editor/transpile.tsx","../node_modules/@babel/standalone sync","components/script-editor/call.tsx","client/theme.tsx","components/generic/Flex.tsx","components/generic/Space.tsx","components/generic/Snackbar.tsx","slices/createSlice.tsx","client/RPCClient.ts","client/getClient.ts","slices/info.tsx","slices/specimen.tsx","components/script-editor/makeTemplate.tsx","components/script-editor/templates.tsx","slices/UIState.tsx","hooks/usePlaybackState.tsx","components/specimen-renderer/default-renderer/DefaultRenderer.tsx","components/specimen-renderer/default-renderer/getDefaults.tsx","components/specimen-renderer/grid-renderer/parseMap.tsx","components/specimen-renderer/grid-renderer/getDefaults.tsx","components/specimen-renderer/grid-renderer/colors.tsx","components/specimen-renderer/grid-renderer/config.tsx","components/specimen-renderer/grid-renderer/makeGraphic.tsx","components/specimen-renderer/grid-renderer/Guides.tsx","components/specimen-renderer/grid-renderer/Node.tsx","components/specimen-renderer/grid-renderer/NodeList.tsx","components/specimen-renderer/grid-renderer/Selection.tsx","components/specimen-renderer/grid-renderer/selectionInfo.tsx","components/specimen-renderer/grid-renderer/PixiViewport.tsx","components/specimen-renderer/grid-renderer/Viewport.tsx","components/specimen-renderer/grid-renderer/GridRenderer.tsx","components/specimen-renderer/getRenderer.tsx","slices/loading.tsx","services/SpecimenService.tsx","slices/features.tsx","slices/SliceProvider.tsx","hooks/useSmallDisplay.tsx","components/generic/Select.tsx","components/control-bar/FeaturePicker.tsx","components/control-bar/InputControls.tsx","components/generic/IconButtonWithTooltip.tsx","components/control-bar/PlaybackControls.tsx","components/generic/Switch.tsx","components/generic/ListEditor.tsx","components/breakpoint-editor/comparators.tsx","components/breakpoint-editor/intrinsicProperties.tsx","components/breakpoint-editor/eventTypes.tsx","components/breakpoint-editor/BreakpointEditor.tsx","components/breakpoint-editor/propertyPaths.tsx","components/breakpoint-editor/BreakpointListEditor.tsx","components/script-editor/ScriptEditor.tsx","components/DebugOptionsEditor.tsx","components/generic/ScrollPanel.tsx","components/generic/Modal.tsx","hooks/useScrollState.tsx","components/control-bar/UtilityControls.tsx","components/control-bar/Controls.tsx","components/generic/LazyList.tsx","components/generic/Overline.tsx","components/generic/Property.tsx","components/specimen-inspector/EventInspector.tsx","components/specimen-inspector/EventListInspector.tsx","components/specimen-inspector/SelectionMenu.tsx","components/specimen-inspector/SpecimenInspector.tsx","components/Title.tsx","App.tsx","reportWebVitals.ts","index.tsx","services/ConnectionStateService.tsx","services/PlaybackService.tsx","hooks/useBreakpoints.tsx"],"names":["transpile","script","transform","code","webpackEmptyContext","req","e","Error","keys","resolve","module","exports","id","TIMEOUT","call","method","params","a","es6","UNSTABLE_evaluate","interpret","eval","makeCallExpression","interpreter","Interpreter","appendCode","Promise","res","start","Date","now","step","requestAnimationFrame","value","map","JSON","stringify","join","theme","createTheme","palette","primary","colors","shadows","times","Flex","vertical","props","Box","position","height","width","display","flexDirection","Space","px","SnackbarContext","createContext","noop","useSnackbar","useContext","SnackbarProvider","children","useState","snackPack","setSnackPack","open","setOpen","undefined","current","setCurrent","useEffect","length","prev","slice","handleMessage","useCallback","message","key","getTime","handleClose","_","reason","Provider","Snackbar","autoHideDuration","onClose","TransitionProps","onExited","action","IconButton","color","sx","p","onClick","SnackbarLabel","secondary","opacity","defaultReducer","next","createSlice","initialState","initializer","reducer","Store","useReducer","dispatch","useMemo","then","RPCClient","options","rpc","socket","this","io","url","JSONRPCClient","request","listener","response","off","receive","emit","on","connect","disconnect","name","window","location","hostname","protocol","isLocalHost","getClient","once","fetch","json","servers","client","useInfo","InfoProvider","useSpecimen","SpecimenProvider","makeTypeString","returnType","type","makeComment","chunks","chunk","split","description","c","makeBody","defaultReturnValue","methods","templates","shouldRender","shouldBreak","values","m","useUIState","UIStateProvider","TARGET_FRAME_TIME","usePlaybackState","specimen","playback","setUIState","ready","playing","end","eventList","lastFrame","setLastFrame","delta","setDelta","max","ceil","useFrameTime","tick","lag","state","canPlay","canPause","canStop","canStepForward","canStepBackward","stepBy","n","clamp","callbacks","play","pause","stop","stepForward","stepBackward","DefaultRenderer","justifyContent","alignItems","mb","fontSize","getDefaults","parseMap","wall","h","w","d","last","grid","x","y","filter","flat","row","tile","variables","valid","node","find","range","i","floor","convert","hex","parseInt","replace","mapValues","source","green","tint","destination","red","expanding","blue","generating","yellow","closing","blueGrey","getColor","orange","scale","devicePixelRatio","makeGraphic","draw","g","Grid","alpha","clear","lineStyle","forEach","moveTo","WEIGHT","lineTo","Guides","point","left","top","radius","resolution","r","beginFill","drawCircle","endFill","square","drawRect","Node","NodeList","nodes","variant","memo","keyBy","v","Selected","animateScale","animateAlpha","t","useTween","Selection","hover","highlight","between","min","events","prop","event","PixiViewport","handler","f","global","data","input","clickedAvailable","world","toWorld","PixiViewportBase","applyProps","equal","apply","register","resize","Component","PixiComponent","create","viewport","interaction","app","renderer","plugins","ticker","stopPropagation","passiveWheel","drag","pinch","wheel","decelerate","friction","clampZoom","maxScale","minScale","Viewport","useApp","getPoint","Overlay","size","renderers","onSelect","selection","ref","setRef","mapURI","active","setActive","setHover","take","merge","bgNodes","bgNodeColor","handleClick","info","findLastIndex","entry","findIndex","index","selectionInfo","getBoundingClientRect","handleMouseEvent","timeout","clearTimeout","delay","cursor","backgroundColor","onMouseDown","onMouseOver","getGridDefaults","getRenderer","get","useLoading","LoadingProvider","getMap","content","algorithms","maps","useFeatures","FeaturesProvider","SliceProvider","slices","services","reduce","s","createElement","cloneElement","useSmallDisplay","useTheme","useMediaQuery","breakpoints","down","itemHeight","sm","Select","trigger","items","onChange","placeholder","Tooltip","title","bindTrigger","Menu","bindMenu","anchorOrigin","horizontal","transformOrigin","label","MenuItem","selected","close","SelectField","TextField","minWidth","select","target","item","FeaturePicker","startCase","Button","disabled","mapDefaults","InputControls","algorithm","IconButtonWithTooltip","icon","rest","PlaybackControls","Switch","FormControlLabel","control","defaultChecked","DefaultListEditorInput","forwardRef","InputBase","fullWidth","inputRef","ListEditorField","useSwitch","useDelete","useEdit","useEditButton","onChangeItem","onDeleteItem","enabled","element","extrasPlacement","autoFocus","style","cardStyle","field","setField","marginRight","spacing","marginTop","marginBottom","flexGrow","marginLeft","onDelete","onValueChange","edge","checked","focus","Card","borderColor","paddingRight","transition","transitions","Editor","addItemLabel","text","onAddItem","placeholderText","getCategory","getOrder","isInitialRender","useRef","useInitialRender","intermediateItems","setIntermediateItems","newIndex","setNewIndex","setTimeout","duration","standard","uniqBy","c2","render","Collapse","in","unmountOnExit","appear","mountOnEnter","sorted","sortBy","List","subheader","ListSubheader","disableSticky","Typography","gutterBottom","mt","out","arr","isNewCategory","push","some","pl","pb","pt","ml","disableElevation","startIcon","Add","ListEditor","editor","setState","handleChange","k","b","comparators","intrinsicProperties","eventTypes","BreakpointEditor","properties","Divider","flexItem","orientation","mx","textOverflow","whiteSpace","component","property","condition","reference","inputProps","inputMode","pattern","propertyPaths","BreakpointListEditor","uniq","paths","nodeStructure","overflow","debounce","ScriptEditor","loading","CircularProgress","language","defaultValue","minimap","DebugOptionsEditor","monotonicF","monotonicG","tab","setTab","renderHeading","TabContext","TabList","Tab","TabPanel","ScrollPanel","onTarget","onScroll","setTarget","addEventListener","passive","removeEventListener","PanelContext","AppBarTitle","ModalAppBar","elevatedStyle","transitionProperties","elevatedChildren","simple","panel","threshold","showControls","setShowControls","isAbsoluteTop","setIsAbsoluteTop","isTop","setIsTop","lastTop","newIsTop","scrollTop","Math","abs","useScrollState","styles","background","paper","boxShadow","AppBar","elevation","Toolbar","ArrowBack","gridColumn","gridRow","flex","Fade","Modal","actions","scrollable","setContent","contentRef","setContentRef","hasOverflowingChildren","setHasOverflowingChildren","childHeight","setChildHeight","callback","doesOverflow","innerHeight","offsetHeight","ob","ResizeSensor","detach","useVariant","Dialog","fullScreen","paddingTop","PaperProps","borderRadius","shape","default","maxWidth","ManagedModal","ModalProps","ModalAppBarProps","appBar","isOpen","UtilityControls","divider","Controls","LazyList","renderItem","listOptions","totalCount","itemContent","Overline","my","Property","mr","EventInspector","cardStyles","bgcolor","CardActionArea","flexWrap","entries","EventListInspector","scrollToIndex","align","behavior","offset","SelectionMenu","notify","anchorReference","anchorPosition","ListItem","ListItemText","ListItemIcon","SpecimenInspector","mapType","setSelection","LinearProgress","zIndex","right","Title","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","version","es5","memoize","result","isType","match","lower","error","useBreakpoints","renderLabel","cancelled","cancellable","trimEnd","setLoading","setSpecimen","useAsync","signal","defaults","aborted","CssBaseline","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.78b0610a.chunk.js","sourcesContent":["import { transform } from \"@babel/standalone\";\r\n\r\nexport function transpile(script: string = \"\") {\r\n  try {\r\n    return transform(script, {}).code;\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 295;","import { transpile } from \"./transpile\";\r\nimport Interpreter from \"js-interpreter\";\r\nimport { map } from \"lodash\";\r\nimport { templates } from \"./templates\";\r\nimport { FunctionTemplate } from \"./FunctionTemplate\";\r\n\r\nconst TIMEOUT = 1000;\r\n\r\ntype TemplateMap = typeof templates;\r\n\r\ntype Key = keyof TemplateMap;\r\n\r\ntype ReturnTypeOf<T extends Key> = TemplateMap[T] extends FunctionTemplate<\r\n  [...any],\r\n  infer R\r\n>\r\n  ? R\r\n  : never;\r\n\r\ntype ParamsOf<T extends Key> = TemplateMap[T] extends FunctionTemplate<\r\n  infer R,\r\n  any\r\n>\r\n  ? R\r\n  : [];\r\n\r\nexport async function call<T extends Key>(\r\n  script: string,\r\n  method: T,\r\n  params: ParamsOf<T>,\r\n  es6: boolean = true,\r\n  fast: boolean = false\r\n): Promise<ReturnTypeOf<T> | undefined> {\r\n  return fast\r\n    ? UNSTABLE_evaluate(script, method, params)\r\n    : await interpret(script, method, params, es6);\r\n}\r\n\r\nexport function UNSTABLE_evaluate<T extends Key>(\r\n  script: string,\r\n  method: T,\r\n  params: ParamsOf<T>\r\n) {\r\n  /* eslint-disable no-eval */\r\n  return eval(`${script}\\n${makeCallExpression(method, params)}`);\r\n}\r\n\r\nexport async function interpret<T extends Key>(\r\n  script: string,\r\n  method: T,\r\n  params: ParamsOf<T>,\r\n  es6: boolean = true\r\n): Promise<ReturnTypeOf<T> | undefined> {\r\n  const code = es6 ? transpile(script) : script;\r\n  if (code) {\r\n    const interpreter = new Interpreter(code);\r\n    interpreter.appendCode(makeCallExpression(method, params));\r\n    return new Promise((res) => {\r\n      const start = Date.now();\r\n      const step = () => {\r\n        const active = Date.now() - start <= TIMEOUT;\r\n        if (active && interpreter.step()) {\r\n          requestAnimationFrame(step);\r\n        } else {\r\n          res(interpreter.value);\r\n        }\r\n      };\r\n      step();\r\n    });\r\n  }\r\n}\r\n\r\nfunction makeCallExpression<T extends Key>(method: T, params: ParamsOf<T>) {\r\n  return `${method}(${map(params, JSON.stringify).join(\", \")});`;\r\n}\r\n","import { colors, createTheme } from \"@material-ui/core\";\r\nimport { times } from \"lodash\";\r\n\r\nconst shadow = `\r\n    0px 8px 18px -1px rgb(0 0 0 / 8%), \r\n    0px 10px 48px 0px rgb(0 0 0 / 1%), \r\n    0px 20px 96px 0px rgb(0 0 0 / 0.5%)\r\n`;\r\n\r\nexport const theme = createTheme({\r\n  palette: {\r\n    primary: colors[\"blueGrey\"],\r\n  },\r\n  shadows: [\"\", ...times(24, () => shadow)] as any,\r\n});\r\n","import { Box, BoxProps } from \"@material-ui/core\";\r\n\r\nexport type FlexProps = {\r\n  vertical?: boolean;\r\n} & BoxProps;\r\n\r\nexport function Flex({ vertical, ...props }: FlexProps) {\r\n  return (\r\n    <Box\r\n      position=\"relative\"\r\n      height=\"100%\"\r\n      width=\"100%\"\r\n      display=\"flex\"\r\n      flexDirection={vertical ? \"column\" : \"row\"}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n","import { Box } from \"@material-ui/core\";\r\nimport { BoxProps } from \"@material-ui/system\";\r\n\r\nexport function Space(props: BoxProps) {\r\n  return <Box px={0.5} display=\"inline-block\" {...props} />;\r\n}\r\n","import { Box, IconButton, Snackbar } from \"@material-ui/core\";\r\nimport { CloseOutlined as CloseIcon } from \"@material-ui/icons\";\r\nimport { noop } from \"lodash\";\r\nimport {\r\n  createContext,\r\n  ReactNode,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { Flex } from \"./Flex\";\r\nimport { Space } from \"./Space\";\r\n\r\nconst SnackbarContext = createContext<(message?: ReactNode) => void>(noop);\r\n\r\nexport interface SnackbarMessage {\r\n  message?: ReactNode;\r\n  key: number;\r\n}\r\n\r\nexport interface State {\r\n  open: boolean;\r\n  snackPack: readonly SnackbarMessage[];\r\n  messageInfo?: SnackbarMessage;\r\n}\r\n\r\nexport function useSnackbar() {\r\n  return useContext(SnackbarContext);\r\n}\r\n\r\nexport function SnackbarProvider({ children }: { children?: ReactNode }) {\r\n  const [snackPack, setSnackPack] = useState<readonly SnackbarMessage[]>([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [current, setCurrent] = useState<SnackbarMessage | undefined>(\r\n    undefined\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (snackPack.length && !current) {\r\n      setCurrent({ ...snackPack[0] });\r\n      setSnackPack((prev) => prev.slice(1));\r\n      setOpen(true);\r\n    } else if (snackPack.length && current && open) {\r\n      setOpen(false);\r\n    }\r\n  }, [snackPack, current, open]);\r\n\r\n  const handleMessage = useCallback(\r\n    (message: ReactNode) => {\r\n      setSnackPack((prev) => [...prev, { message, key: new Date().getTime() }]);\r\n    },\r\n    [setSnackPack]\r\n  );\r\n\r\n  const handleClose = (_: any, reason?: string) => {\r\n    reason !== \"clickaway\" && setOpen(false);\r\n  };\r\n\r\n  const handleExited = () => setCurrent(undefined);\r\n\r\n  return (\r\n    <>\r\n      <SnackbarContext.Provider value={handleMessage}>\r\n        {children}\r\n      </SnackbarContext.Provider>\r\n      <Snackbar\r\n        key={current?.key}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        TransitionProps={{ onExited: handleExited }}\r\n        message={current?.message}\r\n        action={\r\n          <>\r\n            <IconButton\r\n              aria-label=\"close\"\r\n              color=\"inherit\"\r\n              sx={{ p: 0.5 }}\r\n              onClick={handleClose}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </>\r\n        }\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\ntype SnackbarLabelProps = {\r\n  primary?: ReactNode;\r\n  secondary?: ReactNode;\r\n};\r\n\r\nexport function SnackbarLabel({ primary, secondary }: SnackbarLabelProps) {\r\n  return (\r\n    <Flex>\r\n      <Box>{primary}</Box>\r\n      <Space />\r\n      <Box sx={{ opacity: 0.56 }}>{secondary}</Box>\r\n    </Flex>\r\n  );\r\n}\r\n","import { noop } from \"lodash\";\r\nimport {\r\n  createContext,\r\n  ReactNode,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer,\r\n} from \"react\";\r\n\r\ntype Slice<T, U = T> = [T, (next: U) => void];\r\n\r\ntype Reducer<T, U> = (prev: T, next: U) => T;\r\n\r\nconst defaultReducer = (_: any, next: any) => next;\r\n\r\nexport function createSlice<T, U = T>(\r\n  initialState: T,\r\n  initializer?: () => Promise<U>,\r\n  reducer: Reducer<T, U> = defaultReducer\r\n) {\r\n  const Store = createContext<Slice<T, U>>([initialState, noop]);\r\n  return [\r\n    // Hook\r\n    () => useContext(Store),\r\n    // Context\r\n    ({ children }: { children?: ReactNode }) => {\r\n      const [value, dispatch] = useReducer(reducer, initialState);\r\n      const slice = useMemo<Slice<T, U>>(\r\n        () => [value, dispatch],\r\n        [value, dispatch]\r\n      );\r\n      useEffect(() => void initializer?.().then?.(dispatch), [dispatch]);\r\n      return <Store.Provider value={slice}>{children}</Store.Provider>;\r\n    },\r\n  ] as const;\r\n}\r\n","import { JSONRPCClient, JSONRPCResponse as Response } from \"json-rpc-2.0\";\r\nimport { NameMethodMap } from \"protocol\";\r\nimport { Request, RequestOf, ResponseOf } from \"protocol/Message\";\r\nimport { io, Socket } from \"socket.io-client\";\r\n\r\nexport interface RPCClientOptions {\r\n  url: string;\r\n}\r\n\r\nexport class RPCClient {\r\n  rpc: JSONRPCClient;\r\n  socket: Socket;\r\n\r\n  constructor(readonly options: RPCClientOptions) {\r\n    this.socket = io(options.url);\r\n    this.rpc = new JSONRPCClient(async (request: Request) => {\r\n      const listener = (response: Response) => {\r\n        if (response.id === request.id) {\r\n          this.socket.off(\"response\", listener);\r\n          this.rpc.receive(response);\r\n        }\r\n      };\r\n      this.socket.emit(\"request\", request);\r\n      this.socket.on(\"response\", listener);\r\n    });\r\n  }\r\n\r\n  async connect() {\r\n    this.socket.connect();\r\n  }\r\n\r\n  async disconnect() {\r\n    this.socket.disconnect();\r\n  }\r\n\r\n  async call<T extends keyof NameMethodMap>(\r\n    name: T,\r\n    params?: RequestOf<NameMethodMap[T]>[\"params\"]\r\n  ): Promise<ResponseOf<NameMethodMap[T]>[\"result\"]> {\r\n    return await this.rpc.request(name, params);\r\n  }\r\n}\r\n","import { once } from \"lodash\";\r\nimport { RPCClient } from \"./RPCClient\";\r\n\r\nconst DEV_PORT = 8001;\r\n\r\nconst { hostname, protocol } = window.location;\r\nconst isLocalHost = hostname === \"localhost\";\r\n\r\nconst registry =\r\n  \"https://raw.githubusercontent.com/Pathfinding-Project/registry/master/index.json\";\r\n\r\ntype Registry = string[];\r\n\r\nexport const getClient = once(async () => {\r\n  if (isLocalHost) {\r\n    return new RPCClient({\r\n      url: `${protocol}//${hostname}:${DEV_PORT}/`,\r\n    });\r\n  } else {\r\n    const response = await fetch(registry);\r\n    const servers = (await response.json()) as Registry;\r\n    return new RPCClient({\r\n      url: servers[0],\r\n    });\r\n  }\r\n});\r\n","import { createSlice } from \"./createSlice\";\r\nimport { CheckConnectionResponse } from \"protocol/CheckConnection\";\r\nimport { getClient } from \"client/getClient\";\r\n\r\ntype Info = CheckConnectionResponse[\"result\"];\r\n\r\nexport const [useInfo, InfoProvider] = createSlice<Info | undefined>(\r\n  undefined,\r\n  async () => {\r\n    const client = await getClient();\r\n    return await client.call(\"about\");\r\n  }\r\n);\r\n","import { createSlice } from \"./createSlice\";\r\nimport { Trace } from \"protocol/Trace\";\r\nimport { PathfindingTask } from \"protocol/SolveTask\";\r\nimport { ParamsOf } from \"protocol/Message\";\r\n\r\ntype Specimen = {\r\n  specimen?: Trace;\r\n} & Partial<ParamsOf<PathfindingTask>>;\r\n\r\nexport const [useSpecimen, SpecimenProvider] = createSlice<Specimen>({});\r\n","import { chunk, join, map, split } from \"lodash\";\r\nimport { FunctionTemplate } from \"./FunctionTemplate\";\r\n\r\ntype GenericFunctionTemplate = FunctionTemplate<[...any], any>;\r\n\r\nfunction makeTypeString({ returnType, params }: GenericFunctionTemplate) {\r\n  return `@type {(${join(\r\n    map(params, (p) => `${p.name}: ${p.type}`),\r\n    \", \"\r\n  )}) => ${returnType}}`;\r\n}\r\n\r\nfunction makeComment(method: GenericFunctionTemplate) {\r\n  const [open, prefix, close] = [\"/**\", \" * \", \" */\"];\r\n  const chunks = map(chunk(split(method.description, \" \"), 9), (c) =>\r\n    join(c, \" \")\r\n  );\r\n  return join(\r\n    [\r\n      open,\r\n      ...map(chunks, (c) => `${prefix}${c}`),\r\n      `${prefix}${makeTypeString(method)}`,\r\n      close,\r\n    ],\r\n    \"\\n\"\r\n  );\r\n}\r\n\r\nfunction makeBody({\r\n  name,\r\n  params,\r\n  defaultReturnValue,\r\n}: GenericFunctionTemplate) {\r\n  return join(\r\n    [\r\n      `function ${name}(${join(map(params, \"name\"), \", \")}) {`,\r\n      `    return ${JSON.stringify(defaultReturnValue)};`,\r\n      `}`,\r\n    ],\r\n    \"\\n\"\r\n  );\r\n}\r\n\r\nexport function makeTemplate(methods?: GenericFunctionTemplate[]) {\r\n  return join(\r\n    map(methods, (m) => join([makeComment(m), makeBody(m)], \"\\n\")),\r\n    \"\\n\\n\"\r\n  );\r\n}\r\n","import { TraceEvent } from \"protocol/Trace\";\r\nimport { FunctionTemplate } from \"./FunctionTemplate\";\r\n\r\nexport type ShouldBreak = FunctionTemplate<[number, TraceEvent], boolean>;\r\n\r\nexport const shouldBreak: ShouldBreak = {\r\n  name: \"shouldBreak\",\r\n  description:\r\n    \"Define in what situations the debugger should break, in addition to the conditions defined in the standard options.\",\r\n  params: [\r\n    { name: \"step\", type: \"number\" },\r\n    { name: \"event\", type: \"any\" },\r\n  ],\r\n  defaultReturnValue: false,\r\n  returnType: \"boolean\",\r\n};\r\n\r\nexport type ShouldRender = FunctionTemplate<[number], boolean>;\r\n\r\nexport const shouldRender: ShouldRender = {\r\n  name: \"shouldRender\",\r\n  description:\r\n    \"Define which objects the renderer should display, in addition to the conditions defined in the standard options.\",\r\n  params: [{ name: \"step\", type: \"number\" }],\r\n  defaultReturnValue: true,\r\n  returnType: \"boolean\",\r\n};\r\n\r\nexport const templates = {\r\n  shouldRender,\r\n  shouldBreak,\r\n};\r\n","import { makeTemplate } from \"components/script-editor/makeTemplate\";\r\nimport { templates } from \"components/script-editor/templates\";\r\nimport { values } from \"lodash\";\r\nimport { FeatureDescriptor } from \"protocol/FeatureQuery\";\r\nimport { TraceEventType } from \"protocol/Trace\";\r\nimport { createSlice } from \"./createSlice\";\r\n\r\nexport type PlaybackStateType = \"playing\" | \"paused\" | undefined;\r\n\r\ntype PlaybackState = { playback?: PlaybackStateType; step?: number };\r\n\r\ntype InputState = {\r\n  algorithm?: string;\r\n  map?: Partial<FeatureDescriptor & { type: string }>;\r\n};\r\n\r\nexport type Comparator = {\r\n  key: string;\r\n  apply: (value: number, reference: number) => boolean;\r\n};\r\n\r\nexport type Breakpoint = {\r\n  key: string;\r\n  property?: string;\r\n  reference?: number;\r\n  condition?: Comparator;\r\n  active?: boolean;\r\n  type?: TraceEventType;\r\n};\r\n\r\ntype DebugOptionsState = {\r\n  code?: string;\r\n  monotonicF?: boolean;\r\n  monotonicG?: boolean;\r\n  breakpoints?: Breakpoint[];\r\n};\r\n\r\ntype SpecimenState = {\r\n  start?: number;\r\n  end?: number;\r\n};\r\n\r\nexport type UIState = InputState &\r\n  PlaybackState &\r\n  DebugOptionsState &\r\n  SpecimenState;\r\n\r\nexport const [useUIState, UIStateProvider] = createSlice<\r\n  UIState,\r\n  Partial<UIState>\r\n>(\r\n  {\r\n    code: makeTemplate(values(templates)),\r\n  },\r\n  undefined,\r\n  (prev, next) => ({ ...prev, ...next })\r\n);\r\n","import { ceil, clamp, max } from \"lodash\";\r\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nconst TARGET_FRAME_TIME = 1000 / 60;\r\n\r\nfunction useFrameTime(playing: boolean) {\r\n  const [lastFrame, setLastFrame] = useState(0);\r\n  const [delta, setDelta] = useState(TARGET_FRAME_TIME);\r\n\r\n  useEffect(() => {\r\n    if (!playing) setLastFrame(0);\r\n  }, [playing, setLastFrame]);\r\n\r\n  const tick = useCallback(() => {\r\n    if (playing) {\r\n      const now = Date.now();\r\n      if (lastFrame) {\r\n        setDelta(now - lastFrame);\r\n        setLastFrame(now);\r\n      } else {\r\n        setDelta(TARGET_FRAME_TIME);\r\n        setLastFrame(now);\r\n      }\r\n    }\r\n  }, [setDelta, setLastFrame, lastFrame, playing]);\r\n\r\n  return [tick, delta, max([1, ceil(delta / TARGET_FRAME_TIME)]) ?? 1] as const;\r\n}\r\n\r\nexport function usePlaybackState() {\r\n  const [{ specimen }] = useSpecimen();\r\n  const [{ playback, step = 0 }, setUIState] = useUIState();\r\n\r\n  const ready = !!specimen;\r\n  const playing = playback === \"playing\";\r\n  const [start, end] = [0, (specimen?.eventList?.length ?? 1) - 1];\r\n\r\n  const [tick, , lag] = useFrameTime(playing);\r\n\r\n  return useMemo(() => {\r\n    const state = {\r\n      start,\r\n      end,\r\n      step,\r\n      canPlay: ready && !playing,\r\n      canPause: ready && playing,\r\n      canStop: ready,\r\n      canStepForward: ready && !playing && step < end,\r\n      canStepBackward: ready && !playing && step > 0,\r\n    };\r\n\r\n    const stepBy = (n: number) => clamp(step + n, start, end);\r\n\r\n    const callbacks = {\r\n      play: () => setUIState({ playback: \"playing\", step: stepBy(1) }),\r\n      pause: () => setUIState({ playback: \"paused\" }),\r\n      stop: () => setUIState({ step: start, playback: \"paused\" }),\r\n      stepForward: () => setUIState({ step: stepBy(1) }),\r\n      stepBackward: () => setUIState({ step: stepBy(-1) }),\r\n      tick: () => {\r\n        setUIState({ playback: \"playing\", step: stepBy(1 * lag) });\r\n        tick();\r\n      },\r\n    };\r\n\r\n    return {\r\n      playing: playback === \"playing\",\r\n      ...state,\r\n      ...callbacks,\r\n    };\r\n  }, [end, lag, playback, playing, ready, tick, setUIState, start, step]);\r\n}\r\n","import { BlurOffOutlined as DisabledIcon } from \"@material-ui/icons\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { RendererProps } from \"components/specimen-renderer/Renderer\";\r\n\r\nexport function DefaultRenderer({ width, height }: RendererProps) {\r\n  return (\r\n    <Flex\r\n      {...{ width, height }}\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      color=\"text.secondary\"\r\n      vertical\r\n    >\r\n      <DisabledIcon sx={{ mb: 2 }} fontSize=\"large\" />\r\n      No renderer is installed for the current map style.\r\n    </Flex>\r\n  );\r\n}\r\n","export const getDefaults = () => ({\r\n  start: 0,\r\n  end: 0,\r\n});\r\n","import { Point } from \"components/specimen-renderer/Renderer\";\r\nimport { filter, flatMap as flat, last, map, split } from \"lodash\";\r\nimport { TraceEvent } from \"protocol/Trace\";\r\n\r\nexport function parseMap(m: string = \"\", wall: string = \"@\") {\r\n  const [, h, w] = split(m, \"\\n\");\r\n  const [width, height] = map([w, h], (d) => +last(split(d, \" \"))!);\r\n  const grid = split(m, \"\\n\").slice(4);\r\n  return [\r\n    { x: width, y: height },\r\n    filter(\r\n      flat(grid, (row, y) =>\r\n        map(row, (tile, x) =>\r\n          tile === wall ? { variables: { x, y } } : undefined\r\n        )\r\n      )\r\n    ) as TraceEvent[],\r\n    ({ x, y }: Point) => grid[y]?.[x] !== wall,\r\n  ] as const;\r\n}\r\n","import { find, floor, range } from \"lodash\";\nimport { parseMap } from \"./parseMap\";\n\nexport function getDefaults(m: string = \"\", wall: string = \"@\") {\n  const [{ x: w, y: h }, , valid] = parseMap(m, wall);\n  const node =\n    find(range(w * h), (i) => valid({ x: i % w, y: floor(i / w) })) ?? 0;\n  return {\n    start: node,\n    end: node,\n  };\n}\n","import {\r\n  blue,\r\n  blueGrey,\r\n  green,\r\n  orange,\r\n  red,\r\n  yellow,\r\n} from \"@material-ui/core/colors\";\r\nimport { mapValues } from \"lodash\";\r\nimport { TraceEventType } from \"protocol/Trace\";\r\n\r\nconst tint = \"500\";\r\n\r\nfunction convert(hex: string) {\r\n  return parseInt(hex.replace(\"#\", \"0x\"));\r\n}\r\n\r\nexport const colors: { [K in TraceEventType]: number } = mapValues(\r\n  {\r\n    source: green[tint],\r\n    destination: red[tint],\r\n    expanding: blue[tint],\r\n    generating: yellow[tint],\r\n    closing: blueGrey[tint],\r\n  },\r\n  convert\r\n);\r\n\r\nexport function getColor(key?: TraceEventType) {\r\n  return (key && colors[key]) || convert(orange[tint]);\r\n}\r\n","export const scale = 10 * devicePixelRatio;\r\nexport const size = 1200;\r\n","import { Graphics } from \"@inlet/react-pixi\";\r\nimport { ComponentProps } from \"react\";\r\nimport { Graphics as PIXIGraphics } from \"@pixi/graphics\";\r\n\r\nexport function makeGraphic<T = any>(\r\n  draw: (g: PIXIGraphics, props: ComponentProps<typeof Graphics> & T) => void\r\n) {\r\n  return (props: ComponentProps<typeof Graphics> & T) => {\r\n    return <Graphics {...props} draw={(g) => draw(g, props)} />;\r\n  };\r\n}\r\n","import { ceil, forEach, range } from \"lodash\";\r\nimport { makeGraphic } from \"./makeGraphic\";\r\nimport { scale } from \"./config\";\r\nimport { ComponentProps } from \"react\";\r\n\r\nconst WEIGHT = 1;\r\n\r\nconst Grid = makeGraphic<{ alpha?: number; grid?: number }>(\r\n  (g, { width = 0, height = 0, alpha = 1, grid = 5 }) => {\r\n    g.clear();\r\n    g.lineStyle(WEIGHT, 0x000000, alpha);\r\n    forEach(range(scale * grid, height, scale * grid), (i) =>\r\n      g.moveTo(0, i + WEIGHT / 2).lineTo(width, i + WEIGHT / 2)\r\n    );\r\n    forEach(range(scale * grid, width, scale * grid), (i) =>\r\n      g.moveTo(i + WEIGHT / 2, 0).lineTo(i + WEIGHT / 2, height)\r\n    );\r\n  }\r\n);\r\n\r\ntype Props = ComponentProps<typeof Grid>;\r\n\r\nexport function Guides({\r\n  width = 0,\r\n  height = 0,\r\n  x = 0,\r\n  y = 0,\r\n  grid = 5,\r\n  ...params\r\n}: Props) {\r\n  return (\r\n    <Grid\r\n      width={ceil(width / grid) * grid * scale}\r\n      height={ceil(height / grid) * grid * scale}\r\n      grid={grid}\r\n      {...params}\r\n    />\r\n  );\r\n}\r\n","import { makeGraphic } from \"./makeGraphic\";\r\nimport { scale } from \"./config\";\r\nimport { Graphics } from \"@pixi/graphics\";\r\n\r\nexport type NodeProps = {\r\n  color?: number;\r\n  left?: number;\r\n  top?: number;\r\n  radius?: number;\r\n  resolution?: number;\r\n};\r\n\r\nexport const point = (\r\n  g: Graphics,\r\n  { color, left = 0, top = 0, radius = 0.25, resolution: r = 1 }: NodeProps\r\n) =>\r\n  g\r\n    .beginFill(color ?? 0x000000)\r\n    .drawCircle(\r\n      r * (1.5 * scale + left),\r\n      r * (1.5 * scale + top),\r\n      r * radius * scale\r\n    )\r\n    .endFill();\r\n\r\nexport const square = (\r\n  g: Graphics,\r\n  { color, left = 0, top = 0, radius = 0.25, resolution: r = 1 }: NodeProps\r\n) =>\r\n  g\r\n    .beginFill(color ?? 0x000000)\r\n    .drawRect(\r\n      r * (1.25 * scale + (radius * scale) / 2 + left),\r\n      r * (1.25 * scale + (radius * scale) / 2 + top),\r\n      r * (radius * scale),\r\n      r * (radius * scale)\r\n    )\r\n    .endFill();\r\n\r\nexport const Node = makeGraphic<NodeProps>((g, p) => {\r\n  g.clear();\r\n  point(g, p);\r\n});\r\n","import { Graphics } from \"@inlet/react-pixi\";\r\nimport { keyBy, values } from \"lodash\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { Trace, TraceEventType } from \"protocol/Trace\";\r\nimport { useCallback, useMemo } from \"react\";\r\nimport { scale } from \"./config\";\r\nimport { point, NodeProps } from \"./Node\";\r\n\r\ntype Props = {\r\n  nodes: Trace[\"eventList\"];\r\n  color?: (type?: TraceEventType) => number;\r\n  variant?: (g: PIXI.Graphics, options: NodeProps) => PIXI.Graphics;\r\n  resolution?: number;\r\n};\r\n\r\nexport function NodeList({\r\n  nodes,\r\n  color,\r\n  variant = point,\r\n  resolution = 0.15,\r\n}: Props) {\r\n  const memo = useMemo(\r\n    () =>\r\n      values(keyBy(nodes, ({ variables: v }) => `${v?.x ?? 0}::${v?.y ?? 0}`)),\r\n    [nodes]\r\n  );\r\n  const draw = useCallback(\r\n    (g: PIXI.Graphics) => {\r\n      g.clear();\r\n      for (const { variables: v, type } of memo) {\r\n        variant(g, {\r\n          color: color?.(type) ?? 0xe0e0e0,\r\n          left: (v?.x ?? 0) * scale,\r\n          top: (v?.y ?? 0) * scale,\r\n          radius: 0.25,\r\n          resolution,\r\n        });\r\n      }\r\n      return g;\r\n    },\r\n    [memo, color, resolution, variant]\r\n  );\r\n  return <Graphics draw={draw} scale={1 / resolution} />;\r\n}\r\n","import { map } from \"lodash\";\r\nimport { Point } from \"components/specimen-renderer/Renderer\";\r\nimport { scale } from \"./config\";\r\nimport { useTween } from \"react-use\";\r\nimport { ComponentProps as PropsOf } from \"react\";\r\nimport { Node } from \"./Node\";\r\n\r\ntype SelectedProps = {\r\n  animateScale?: boolean;\r\n  animateAlpha?: boolean;\r\n} & PropsOf<typeof Node>;\r\n\r\ntype Props = {\r\n  hover?: Point;\r\n  highlight?: Point;\r\n};\r\n\r\nexport function Selected({\r\n  x = 0,\r\n  y = 0,\r\n  animateScale,\r\n  animateAlpha,\r\n  ...props\r\n}: SelectedProps) {\r\n  const t = useTween(\"outCirc\", 300);\r\n  return (\r\n    <Node\r\n      {...props}\r\n      scale={animateScale ? t : 1}\r\n      x={x + (animateScale ? 1.5 * scale - 1.5 * scale * t : 0)}\r\n      y={y + (animateScale ? 1.5 * scale - 1.5 * scale * t : 0)}\r\n      radius={1}\r\n      alpha={animateAlpha ? t : 1}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Selection({ hover, highlight }: Props) {\r\n  return (\r\n    <>\r\n      {map(\r\n        [\r\n          { point: hover, color: 0xf9f9f9, animateAlpha: true },\r\n          { point: highlight, color: 0xf1f1f1, animateScale: true },\r\n        ],\r\n        ({ point, ...props }, i) =>\r\n          point && (\r\n            <Selected\r\n              key={`${i}::${point.x}::${point.y}`}\r\n              x={point.x * scale}\r\n              y={point.y * scale}\r\n              {...props}\r\n            />\r\n          )\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { Point, SelectionInfo } from \"components/specimen-renderer/Renderer\";\r\nimport { findIndex, findLastIndex, take } from \"lodash\";\r\nimport { Trace } from \"protocol/Trace\";\r\nimport { parseMap } from \"./parseMap\";\r\n\r\nfunction between(v: number, min: number, max: number) {\r\n  return v >= min && v < max;\r\n}\r\n\r\nexport function selectionInfo(\r\n  mapURI: string = \"\",\r\n  specimen: Trace = {},\r\n  step: number = 0\r\n) {\r\n  const [{ x: w, y: h }, , valid] = parseMap(mapURI);\r\n  return ({ x, y }: Point) => {\r\n    const nodes = take(specimen?.eventList, step);\r\n    const node = findLastIndex(\r\n      nodes,\r\n      ({ variables: v }) => (v?.x ?? 0) === x && (v?.y ?? 0) === y\r\n    );\r\n    const entry = findIndex(\r\n      specimen?.eventList,\r\n      ({ variables: v, type }) =>\r\n        type === \"expanding\" && (v?.x ?? 0) === x && (v?.y ?? 0) === y\r\n    );\r\n    return {\r\n      current: node !== -1 ? { index: node, event: nodes[node] } : undefined,\r\n      entry: entry !== -1 ? { index: entry, event: nodes[entry] } : undefined,\r\n      node:\r\n        between(x, 0, w) && between(y, 0, h) && valid({ x, y })\r\n          ? { key: y * w + x }\r\n          : undefined,\r\n    } as SelectionInfo;\r\n  };\r\n}\r\n","import { find } from \"lodash\";\r\nimport { Viewport as PixiViewportBase } from \"pixi-viewport\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport type ViewportEvent = {\r\n  global: PIXI.Point;\r\n  world: PIXI.Point;\r\n  event: PointerEvent;\r\n};\r\n\r\nexport type ViewportEventHandler = (e: ViewportEvent) => void;\r\n\r\nexport type PointerEvent = \"onMouseOver\" | \"onClick\" | \"onMouseDown\";\r\n\r\nexport type PropEventPair = {\r\n  prop: PointerEvent;\r\n  event: string;\r\n  filter?: boolean;\r\n};\r\n\r\nexport const events = [\r\n  { prop: \"onMouseOver\", event: \"mousemove\" },\r\n  { prop: \"onClick\", event: \"click\", filter: true },\r\n  { prop: \"onClick\", event: \"tap\", filter: true },\r\n  { prop: \"onMouseDown\", event: \"pointerdown\", filter: true },\r\n] as PropEventPair[];\r\n\r\nexport class PixiViewport extends PixiViewportBase {\r\n  events: {\r\n    [K in string]?: () => void;\r\n  } = {};\r\n  register(prop: PointerEvent, handler?: ViewportEventHandler) {\r\n    const { event, filter } = find(events, (c) => c.prop === prop)!;\r\n    this.events?.[event]?.();\r\n    if (handler) {\r\n      const f = (e: PIXI.InteractionEvent) => {\r\n        const { global } = e.data;\r\n        if (!filter || this.input.clickedAvailable) {\r\n          handler?.({\r\n            global,\r\n            world: this.toWorld(global),\r\n            event: prop,\r\n          });\r\n        }\r\n      };\r\n      this.on(event, f);\r\n      this.events[event] = () => this.off(event, f);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Adapted from https://codesandbox.io/s/react-pixi-viewport-9ngfd\r\n * @author roxgarage\r\n */\r\n\r\nimport { PixiComponent, useApp } from \"@inlet/react-pixi\";\r\nimport { map } from \"lodash\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport React from \"react\";\r\nimport {\r\n  PointerEvent,\r\n  PixiViewport,\r\n  events,\r\n  ViewportEventHandler,\r\n} from \"./PixiViewport\";\r\n\r\nexport type ViewportProps = {\r\n  width?: number;\r\n  height?: number;\r\n  children?: React.ReactNode;\r\n  event?: PIXI.InteractionEvent;\r\n} & { [K in PointerEvent]?: ViewportEventHandler };\r\n\r\nexport type Props = {\r\n  app: PIXI.Application;\r\n} & ViewportProps;\r\n\r\nfunction create(props: Props) {\r\n  const viewport = new PixiViewport({\r\n    interaction: props.app.renderer.plugins.interaction,\r\n    ticker: props.app.ticker,\r\n    stopPropagation: true,\r\n    passiveWheel: false,\r\n  })\r\n    .drag()\r\n    .pinch()\r\n    .wheel()\r\n    .decelerate({ friction: 0.98 })\r\n    .clampZoom({ maxScale: 10, minScale: 0.1 });\r\n  return viewport as PixiViewport;\r\n}\r\n\r\nfunction applyProps(\r\n  v: PixiViewport,\r\n  prev: Props,\r\n  { width, height, ...next }: Props\r\n) {\r\n  for (const { equal, apply } of [\r\n    ...map(events, ({ prop }) => ({\r\n      equal: prev[prop] === next[prop],\r\n      apply: () => v.register(prop, next[prop]),\r\n    })),\r\n    {\r\n      prop: prev.width === width && prev.height === height,\r\n      apply: () => v.resize(width, height, (width ?? 0) * 2, (height ?? 0) * 2),\r\n    },\r\n  ]) {\r\n    !equal && apply();\r\n  }\r\n}\r\n\r\nconst Component = PixiComponent<Props, PixiViewport>(\"Viewport\", {\r\n  create: (props) => {\r\n    const viewport = create(props);\r\n    applyProps(viewport, props, props);\r\n    return viewport;\r\n  },\r\n  applyProps,\r\n});\r\n\r\nexport const Viewport = (props: ViewportProps) => {\r\n  const app = useApp();\r\n  return <Component app={app} {...props} />;\r\n};\r\n","import { Stage } from \"@inlet/react-pixi\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Point, RendererProps } from \"components/specimen-renderer/Renderer\";\r\nimport { delay, floor, map, merge, take } from \"lodash\";\r\nimport { ComponentProps, useMemo, useState } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { getColor } from \"./colors\";\r\nimport { scale } from \"./config\";\r\nimport { getDefaults } from \"./getDefaults\";\r\nimport { Guides } from \"./Guides\";\r\nimport { Node, square } from \"./Node\";\r\nimport { NodeList } from \"./NodeList\";\r\nimport { parseMap } from \"./parseMap\";\r\nimport { ViewportEvent } from \"./PixiViewport\";\r\nimport { Selection } from \"./Selection\";\r\nimport { selectionInfo } from \"./selectionInfo\";\r\nimport { Viewport } from \"./Viewport\";\r\n\r\ntype GridRendererProps = RendererProps &\r\n  Omit<ComponentProps<typeof Stage>, \"onSelect\">;\r\n\r\nfunction getPoint({ x, y }: Point) {\r\n  return { x: floor(x / scale) - 1, y: floor(y / scale) - 1 };\r\n}\r\n\r\nexport function GridRenderer({\r\n  onSelect,\r\n  selection,\r\n  ...props\r\n}: GridRendererProps) {\r\n  const [ref, setRef] = useState<HTMLDivElement | null>(null);\r\n  const { width = 0, height = 0 } = props;\r\n  const [{ specimen, mapURI }] = useSpecimen();\r\n  const [{ step = 0, ...state }] = useUIState();\r\n\r\n  const [active, setActive] = useState<Point | undefined>(undefined);\r\n  const [hover, setHover] = useState<Point | undefined>(undefined);\r\n\r\n  const nodes = useMemo(\r\n    () => take(specimen?.eventList, step + 1),\r\n    [specimen, step]\r\n  );\r\n\r\n  const [size, bgNodes, , bgNodeColor, { start, end }] = useMemo(\r\n    () =>\r\n      [\r\n        ...parseMap(mapURI),\r\n        () => 0x121212,\r\n        merge(getDefaults(mapURI), state),\r\n      ] as const,\r\n    [mapURI, state.start, state.end]\r\n  );\r\n\r\n  const handleClick = useMemo(() => {\r\n    const info = selectionInfo(mapURI, specimen, step);\r\n    return ({ global, world }: ViewportEvent) => {\r\n      if (ref && specimen) {\r\n        const { top, left } = ref.getBoundingClientRect();\r\n        const point = getPoint(world);\r\n        onSelect?.({\r\n          global: { x: left + global.x, y: top + global.y },\r\n          world: point,\r\n          info: info(point),\r\n        });\r\n      }\r\n    };\r\n  }, [ref, onSelect, specimen, step, mapURI]);\r\n\r\n  const handleMouseEvent = useMemo(() => {\r\n    let timeout = 0;\r\n    return ({ world, event }: ViewportEvent) => {\r\n      switch (event) {\r\n        case \"onMouseOver\":\r\n          setHover(getPoint(world));\r\n          setActive(undefined);\r\n          clearTimeout(timeout);\r\n          break;\r\n        case \"onMouseDown\":\r\n          timeout = delay(() => setActive(getPoint(world)), 100);\r\n          break;\r\n      }\r\n    };\r\n  }, [setHover]);\r\n\r\n  return (\r\n    <Box sx={{ cursor: \"pointer\" }} ref={setRef}>\r\n      <Stage options={{ backgroundColor: 0xffffff }} {...props}>\r\n        <Viewport\r\n          width={width}\r\n          height={height}\r\n          onClick={handleClick}\r\n          onMouseDown={handleMouseEvent}\r\n          onMouseOver={handleMouseEvent}\r\n        >\r\n          <Selection hover={hover} highlight={selection || active} />\r\n          <Guides width={size.x} height={size.y} alpha={0.56} grid={10} />\r\n          <Guides width={size.x} height={size.y} alpha={0.24} grid={1} />\r\n          <NodeList nodes={specimen?.eventList} variant={square} />\r\n          <NodeList nodes={bgNodes} color={bgNodeColor} variant={square} />\r\n          <Overlay start={start} end={end} size={size} />\r\n          <NodeList nodes={nodes} color={getColor} />\r\n        </Viewport>\r\n      </Stage>\r\n    </Box>\r\n  );\r\n}\r\n\r\ntype OverlayProps = {\r\n  start?: number;\r\n  end?: number;\r\n  size?: Point;\r\n};\r\n\r\nfunction Overlay({\r\n  start: start = 0,\r\n  end: end = 0,\r\n  size = { x: 0, y: 0 },\r\n}: OverlayProps) {\r\n  return (\r\n    <>\r\n      {map(\r\n        [\r\n          { color: getColor(\"source\"), node: start },\r\n          { color: getColor(\"destination\"), node: end },\r\n        ],\r\n        ({ color, node }, i) => (\r\n          <Node\r\n            key={i}\r\n            x={scale * (node % size.x)}\r\n            y={scale * floor(node / size.x)}\r\n            color={color}\r\n            alpha={0.25}\r\n          />\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { get } from \"lodash\";\r\nimport { DefaultRenderer } from \"./default-renderer/DefaultRenderer\";\r\nimport { getDefaults } from \"./default-renderer/getDefaults\";\r\nimport { getDefaults as getGridDefaults } from \"./grid-renderer/getDefaults\";\r\nimport { GridRenderer } from \"./grid-renderer/GridRenderer\";\r\nimport { RendererEntry, RendererMap } from \"./Renderer\";\r\n\r\nconst renderers: RendererMap = {\r\n  grid: [GridRenderer, getGridDefaults],\r\n};\r\n\r\nexport function getRenderer(key = \"\") {\r\n  return get(renderers, key, [DefaultRenderer, getDefaults] as RendererEntry);\r\n}\r\n","import { createSlice } from \"./createSlice\";\r\n\r\ntype Loading = {\r\n  specimen?: boolean;\r\n};\r\n\r\nexport const [useLoading, LoadingProvider] = createSlice<Loading>(\r\n  {},\r\n  undefined,\r\n  (prev, next) => ({\r\n    ...prev,\r\n    ...next,\r\n  })\r\n);\r\n","import { getClient } from \"client/getClient\";\r\nimport {\r\n  SnackbarLabel as Label,\r\n  useSnackbar,\r\n} from \"components/generic/Snackbar\";\r\nimport { getRenderer } from \"components/specimen-renderer/getRenderer\";\r\nimport { ParamsOf } from \"protocol/Message\";\r\nimport { PathfindingTask } from \"protocol/SolveTask\";\r\nimport { useAsyncAbortable as useAsync } from \"react-async-hook\";\r\nimport { useLoading } from \"slices/loading\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nasync function getMap(map: string) {\r\n  const client = await getClient();\r\n  return (await client.call(\"features/map\", { id: map }))?.content;\r\n}\r\n\r\nexport function SpecimenService() {\r\n  const notify = useSnackbar();\r\n  const [, setLoading] = useLoading();\r\n  const [, setSpecimen] = useSpecimen();\r\n  const [{ algorithm, map, start, end }, setUIState] = useUIState();\r\n\r\n  useAsync(\r\n    async (signal) => {\r\n      setLoading({ specimen: true });\r\n      if (algorithm && map?.id && map?.type) {\r\n        const mapURI = await getMap(map.id);\r\n        if (mapURI) {\r\n          const client = await getClient();\r\n          const [, defaults] = getRenderer(map.type);\r\n\r\n          const params: ParamsOf<PathfindingTask> = {\r\n            algorithm,\r\n            end: end ?? defaults(mapURI)?.end,\r\n            start: start ?? defaults(mapURI)?.start,\r\n            mapType: map?.type,\r\n            mapURI,\r\n          };\r\n\r\n          try {\r\n            const specimen = await client.call(\"solve/pathfinding\", params);\r\n            if (!signal.aborted) {\r\n              setSpecimen({ specimen, ...params });\r\n              setUIState({ step: 0, playback: \"paused\", breakpoints: [] });\r\n              notify(\r\n                <Label\r\n                  primary=\"Solution generated.\"\r\n                  secondary={`${specimen?.eventList?.length} steps`}\r\n                />\r\n              );\r\n            }\r\n          } catch (e) {\r\n            notify(`${e}`);\r\n          }\r\n        }\r\n      }\r\n      setLoading({ specimen: false });\r\n    },\r\n    [algorithm, start, end, map?.id, map?.type, getClient, setLoading, notify]\r\n  );\r\n\r\n  return <></>;\r\n}\r\n","import { getClient } from \"client/getClient\";\r\nimport { FeatureDescriptor } from \"protocol/FeatureQuery\";\r\nimport { createSlice } from \"./createSlice\";\r\n\r\ntype Features = {\r\n  algorithms: FeatureDescriptor[];\r\n  maps: (FeatureDescriptor & { type: string })[];\r\n};\r\n\r\nexport const [useFeatures, FeaturesProvider] = createSlice<Features>(\r\n  { algorithms: [], maps: [] },\r\n  async () => {\r\n    const client = await getClient();\r\n    return {\r\n      algorithms: (await client.call(\"features/algorithm\")) ?? [],\r\n      maps: (await client.call(\"features/maps\")) ?? [],\r\n    };\r\n  }\r\n);\r\n","import { map, reduce } from \"lodash\";\r\nimport {\r\n  cloneElement,\r\n  createElement,\r\n  FunctionComponent,\r\n  ReactNode,\r\n} from \"react\";\r\n\r\ntype SliceProviderProps = {\r\n  slices?: FunctionComponent[];\r\n  services?: FunctionComponent[];\r\n  children?: ReactNode;\r\n};\r\n\r\nexport function SliceProvider({\r\n  slices,\r\n  children,\r\n  services,\r\n}: SliceProviderProps) {\r\n  return (\r\n    <>\r\n      {reduce(\r\n        map(slices, (s) => createElement(s)),\r\n        (prev, next) => cloneElement(next, {}, prev),\r\n        <>\r\n          {children}\r\n          {map(services, (s, i) => createElement(s, { key: i }))}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useMediaQuery, useTheme } from \"@material-ui/core\";\r\n\r\nexport function useSmallDisplay() {\r\n  const theme = useTheme();\r\n  return useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n}\r\n","import {\r\n  Menu,\r\n  MenuItem,\r\n  TextField,\r\n  TextFieldProps,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { useSmallDisplay } from \"hooks/useSmallDisplay\";\r\nimport { findIndex, map, max } from \"lodash\";\r\nimport State, { bindMenu, bindTrigger } from \"material-ui-popup-state\";\r\nimport { ReactElement, ReactNode } from \"react\";\r\n\r\ntype Key = string | number;\r\n\r\nexport type SelectProps<T extends Key> = {\r\n  trigger?: (props: ReturnType<typeof bindTrigger>) => ReactElement;\r\n  items?: { value: T; label?: ReactNode }[];\r\n  value?: T;\r\n  onChange?: (value: T) => void;\r\n  placeholder?: string;\r\n};\r\n\r\nconst itemHeight = (sm: boolean) => (sm ? 48 : 36);\r\nconst padding = 8;\r\n\r\nexport function Select<T extends string>({\r\n  trigger,\r\n  items,\r\n  value,\r\n  onChange,\r\n  placeholder = \"Select Option\",\r\n}: SelectProps<T>) {\r\n  const sm = useSmallDisplay();\r\n  const index = max([findIndex(items, { value: value as any }), 0]) ?? 0;\r\n  return (\r\n    <State variant=\"popover\">\r\n      {(state) => (\r\n        <>\r\n          <Tooltip title={placeholder}>\r\n            <span>{trigger?.(bindTrigger(state))}</span>\r\n          </Tooltip>\r\n          <Menu\r\n            {...bindMenu(state)}\r\n            anchorOrigin={{\r\n              horizontal: \"center\",\r\n              vertical: -itemHeight(sm) * index - padding,\r\n            }}\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"center\",\r\n            }}\r\n          >\r\n            {map(items, ({ value: v, label }) => (\r\n              <MenuItem\r\n                key={v}\r\n                value={v}\r\n                selected={v === value}\r\n                onClick={() => {\r\n                  state.close();\r\n                  onChange?.(v);\r\n                }}\r\n              >\r\n                {label}\r\n              </MenuItem>\r\n            ))}\r\n          </Menu>\r\n        </>\r\n      )}\r\n    </State>\r\n  );\r\n}\r\n\r\nexport type SelectFieldProps<T extends string> = Pick<\r\n  SelectProps<T>,\r\n  \"items\" | \"onChange\"\r\n> &\r\n  Omit<TextFieldProps, \"onChange\">;\r\n\r\nexport function SelectField<T extends string>(props: SelectFieldProps<T>) {\r\n  const { placeholder, value, items = [], onChange } = props;\r\n  return (\r\n    <TextField\r\n      sx={{ minWidth: 120 }}\r\n      select\r\n      label={placeholder}\r\n      value={value}\r\n      variant=\"filled\"\r\n      {...props}\r\n      onChange={(e) => onChange?.(e.target.value as T)}\r\n    >\r\n      {map(items, (item) => (\r\n        <MenuItem key={item.value} value={item.value}>\r\n          {item.label}\r\n        </MenuItem>\r\n      ))}\r\n    </TextField>\r\n  );\r\n}\r\n","import { Button, Typography as Type } from \"@material-ui/core\";\r\nimport { Select } from \"components/generic/Select\";\r\nimport { Space } from \"components/generic/Space\";\r\nimport { find, map, startCase } from \"lodash\";\r\nimport { FeatureDescriptor } from \"protocol/FeatureQuery\";\r\n\r\ntype Props = {\r\n  label?: string;\r\n  value?: string;\r\n  onChange?: (key: string) => void;\r\n  items?: FeatureDescriptor[];\r\n};\r\n\r\nexport function FeaturePicker({ label, value, onChange, items }: Props) {\r\n  const selected = find(items, { id: value });\r\n  return (\r\n    <Select\r\n      placeholder={startCase(label)}\r\n      trigger={(props) => (\r\n        <Button {...props} disabled={!items?.length}>\r\n          {selected?.name ?? label}\r\n        </Button>\r\n      )}\r\n      items={map(items, ({ id, name }) => ({\r\n        value: id,\r\n        label: (\r\n          <>\r\n            <Type>{name}</Type>\r\n            <Space />\r\n            <Type variant=\"body2\" color=\"textSecondary\">\r\n              {id}\r\n            </Type>\r\n          </>\r\n        ),\r\n      }))}\r\n      value={selected?.id}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n","import { find } from \"lodash\";\r\nimport { useFeatures } from \"slices/features\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { FeaturePicker } from \"./FeaturePicker\";\r\n\r\nconst mapDefaults = { start: undefined, end: undefined };\r\n\r\nexport function InputControls() {\r\n  const [{ algorithms, maps }] = useFeatures();\r\n  const [{ algorithm, map }, setUIState] = useUIState();\r\n  return (\r\n    <>\r\n      <FeaturePicker\r\n        label=\"map\"\r\n        value={map?.id}\r\n        items={maps}\r\n        onChange={(v) =>\r\n          setUIState({ ...mapDefaults, map: find(maps, { id: v }) })\r\n        }\r\n      />\r\n      <FeaturePicker\r\n        label=\"algorithm\"\r\n        value={algorithm}\r\n        items={algorithms}\r\n        onChange={(v) => setUIState({ algorithm: v })}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { IconButton, IconButtonProps, Tooltip } from \"@material-ui/core\";\r\nimport { startCase } from \"lodash\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype IconButtonWithTooltipProps = {\r\n  label: string;\r\n  icon: ReactNode;\r\n} & IconButtonProps;\r\n\r\nexport function IconButtonWithTooltip({\r\n  label,\r\n  icon,\r\n  ...rest\r\n}: IconButtonWithTooltipProps) {\r\n  return (\r\n    <Tooltip title={startCase(label)} key={label}>\r\n      <span>\r\n        <IconButton {...rest}>{icon}</IconButton>\r\n      </span>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import {\r\n  PauseOutlined as PauseIcon,\r\n  PlayArrowOutlined as PlayIcon,\r\n  SkipNextOutlined as ForwardIcon,\r\n  SkipPreviousOutlined as PreviousIcon,\r\n  StopOutlined as StopIcon,\r\n} from \"@material-ui/icons\";\r\nimport { IconButtonWithTooltip as Button } from \"components/generic/IconButtonWithTooltip\";\r\nimport { usePlaybackState } from \"hooks/usePlaybackState\";\r\n\r\nexport function PlaybackControls() {\r\n  const {\r\n    playing,\r\n    canPause,\r\n    canPlay,\r\n    canStepBackward,\r\n    canStepForward,\r\n    canStop,\r\n    pause,\r\n    play,\r\n    stepBackward,\r\n    stepForward,\r\n    stop,\r\n  } = usePlaybackState();\r\n  return (\r\n    <>\r\n      <Button\r\n        label=\"step-backward\"\r\n        icon={<PreviousIcon />}\r\n        onClick={stepBackward}\r\n        disabled={!canStepBackward}\r\n      />\r\n      <Button\r\n        {...(playing\r\n          ? {\r\n              label: \"pause\",\r\n              icon: <PauseIcon />,\r\n              onClick: pause,\r\n              disabled: !canPause,\r\n            }\r\n          : {\r\n              label: \"play\",\r\n              icon: <PlayIcon />,\r\n              onClick: play,\r\n              disabled: !canPlay,\r\n              color: \"primary\",\r\n            })}\r\n      />\r\n      <Button\r\n        label=\"step-forward\"\r\n        icon={<ForwardIcon />}\r\n        onClick={stepForward}\r\n        disabled={!canStepForward}\r\n      />\r\n      <Button\r\n        label=\"stop\"\r\n        icon={<StopIcon />}\r\n        onClick={stop}\r\n        disabled={!canStop}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  FormControlLabel,\r\n  Switch as MuiSwitch,\r\n  SwitchProps as MuiSwitchProps,\r\n} from \"@material-ui/core\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype SwitchProps = { label?: ReactNode } & MuiSwitchProps;\r\n\r\nexport function Switch({ label = <></>, ...props }: SwitchProps) {\r\n  return (\r\n    <FormControlLabel\r\n      control={<MuiSwitch defaultChecked {...props} />}\r\n      {...{ label }}\r\n    />\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  Collapse,\r\n  IconButton,\r\n  InputBase,\r\n  List,\r\n  ListSubheader,\r\n  Switch,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  DeleteOutlined as DeleteIcon,\r\n  EditOutlined as EditIcon,\r\n  LabelOutlined as LabelIcon,\r\n} from \"@material-ui/icons\";\r\nimport { filter, map, sortBy, uniqBy } from \"lodash\";\r\nimport { nanoid as id } from \"nanoid\";\r\nimport {\r\n  cloneElement,\r\n  ComponentProps,\r\n  CSSProperties,\r\n  forwardRef,\r\n  ReactElement,\r\n  ReactNode,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\n\r\nexport const DefaultListEditorInput = forwardRef(function StyledInputBase(\r\n  props: ComponentProps<typeof InputBase>,\r\n  ref\r\n) {\r\n  return (\r\n    <InputBase\r\n      fullWidth\r\n      {...props}\r\n      placeholder=\"Untitled item\"\r\n      inputRef={ref}\r\n    />\r\n  );\r\n});\r\n\r\ntype Key = string | number;\r\n\r\ntype Item<T = any> = {\r\n  element?: ReactElement;\r\n  enabled?: boolean;\r\n  value?: T;\r\n  id: Key;\r\n};\r\n\r\ntype Props<T = any> = {\r\n  addItemLabel?: ReactNode;\r\n  label?: ReactNode;\r\n  text?: ReactNode;\r\n  items?: Item<T>[];\r\n  useSwitch?: boolean;\r\n  useDelete?: boolean;\r\n  onChangeItem?: (key: Key, value: T, enabled: boolean) => void;\r\n  onAddItem?: () => void;\r\n  onDeleteItem?: (key: Key) => void;\r\n  icon?: ReactElement | null;\r\n  useEdit?: boolean;\r\n  variant?: \"outlined\" | \"default\";\r\n  extrasPlacement?: \"flex-start\" | \"center\" | \"flex-end\";\r\n  placeholderText?: ReactNode;\r\n  cardStyle?: CSSProperties;\r\n  autoFocus?: boolean;\r\n  getCategory?: (value?: T) => string;\r\n  getOrder?: (value?: T) => string | number;\r\n};\r\n\r\ntype ListEditorFieldProps = {\r\n  isPlaceholder?: boolean;\r\n  i?: number;\r\n};\r\n\r\nfunction useInitialRender() {\r\n  const ref = useRef(false);\r\n  const current = ref.current;\r\n  ref.current = true;\r\n  return !current;\r\n}\r\n\r\nexport function ListEditorField({\r\n  icon = <LabelIcon />,\r\n  useSwitch,\r\n  useDelete,\r\n  useEdit: useEditButton = true,\r\n  onChangeItem = () => {},\r\n  onDeleteItem = () => {},\r\n  enabled = false,\r\n  element = <DefaultListEditorInput />,\r\n  value,\r\n  id,\r\n  i = 0,\r\n  variant = \"default\",\r\n  extrasPlacement = \"center\",\r\n  autoFocus,\r\n  cardStyle: style,\r\n}: Props & ListEditorFieldProps & Item) {\r\n  const [field, setField] = useState<HTMLElement | null>(null);\r\n  const theme = useTheme();\r\n  const content = (\r\n    <Box display=\"flex\" alignItems={extrasPlacement}>\r\n      {icon !== null &&\r\n        cloneElement(icon, {\r\n          style: {\r\n            marginRight: theme.spacing(1),\r\n            marginTop: theme.spacing(0.5),\r\n            marginBottom: theme.spacing(0.5),\r\n          },\r\n          color: \"action\",\r\n        })}\r\n      <Box\r\n        flexGrow={1}\r\n        style={{\r\n          marginLeft: -theme.spacing(icon === null ? 2 : 0),\r\n        }}\r\n      >\r\n        {cloneElement(element, {\r\n          onDelete: () => onDeleteItem(id ?? i),\r\n          autoFocus,\r\n          value,\r\n          key: id ?? i,\r\n          onValueChange: (e: any) => onChangeItem(id ?? i, e, enabled),\r\n          onChange: (e: any) => onChangeItem(id ?? i, e.target.value, enabled),\r\n          ref: (e: HTMLElement | null) => setField(e),\r\n        })}\r\n      </Box>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        {useSwitch && (\r\n          <Switch\r\n            color=\"primary\"\r\n            edge=\"end\"\r\n            onChange={(_, v) => onChangeItem(id ?? i, value, v)}\r\n            checked={enabled}\r\n          />\r\n        )}\r\n        {useEditButton && (\r\n          <IconButton\r\n            edge=\"end\"\r\n            onClick={() => {\r\n              if (field?.focus) {\r\n                field.focus();\r\n              }\r\n            }}\r\n          >\r\n            <EditIcon />\r\n          </IconButton>\r\n        )}\r\n        {useDelete && (\r\n          <IconButton onClick={() => onDeleteItem(id ?? i)}>\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n  return (\r\n    <Box\r\n      style={{\r\n        marginBottom: theme.spacing(1),\r\n        marginLeft: theme.spacing(2),\r\n      }}\r\n    >\r\n      {variant === \"outlined\" ? (\r\n        <Card\r\n          variant=\"outlined\"\r\n          style={{\r\n            borderColor: \"transparent\",\r\n            paddingRight: theme.spacing(2),\r\n            transition: theme.transitions.create([\r\n              \"box-shadow\",\r\n              \"border-color\",\r\n            ]),\r\n            ...style,\r\n          }}\r\n        >\r\n          {content}\r\n        </Card>\r\n      ) : (\r\n        content\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default function Editor<T>(props: Props<T>) {\r\n  const {\r\n    addItemLabel = \"Add Item\",\r\n    label,\r\n    text,\r\n    onAddItem = () => {},\r\n    onDeleteItem = () => {},\r\n    items = [],\r\n    placeholderText,\r\n    autoFocus,\r\n    getCategory,\r\n    getOrder,\r\n  } = props;\r\n  const isInitialRender = useInitialRender();\r\n  const theme = useTheme();\r\n  const [intermediateItems, setIntermediateItems] = useState(items);\r\n  const [newIndex, setNewIndex] = useState(-1);\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setIntermediateItems(items);\r\n    }, theme.transitions.duration.standard);\r\n    return () => {\r\n      clearTimeout(timeout);\r\n    };\r\n  }, [items, setIntermediateItems, theme.transitions.duration.standard]);\r\n  const children = uniqBy([...intermediateItems, ...items], (c) => c.id)\r\n    .map((c) => items.find((c2) => c.id === c2.id) ?? c)\r\n    .map((x, i) => {\r\n      const { enabled, element, value, id } = x ?? {};\r\n      return {\r\n        value,\r\n        render: (p?: ComponentProps<typeof ListEditorField>) => (\r\n          <Collapse\r\n            in={!!items.find((p) => p.id === x.id)}\r\n            unmountOnExit\r\n            appear={!isInitialRender}\r\n            mountOnEnter\r\n          >\r\n            <ListEditorField\r\n              {...props}\r\n              onDeleteItem={(e) => {\r\n                onDeleteItem(e);\r\n                setNewIndex(-1);\r\n              }}\r\n              enabled={enabled}\r\n              element={element}\r\n              value={value}\r\n              id={id}\r\n              i={i}\r\n              autoFocus={autoFocus || i === newIndex}\r\n              {...p}\r\n            />\r\n          </Collapse>\r\n        ),\r\n        key: id,\r\n        in: !!items.find((p) => p.id === x.id),\r\n      };\r\n    });\r\n  const sorted = sortBy(\r\n    children,\r\n    (c) => getCategory?.(c.value),\r\n    (c) => getOrder?.(c.value)\r\n  ).map((c) => ({\r\n    ...c,\r\n    render: (p?: ComponentProps<typeof ListEditorField>) => (\r\n      <Box key={c.key}>{c.render(p)}</Box>\r\n    ),\r\n  }));\r\n  return (\r\n    <List\r\n      subheader={\r\n        label || text ? (\r\n          <>\r\n            <ListSubheader disableSticky>\r\n              {label && (\r\n                <Typography variant=\"body1\" gutterBottom color=\"textPrimary\">\r\n                  {label}\r\n                </Typography>\r\n              )}\r\n              {text && (\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  color=\"textSecondary\"\r\n                  gutterBottom\r\n                  style={{ marginBottom: theme.spacing(3) }}\r\n                >\r\n                  {text}\r\n                </Typography>\r\n              )}\r\n            </ListSubheader>\r\n          </>\r\n        ) : undefined\r\n      }\r\n    >\r\n      <Box mt={getCategory ? -1 : 0}>\r\n        {(() => {\r\n          const out: ReactNode[] = [];\r\n          sorted.forEach((c, i) => {\r\n            if (getCategory && isNewCategory(sorted, i, c)) {\r\n              out.push(\r\n                <Collapse\r\n                  in={items.some(\r\n                    (c2) => getCategory(c2.value) === getCategory(c.value)\r\n                  )}\r\n                  appear\r\n                  key={getCategory(c.value)}\r\n                >\r\n                  <Box pl={2} pb={2} pt={1}>\r\n                    <Typography variant=\"overline\" color=\"textSecondary\">\r\n                      {getCategory(c.value)}\r\n                    </Typography>\r\n                  </Box>\r\n                </Collapse>\r\n              );\r\n            }\r\n            out.push(c.render());\r\n          });\r\n          return out;\r\n        })()}\r\n      </Box>\r\n      <Collapse in={!items?.length}>\r\n        <Box ml={2} mb={1} pt={getCategory ? 1 : 0}>\r\n          <Typography color=\"textSecondary\">\r\n            {placeholderText ?? \"No items\"}\r\n          </Typography>\r\n        </Box>\r\n      </Collapse>\r\n      <Box p={2} mb={-3}>\r\n        <Button\r\n          disableElevation\r\n          variant=\"contained\"\r\n          startIcon={<Add />}\r\n          color=\"primary\"\r\n          onClick={() => {\r\n            onAddItem();\r\n            setNewIndex(items.length);\r\n          }}\r\n        >\r\n          {addItemLabel}\r\n        </Button>\r\n      </Box>\r\n    </List>\r\n  );\r\n\r\n  function isNewCategory(\r\n    arr: {\r\n      value: T | undefined;\r\n      render: (\r\n        p?: (Props<any> & ListEditorFieldProps & Item<any>) | undefined\r\n      ) => JSX.Element;\r\n      key: Key;\r\n    }[],\r\n    i: number,\r\n    c: {\r\n      value: T | undefined;\r\n      render: (\r\n        p?: (Props<any> & ListEditorFieldProps & Item<any>) | undefined\r\n      ) => JSX.Element;\r\n      key: Key;\r\n    }\r\n  ) {\r\n    return !!(\r\n      getCategory &&\r\n      (arr[i - 1] === undefined ||\r\n        getCategory(arr[i - 1].value) !== getCategory(c.value))\r\n    );\r\n  }\r\n}\r\n\r\nexport function ListEditor<T extends { key: string }>({\r\n  onChange,\r\n  value,\r\n  editor,\r\n  create,\r\n  ...props\r\n}: Omit<Props<T>, \"items\"> & {\r\n  items?: T[];\r\n  onChange?: (value: T[]) => void;\r\n  value?: T[];\r\n  editor?: (item: T) => ReactElement;\r\n  create?: () => Omit<T, \"key\">;\r\n}) {\r\n  const [state, setState] = useState(value ?? []);\r\n  function handleChange(next: T[]) {\r\n    setState(next);\r\n    onChange?.(next);\r\n  }\r\n  return (\r\n    <Box sx={{ ml: -2 }}>\r\n      <Editor\r\n        {...props}\r\n        items={state.map((c) => ({\r\n          id: c.key,\r\n          value: c,\r\n          element: editor?.(c),\r\n        }))}\r\n        useDelete\r\n        useEdit={false}\r\n        onAddItem={() =>\r\n          handleChange([...state, { key: id(), ...create?.() } as T])\r\n        }\r\n        onDeleteItem={(k) => {\r\n          return handleChange(filter(state, (b) => b.key !== k));\r\n        }}\r\n        onChangeItem={(k, v) =>\r\n          handleChange(map(state, (b) => (b.key === k ? v : b)))\r\n        }\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Comparator } from \"slices/UIState\";\r\n\r\nexport const comparators: Comparator[] = [\r\n  {\r\n    key: \"equal\",\r\n    apply: (a, b) => a === b,\r\n  },\r\n  {\r\n    key: \"less-than\",\r\n    apply: (a, b) => a < b,\r\n  },\r\n  {\r\n    key: \"greater-than\",\r\n    apply: (a, b) => a > b,\r\n  },\r\n];\r\n","export const intrinsicProperties = [\"f\", \"g\"];\r\n","import { TraceEventType } from \"protocol/Trace\";\r\n\r\nexport const eventTypes: (TraceEventType | \"any\")[] = [\r\n  \"any\",\r\n  \"source\",\r\n  \"destination\",\r\n  \"expanding\",\r\n  \"generating\",\r\n  \"closing\",\r\n];\r\n","import { Divider, TextField, Typography as Type } from \"@material-ui/core\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { SelectField as Select } from \"components/generic/Select\";\r\nimport { Space } from \"components/generic/Space\";\r\nimport { Switch } from \"components/generic/Switch\";\r\nimport { find, last, map, startCase } from \"lodash\";\r\nimport { Breakpoint } from \"slices/UIState\";\r\nimport { comparators } from \"./comparators\";\r\nimport { eventTypes } from \"./eventTypes\";\r\n\r\ntype BreakpointEditorProps = {\r\n  value: Breakpoint;\r\n  onValueChange?: (v: Breakpoint) => void;\r\n  properties?: string[];\r\n};\r\n\r\nexport function BreakpointEditor({\r\n  value,\r\n  onValueChange: onChange,\r\n  properties,\r\n}: BreakpointEditorProps) {\r\n  function handleChange(next: Partial<Breakpoint>) {\r\n    onChange?.({ ...value, ...next });\r\n  }\r\n  return (\r\n    <Flex>\r\n      <Select\r\n        placeholder=\"Event\"\r\n        sx={{ minWidth: 160 }}\r\n        items={map(eventTypes, (c) => ({ value: c, label: startCase(c) }))}\r\n        onChange={(v) => handleChange({ type: v === \"any\" ? undefined : v })}\r\n        value={value.type ?? \"any\"}\r\n      />\r\n      <Divider flexItem orientation=\"vertical\" sx={{ mx: 2 }} />\r\n      <Select\r\n        placeholder=\"Property\"\r\n        sx={{\r\n          minWidth: 140,\r\n          textOverflow: \"ellipsis\",\r\n          whiteSpace: \"nowrap\",\r\n        }}\r\n        items={map(properties, (c) => ({\r\n          value: c,\r\n          label: (\r\n            <>\r\n              {last(c.split(\".\"))}\r\n              <Space />\r\n              <Type\r\n                color=\"textSecondary\"\r\n                variant=\"body2\"\r\n                component=\"span\"\r\n              >{`event.${c}`}</Type>\r\n            </>\r\n          ),\r\n        }))}\r\n        onChange={(v) => handleChange({ property: v })}\r\n        value={value.property}\r\n      />\r\n      <Space />\r\n      <Select\r\n        placeholder=\"Condition\"\r\n        items={comparators.map((c) => ({\r\n          value: c.key,\r\n          label: startCase(c.key),\r\n        }))}\r\n        value={value?.condition?.key ?? comparators?.[0]?.key}\r\n        onChange={(v) =>\r\n          handleChange({ condition: find(comparators, { key: v }) })\r\n        }\r\n      />\r\n      <Space />\r\n      <TextField\r\n        label=\"Reference\"\r\n        fullWidth\r\n        value={`${value.reference ?? 0}`}\r\n        variant=\"filled\"\r\n        inputProps={{ inputMode: \"numeric\", pattern: \"[0-9]*\" }}\r\n        onChange={(v) => handleChange({ reference: +v.target.value })}\r\n        type=\"number\"\r\n      />\r\n      <Space sx={{ px: 2 }} />\r\n      <Switch\r\n        checked={!!value.active}\r\n        onChange={(_, v) => handleChange({ active: v })}\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n","export const propertyPaths = [\"variables\"];\r\n","import { ListEditor } from \"components/generic/ListEditor\";\r\nimport { debounce, flatMap as flat, get, keys, map, uniq } from \"lodash\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { Breakpoint, useUIState } from \"slices/UIState\";\r\nimport { comparators } from \"./comparators\";\r\nimport { intrinsicProperties } from \"./intrinsicProperties\";\r\nimport { BreakpointEditor } from \"./BreakpointEditor\";\r\nimport { Box } from \"@material-ui/system\";\r\nimport { propertyPaths as paths } from \"./propertyPaths\";\r\n\r\nexport function BreakpointListEditor() {\r\n  const [{ breakpoints = [] }, setUIState] = useUIState();\r\n  const [{ specimen }] = useSpecimen();\r\n\r\n  const properties = uniq([\r\n    ...intrinsicProperties,\r\n    ...flat(paths, (p) =>\r\n      flat(specimen?.nodeStructure, (v) =>\r\n        map(keys(get(v, p)), (k) => `${p}.${k}`)\r\n      )\r\n    ),\r\n  ]);\r\n\r\n  return (\r\n    <Box sx={{ overflow: \"auto hidden\", width: \"100%\" }}>\r\n      <Box sx={{ minWidth: 720, mb: 2 }}>\r\n        <ListEditor<Breakpoint>\r\n          icon={null}\r\n          value={breakpoints}\r\n          useDelete\r\n          useEdit={false}\r\n          editor={(v) => <BreakpointEditor value={v} properties={properties} />}\r\n          create={() => ({\r\n            active: true,\r\n            property: properties?.[0],\r\n            condition: comparators?.[0],\r\n            type: undefined,\r\n            reference: 0,\r\n          })}\r\n          onChange={debounce((v) => setUIState({ breakpoints: v }), 1000)}\r\n          addItemLabel=\"Breakpoint\"\r\n          placeholderText=\"Click the button below to add a breakpoint.\"\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { debounce } from \"lodash\";\r\nimport AutoSize from \"react-virtualized-auto-sizer\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nexport function ScriptEditor() {\r\n  const [{ code }, setUIState] = useUIState();\r\n  return (\r\n    <Flex height=\"70vh\" overflow=\"hidden\">\r\n      <AutoSize>\r\n        {({ width, height }) => (\r\n          <Editor\r\n            width={width}\r\n            loading={<CircularProgress variant=\"indeterminate\" />}\r\n            height={height}\r\n            language=\"javascript\"\r\n            defaultValue={code}\r\n            onChange={debounce((v) => setUIState({ code: v }), 1000)}\r\n            options={{\r\n              minimap: {\r\n                enabled: false,\r\n              },\r\n            }}\r\n          />\r\n        )}\r\n      </AutoSize>\r\n    </Flex>\r\n  );\r\n}\r\n","import { Box, Divider, Tab, Typography as Type } from \"@material-ui/core\";\r\nimport { TabContext, TabList, TabPanel } from \"@material-ui/lab\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { Space } from \"components/generic/Space\";\r\nimport { Switch } from \"components/generic/Switch\";\r\nimport { ReactNode, useState } from \"react\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { BreakpointListEditor } from \"./breakpoint-editor/BreakpointListEditor\";\r\nimport { ScriptEditor } from \"./script-editor/ScriptEditor\";\r\n\r\nexport function DebugOptionsEditor() {\r\n  const [{ monotonicF, monotonicG }, setUIState] = useUIState();\r\n  const [tab, setTab] = useState(\"standard\");\r\n  function renderHeading(label: ReactNode) {\r\n    return (\r\n      <Type variant=\"overline\" color=\"textSecondary\">\r\n        {label}\r\n      </Type>\r\n    );\r\n  }\r\n  return (\r\n    <TabContext value={tab}>\r\n      <TabList onChange={(_, v) => setTab(v)}>\r\n        <Tab label=\"Standard\" value=\"standard\" />\r\n        <Tab label=\"Advanced\" value=\"advanced\" />\r\n      </TabList>\r\n      <Divider />\r\n      <TabPanel value=\"standard\">\r\n        <Box>\r\n          {renderHeading(\"General\")}\r\n          <Flex>\r\n            <Switch\r\n              label=\"Monotonic f value\"\r\n              checked={!!monotonicF}\r\n              onChange={(_, v) => setUIState({ monotonicF: v })}\r\n            />\r\n            <Space />\r\n            <Switch\r\n              label=\"Monotonic g value\"\r\n              checked={!!monotonicG}\r\n              onChange={(_, v) => setUIState({ monotonicG: v })}\r\n            />\r\n          </Flex>\r\n        </Box>\r\n        <Space />\r\n        <Box>\r\n          {renderHeading(\"Breakpoints\")}\r\n          <BreakpointListEditor />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value=\"advanced\" sx={{ p: 0 }}>\r\n        <ScriptEditor />\r\n      </TabPanel>\r\n    </TabContext>\r\n  );\r\n}\r\n","import { noop } from \"lodash\";\r\nimport {\r\n  ComponentProps,\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\n\r\ntype ScrollPanelProps = {\r\n  onTarget?: (e: HTMLDivElement | null) => void;\r\n} & ComponentProps<\"div\">;\r\n\r\nexport function ScrollPanel({\r\n  onTarget = noop,\r\n  onScroll,\r\n  ...props\r\n}: ScrollPanelProps) {\r\n  const [target, setTarget] = useState<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (target && onScroll) {\r\n      target.addEventListener(\"scroll\", onScroll as any, { passive: true });\r\n      return () => target.removeEventListener(\"scroll\", onScroll as any);\r\n    }\r\n  }, [target, onScroll]);\r\n\r\n  return (\r\n    <div\r\n      {...props}\r\n      style={{\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        overflow: \"hidden scroll\",\r\n        ...props.style,\r\n      }}\r\n      ref={(e) => {\r\n        setTarget(e);\r\n        onTarget?.(e);\r\n      }}\r\n    >\r\n      <PanelContext.Provider value={target}>\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          {props.children}\r\n        </div>\r\n      </PanelContext.Provider>\r\n    </div>\r\n  );\r\n}\r\nconst PanelContext = createContext<HTMLDivElement | null>(null);\r\n\r\nexport function usePanel() {\r\n  return useContext(PanelContext);\r\n}\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Dialog,\r\n  Fade,\r\n  IconButton,\r\n  Toolbar,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { ArrowBack } from \"@material-ui/icons\";\r\nimport { ResizeSensor } from \"css-element-queries\";\r\nimport PopupState from \"material-ui-popup-state\";\r\nimport {\r\n  cloneElement,\r\n  ComponentProps,\r\n  CSSProperties,\r\n  ReactElement,\r\n  ReactNode,\r\n  SyntheticEvent,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { useScrollState } from \"hooks/useScrollState\";\r\nimport { useSmallDisplay } from \"hooks/useSmallDisplay\";\r\nimport { ScrollPanel, usePanel } from \"./ScrollPanel\";\r\n\r\nexport function AppBarTitle({ children }: { children?: ReactNode }) {\r\n  return <Typography variant=\"h6\">{children}</Typography>;\r\n}\r\n\r\nexport type Props = {\r\n  children?: ReactNode;\r\n  actions?: ReactNode;\r\n  width?: number;\r\n  height?: string | number;\r\n  onTarget?: (target: HTMLDivElement | null) => void;\r\n  variant?: \"default\" | \"submodal\";\r\n  scrollable?: boolean;\r\n};\r\n\r\ntype ModalAppBarProps = {\r\n  onClose?: () => void;\r\n  style?: CSSProperties;\r\n  elevatedStyle?: CSSProperties;\r\n  transitionProperties?: string[];\r\n  children?: ReactNode;\r\n  elevatedChildren?: ReactNode;\r\n  simple?: boolean;\r\n  position?: \"fixed\" | \"absolute\" | \"sticky\" | \"static\";\r\n};\r\n\r\nexport function ModalAppBar({\r\n  onClose = () => {},\r\n  style,\r\n  elevatedStyle,\r\n  children,\r\n  transitionProperties = [\"box-shadow\", \"background\", \"border-bottom\"],\r\n  elevatedChildren,\r\n  simple,\r\n  position = \"sticky\",\r\n}: ModalAppBarProps) {\r\n  const panel = usePanel();\r\n  const theme = useTheme();\r\n  const [, , isAbsoluteTop, , setTarget] = useScrollState();\r\n  useEffect(() => {\r\n    setTarget(panel);\r\n  }, [panel, setTarget]);\r\n\r\n  const styles = isAbsoluteTop\r\n    ? {\r\n        background: theme.palette.background.paper,\r\n        ...(!simple && {\r\n          boxShadow: theme.shadows[0],\r\n        }),\r\n        ...style,\r\n      }\r\n    : {\r\n        background: theme.palette.background.paper,\r\n        ...(!simple && {\r\n          boxShadow: theme.shadows[4],\r\n        }),\r\n        ...elevatedStyle,\r\n      };\r\n\r\n  return (\r\n    <AppBar\r\n      elevation={0}\r\n      position={position}\r\n      style={{\r\n        color: theme.palette.text.primary,\r\n        transition: theme.transitions.create(transitionProperties),\r\n        ...styles,\r\n      }}\r\n    >\r\n      <Toolbar>\r\n        <IconButton\r\n          style={{\r\n            marginRight: theme.spacing(1),\r\n          }}\r\n          aria-label=\"open drawer\"\r\n          edge=\"start\"\r\n          onClick={() => onClose()}\r\n        >\r\n          <ArrowBack />\r\n        </IconButton>\r\n\r\n        {children && (\r\n          <div\r\n            style={{\r\n              gridColumn: 1,\r\n              gridRow: 1,\r\n              flex: 1,\r\n              overflow: \"auto\",\r\n            }}\r\n          >\r\n            <Fade\r\n              in={!!(!elevatedChildren || isAbsoluteTop)}\r\n              mountOnEnter\r\n              unmountOnExit\r\n            >\r\n              <Box style={{ width: \"100%\" }}>{children}</Box>\r\n            </Fade>\r\n          </div>\r\n        )}\r\n        {elevatedChildren && (\r\n          <div\r\n            style={{\r\n              gridColumn: 1,\r\n              gridRow: 1,\r\n              flex: 1,\r\n              overflow: \"auto\",\r\n            }}\r\n          >\r\n            <Fade\r\n              in={!!(elevatedChildren && !isAbsoluteTop)}\r\n              mountOnEnter\r\n              unmountOnExit\r\n            >\r\n              <Box style={{ width: \"100%\" }}>{elevatedChildren}</Box>\r\n            </Fade>\r\n          </div>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default function Modal({\r\n  children,\r\n  actions,\r\n  width = 480,\r\n  height,\r\n  onTarget,\r\n  variant = \"default\",\r\n  scrollable = true,\r\n  ...props\r\n}: Props & ComponentProps<typeof Dialog>) {\r\n  const [content, setContent] = useState<ReactNode | undefined>(undefined);\r\n  useEffect(() => {\r\n    if (children) setContent(children);\r\n  }, [children]);\r\n  const theme = useTheme();\r\n  const sm = useSmallDisplay();\r\n\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  const [contentRef, setContentRef] = useState<HTMLElement | null>(null);\r\n  const [hasOverflowingChildren, setHasOverflowingChildren] = useState(false);\r\n  const [childHeight, setChildHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (target && contentRef && !sm && !height) {\r\n      const callback = () => {\r\n        const doesOverflow = window.innerHeight - 64 < contentRef.offsetHeight;\r\n        setHasOverflowingChildren(doesOverflow);\r\n        setChildHeight(\r\n          contentRef.offsetHeight <= 1 ? 0 : Math.ceil(contentRef.offsetHeight)\r\n        );\r\n      };\r\n      window.addEventListener(\"resize\", callback);\r\n      const ob = new ResizeSensor(contentRef, callback);\r\n      callback();\r\n      return () => {\r\n        window.removeEventListener(\"resize\", callback);\r\n        ob.detach();\r\n      };\r\n    }\r\n  }, [target, contentRef, sm, height]);\r\n\r\n  const useVariant = variant === \"submodal\" && sm;\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={sm}\r\n      {...props}\r\n      style={{\r\n        ...(useVariant && {\r\n          paddingTop: theme.spacing(8),\r\n        }),\r\n        ...props.style,\r\n      }}\r\n      PaperProps={{\r\n        ref: (e: HTMLElement | null) => setTarget(e),\r\n        style: {\r\n          ...(useVariant && {\r\n            borderRadius: `${theme.shape.borderRadius}px ${theme.shape.borderRadius}px 0 0`,\r\n          }),\r\n          background: theme.palette.background.default,\r\n          overflow: \"hidden\",\r\n          height:\r\n            height && !sm\r\n              ? height\r\n              : hasOverflowingChildren || sm\r\n              ? \"100%\"\r\n              : childHeight || \"fit-content\",\r\n          position: \"relative\",\r\n          maxWidth: \"none\",\r\n          ...props.PaperProps?.style,\r\n        },\r\n        ...props.PaperProps,\r\n      }}\r\n    >\r\n      <ScrollPanel\r\n        style={{\r\n          height: \"100%\",\r\n          width: sm ? undefined : width,\r\n          maxWidth: \"100%\",\r\n          overflow: scrollable ? undefined : \"hidden\",\r\n        }}\r\n        onTarget={onTarget}\r\n      >\r\n        <div\r\n          ref={(e) => setContentRef(e)}\r\n          style={{ width: \"100%\", height: \"100%\" }}\r\n        >\r\n          {content}\r\n        </div>\r\n      </ScrollPanel>\r\n      {actions}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport function ManagedModal({\r\n  options: ModalProps,\r\n  appBar: ModalAppBarProps,\r\n  trigger = () => <></>,\r\n  children,\r\n}: {\r\n  options?: Props;\r\n  trigger?: (onClick: (e: SyntheticEvent<any, Event>) => void) => ReactElement;\r\n  appBar?: ModalAppBarProps;\r\n  children?: ReactNode;\r\n}) {\r\n  return (\r\n    <PopupState variant=\"popover\">\r\n      {({ open, close, isOpen }) => {\r\n        return (\r\n          <>\r\n            {cloneElement(trigger(open))}\r\n            <Modal open={isOpen} onClose={close} {...ModalProps}>\r\n              <ModalAppBar onClose={close} {...ModalAppBarProps} />\r\n              {children ?? ModalProps?.children}\r\n            </Modal>\r\n          </>\r\n        );\r\n      }}\r\n    </PopupState>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport function useScrollState(threshold: number = 128) {\r\n  const [showControls, setShowControls] = useState(true);\r\n  const [isAbsoluteTop, setIsAbsoluteTop] = useState(true);\r\n  const [isTop, setIsTop] = useState(true);\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  const lastTop = useRef(0);\r\n  useEffect(() => {\r\n    if (target) {\r\n      const listener = () => {\r\n        {\r\n          const newIsTop = target.scrollTop <= threshold;\r\n          if (newIsTop !== isTop) {\r\n            setIsTop(newIsTop);\r\n          }\r\n        }\r\n        {\r\n          const newIsTop = target.scrollTop <= 1;\r\n          if (newIsTop !== isAbsoluteTop) {\r\n            setIsAbsoluteTop(newIsTop);\r\n          }\r\n        }\r\n        if (lastTop.current - target.scrollTop) {\r\n          if (\r\n            Math.abs(lastTop.current - target.scrollTop) > 2 &&\r\n            lastTop.current >= 0\r\n          ) {\r\n            setShowControls(lastTop.current > target.scrollTop);\r\n          }\r\n          lastTop.current = target.scrollTop;\r\n        }\r\n      };\r\n      target.addEventListener(\"scroll\", listener, { passive: true });\r\n      return () => {\r\n        target.removeEventListener(\"scroll\", listener);\r\n      };\r\n    }\r\n  }, [target, isTop, isAbsoluteTop, lastTop, threshold]);\r\n  return [\r\n    showControls || isTop,\r\n    isTop,\r\n    isAbsoluteTop,\r\n    target,\r\n    setTarget,\r\n  ] as const;\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { BugReport as BugIcon } from \"@material-ui/icons\";\r\nimport { DebugOptionsEditor } from \"components/DebugOptionsEditor\";\r\nimport {\r\n  AppBarTitle as Title,\r\n  ManagedModal as Dialog,\r\n} from \"components/generic/Modal\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\n\r\nexport function UtilityControls() {\r\n  const [{ specimen }] = useSpecimen();\r\n  // const INTEROP_compare = useCompatibilityLayer(\"#comparator button\");\r\n  // const INTEROP_timeTravel = useCompatibilityLayer(\"#time-travel button\");\r\n  return (\r\n    <>\r\n      <Dialog\r\n        trigger={(onClick) => (\r\n          <Button {...{ onClick }} disabled={!specimen} startIcon={<BugIcon />}>\r\n            Debug\r\n          </Button>\r\n        )}\r\n        options={{ width: 960, scrollable: false }}\r\n        appBar={{ children: <Title>Debug Options</Title> }}\r\n      >\r\n        <DebugOptionsEditor />\r\n      </Dialog>\r\n      {/* <Button disabled={!specimen} onClick={INTEROP_compare}>\r\n        Compare...\r\n      </Button> */}\r\n      {/* <Button disabled={!specimen} onClick={INTEROP_timeTravel}>\r\n        Jump...\r\n      </Button> */}\r\n    </>\r\n  );\r\n}\r\n","import { AppBar, Box, Divider, Toolbar } from \"@material-ui/core\";\r\nimport { InputControls } from \"./InputControls\";\r\nimport { PlaybackControls } from \"./PlaybackControls\";\r\nimport { UtilityControls } from \"./UtilityControls\";\r\n\r\nconst divider = <Divider orientation=\"vertical\" flexItem sx={{ m: 1 }} />;\r\n\r\nexport function Controls() {\r\n  return (\r\n    <AppBar position=\"static\" color=\"transparent\" elevation={0}>\r\n      <Toolbar>\r\n        <Box m={-1} display=\"flex\" alignItems=\"center\">\r\n          <InputControls />\r\n          {divider}\r\n          <PlaybackControls />\r\n          {divider}\r\n          <UtilityControls />\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Box, BoxProps } from \"@material-ui/core\";\r\nimport { ReactElement } from \"react\";\r\nimport {\r\n  Virtuoso as List,\r\n  VirtuosoHandle as Handle,\r\n  VirtuosoProps as ListProps,\r\n} from \"react-virtuoso\";\r\n\r\nexport type LazyListHandle = Handle;\r\n\r\nexport type LazyListProps<T> = {\r\n  items?: T[];\r\n  renderItem?: (item: T, index: number) => ReactElement;\r\n  listOptions?: Partial<ListProps<T>>;\r\n} & BoxProps;\r\n\r\nexport function LazyList<T>({\r\n  items = [],\r\n  renderItem,\r\n  listOptions: options,\r\n  ...props\r\n}: LazyListProps<T>) {\r\n  return (\r\n    <Box {...props}>\r\n      <List\r\n        totalCount={items.length}\r\n        itemContent={(i) => renderItem?.(items[i], i)}\r\n        {...options}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Typography as Type } from \"@material-ui/core\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype Props = {\r\n  children?: ReactNode;\r\n};\r\n\r\nexport function Overline({ children }: Props) {\r\n  return (\r\n    <Type variant=\"overline\" sx={{ my: -0.75, display: \"block\" }}>\r\n      {children}\r\n    </Type>\r\n  );\r\n}\r\n","import { Flex } from \"./Flex\";\r\nimport {\r\n  Typography as Type,\r\n  TypographyProps as TypeProps,\r\n} from \"@material-ui/core\";\r\nimport { Space } from \"./Space\";\r\nimport { ReactNode } from \"react\";\r\n\r\ntype Props = {\r\n  label?: ReactNode;\r\n  value?: ReactNode;\r\n  type?: TypeProps;\r\n};\r\n\r\nexport function Property({ label, value, type }: Props) {\r\n  return (\r\n    <Flex width=\"auto\" mr={3} mt={0.5} key={`${label}::${value}`}>\r\n      <Type sx={{ opacity: 0.54 }} {...type}>\r\n        {label}\r\n      </Type>\r\n      <Space />\r\n      <Type {...type}>{value}</Type>\r\n    </Flex>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Card,\r\n  CardActionArea,\r\n  CardProps,\r\n  Divider,\r\n  Typography as Type,\r\n} from \"@material-ui/core\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { Overline } from \"components/generic/Overline\";\r\nimport { Property } from \"components/generic/Property\";\r\nimport { entries, filter, map } from \"lodash\";\r\nimport { TraceEvent } from \"protocol/Trace\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nexport function getHeight(event: TraceEvent) {}\r\n\r\ntype EventInspectorProps = {\r\n  event?: TraceEvent;\r\n  index?: number;\r\n  selected?: boolean;\r\n} & CardProps;\r\n\r\nexport function EventInspector({\r\n  event,\r\n  index,\r\n  selected,\r\n  ...props\r\n}: EventInspectorProps) {\r\n  const [, setUIState] = useUIState();\r\n\r\n  const cardStyles = selected\r\n    ? {\r\n        color: \"primary.contrastText\",\r\n        bgcolor: \"primary.main\",\r\n      }\r\n    : {};\r\n\r\n  return (\r\n    <Card\r\n      {...props}\r\n      sx={{\r\n        ...cardStyles,\r\n        ...props.sx,\r\n      }}\r\n    >\r\n      <CardActionArea\r\n        sx={{ p: 2, height: \"100%\" }}\r\n        onClick={() => setUIState({ step: index })}\r\n      >\r\n        <Flex alignItems=\"center\">\r\n          <Type>{index}</Type>\r\n          <Divider sx={{ mx: 2 }} flexItem orientation=\"vertical\" />\r\n          <Box>\r\n            <Overline>{`${event?.type ?? \"unsupported\"} #${\r\n              event?.id ?? \"-\"\r\n            }`}</Overline>\r\n            <Flex flexWrap=\"wrap\">\r\n              {map(\r\n                filter(\r\n                  [\r\n                    [\"f\", event?.f],\r\n                    [\"g\", event?.g],\r\n                    ...entries(event?.variables),\r\n                  ],\r\n                  ([, v]) => v !== undefined\r\n                ),\r\n                ([k, v]) => (\r\n                  <Property label={k} value={v} type={{ variant: \"body2\" }} />\r\n                )\r\n              )}\r\n            </Flex>\r\n          </Box>\r\n        </Flex>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n}\r\n","import { Flex } from \"components/generic/Flex\";\r\nimport {\r\n  LazyList as List,\r\n  LazyListHandle as ListHandle,\r\n  LazyListProps as ListProps,\r\n} from \"components/generic/LazyList\";\r\nimport { TraceEvent } from \"protocol/Trace\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { EventInspector } from \"./EventInspector\";\r\n\r\nexport function EventListInspector(props: ListProps<TraceEvent>) {\r\n  const [{ step = 0, playback }] = useUIState();\r\n  const [{ specimen }] = useSpecimen();\r\n  const ref = useRef<ListHandle | null>(null);\r\n\r\n  useEffect(() => {\r\n    ref?.current?.scrollToIndex?.({\r\n      index: step,\r\n      align: \"start\",\r\n      behavior: playback === \"playing\" ? \"auto\" : \"smooth\",\r\n      offset: -16,\r\n    });\r\n  }, [ref, step, playback]);\r\n\r\n  return (\r\n    <List\r\n      {...props}\r\n      items={specimen?.eventList}\r\n      listOptions={{ ref }}\r\n      renderItem={(item, i) => (\r\n        <Flex p={2} pt={i ? 0 : 2}>\r\n          <EventInspector\r\n            sx={{ flex: 1 }}\r\n            event={item}\r\n            index={i}\r\n            selected={i === step}\r\n          />\r\n        </Flex>\r\n      )}\r\n    />\r\n  );\r\n}\r\n","import {\r\n  Divider,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Menu,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  PlaceOutlined as DestinationIcon,\r\n  TripOriginOutlined as StartIcon,\r\n} from \"@material-ui/icons\";\r\nimport { Overline } from \"components/generic/Overline\";\r\nimport { Property } from \"components/generic/Property\";\r\nimport { map } from \"lodash\";\r\nimport { useUIState } from \"slices/UIState\";\r\nimport { SelectEvent as RendererSelectEvent } from \"components/specimen-renderer/Renderer\";\r\nimport { useSnackbar } from \"components/generic/Snackbar\";\r\n\r\ntype Props = {\r\n  selection?: RendererSelectEvent;\r\n  onClose?: () => void;\r\n};\r\n\r\nexport function SelectionMenu({ selection, onClose }: Props) {\r\n  const notify = useSnackbar();\r\n  const [, setUIState] = useUIState();\r\n  const { global, world, info } = selection ?? {};\r\n  const { current, entry, node } = info ?? {};\r\n\r\n  return (\r\n    <Menu\r\n      open={!!selection}\r\n      anchorReference=\"anchorPosition\"\r\n      anchorPosition={{\r\n        top: global?.y ?? 0,\r\n        left: global?.x ?? 0,\r\n      }}\r\n      onClose={onClose}\r\n    >\r\n      <ListItem>\r\n        <ListItemText>\r\n          <Overline>Point</Overline>\r\n          <Property label=\"x\" value={world?.x ?? \"-\"} />\r\n          <Property label=\"y\" value={world?.y ?? \"-\"} />\r\n        </ListItemText>\r\n      </ListItem>\r\n      <Divider sx={{ my: 1 }} />\r\n      {map(\r\n        [\r\n          {\r\n            label: \"Set Origin\",\r\n            icon: <StartIcon sx={{ transform: \"scale(0.5)\" }} />,\r\n            action: () => {\r\n              notify(\"Origin set.\");\r\n              setUIState({ start: node?.key });\r\n            },\r\n            disabled: !node,\r\n          },\r\n          {\r\n            label: \"Set Destination\",\r\n            icon: <DestinationIcon />,\r\n            action: () => {\r\n              notify(\"Destination set.\");\r\n              setUIState({ end: node?.key });\r\n            },\r\n            disabled: !node,\r\n          },\r\n          {\r\n            label: \"Go to Expansion Step\",\r\n            action: () => setUIState({ step: entry?.index ?? 0 }),\r\n            disabled: !entry,\r\n          },\r\n          {\r\n            label: \"Rewind to This Step\",\r\n            action: () => setUIState({ step: current?.index ?? 0 }),\r\n            disabled: !current,\r\n          },\r\n        ],\r\n        ({ label, icon, action, disabled }) => (\r\n          <MenuItem\r\n            disabled={disabled}\r\n            onClick={() => {\r\n              action();\r\n              onClose?.();\r\n            }}\r\n          >\r\n            <ListItemIcon>{icon}</ListItemIcon>\r\n            <ListItemText>{label}</ListItemText>\r\n          </MenuItem>\r\n        )\r\n      )}\r\n    </Menu>\r\n  );\r\n}\r\n","import { Fade, LinearProgress } from \"@material-ui/core\";\r\nimport { Flex, FlexProps } from \"components/generic/Flex\";\r\nimport { getRenderer } from \"components/specimen-renderer/getRenderer\";\r\nimport { SelectEvent as RendererSelectEvent } from \"components/specimen-renderer/Renderer\";\r\nimport { createElement, useState } from \"react\";\r\nimport AutoSize from \"react-virtualized-auto-sizer\";\r\nimport { useLoading } from \"slices/loading\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { EventListInspector } from \"./EventListInspector\";\r\nimport { SelectionMenu } from \"./SelectionMenu\";\r\n\r\ntype SpecimenInspectorProps = {} & FlexProps;\r\n\r\nexport function SpecimenInspector(props: SpecimenInspectorProps) {\r\n  const [{ specimen: loading }] = useLoading();\r\n  const [{ specimen, mapType }] = useSpecimen();\r\n  const [renderer] = getRenderer(mapType);\r\n  const [selection, setSelection] = useState<RendererSelectEvent | undefined>(\r\n    undefined\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Fade in={loading}>\r\n        <LinearProgress variant=\"indeterminate\" sx={{ mb: -0.5, zIndex: 1 }} />\r\n      </Fade>\r\n      <Flex {...props}>\r\n        {specimen ? (\r\n          <Flex>\r\n            <AutoSize>\r\n              {(size) =>\r\n                createElement(renderer, {\r\n                  ...size,\r\n                  onSelect: setSelection,\r\n                  selection: selection?.world,\r\n                })\r\n              }\r\n            </AutoSize>\r\n            <EventListInspector\r\n              position=\"absolute\"\r\n              right={0}\r\n              height=\"100%\"\r\n              maxWidth={480}\r\n              minWidth=\"30vw\"\r\n            />\r\n          </Flex>\r\n        ) : (\r\n          <Flex\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            color=\"text.secondary\"\r\n          >\r\n            Select a map and an algorithm to get started.\r\n          </Flex>\r\n        )}\r\n      </Flex>\r\n      <SelectionMenu\r\n        selection={selection}\r\n        onClose={() => setSelection(undefined)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { AppBar, Toolbar, Typography } from \"@material-ui/core\";\r\n\r\nexport function Title() {\r\n  return (\r\n    <AppBar position=\"static\" elevation={0}>\r\n      <Toolbar>\r\n        <Typography variant=\"h6\">Path Search Visualiser</Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Controls } from \"components/control-bar/Controls\";\r\nimport { Flex } from \"components/generic/Flex\";\r\nimport { SpecimenInspector } from \"components/specimen-inspector/SpecimenInspector\";\r\nimport { Title } from \"components/Title\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Flex vertical>\r\n      <Flex vertical boxShadow={4} height=\"auto\" zIndex={1}>\r\n        <Title />\r\n        <Controls />\r\n      </Flex>\r\n      <SpecimenInspector flex={1} />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\nimport { theme } from \"client/theme\";\r\nimport { SnackbarProvider } from \"components/generic/Snackbar\";\r\nimport { StrictMode } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { ConnectionStateService } from \"services/ConnectionStateService\";\r\nimport { PlaybackService } from \"services/PlaybackService\";\r\nimport { SpecimenService } from \"services/SpecimenService\";\r\nimport { FeaturesProvider } from \"slices/features\";\r\nimport { InfoProvider } from \"slices/info\";\r\nimport { LoadingProvider } from \"slices/loading\";\r\nimport { SliceProvider as AppStateProvider } from \"slices/SliceProvider\";\r\nimport { SpecimenProvider } from \"slices/specimen\";\r\nimport { UIStateProvider } from \"slices/UIState\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nconst slices = [\r\n  InfoProvider,\r\n  FeaturesProvider,\r\n  UIStateProvider,\r\n  SpecimenProvider,\r\n  LoadingProvider,\r\n];\r\n\r\nconst services = [ConnectionStateService, PlaybackService, SpecimenService];\r\n\r\nrender(\r\n  <StrictMode>\r\n    <CssBaseline>\r\n      <ThemeProvider theme={theme}>\r\n        <SnackbarProvider>\r\n          <AppStateProvider slices={slices} services={services}>\r\n            <App />\r\n          </AppStateProvider>\r\n        </SnackbarProvider>\r\n      </ThemeProvider>\r\n    </CssBaseline>\r\n  </StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { useSnackbar } from \"components/generic/Snackbar\";\r\nimport { useEffect } from \"react\";\r\nimport { useInfo } from \"slices/info\";\r\n\r\nexport function ConnectionStateService() {\r\n  const notify = useSnackbar();\r\n  const [info] = useInfo();\r\n\r\n  useEffect(\r\n    () =>\r\n      notify(\r\n        info\r\n          ? `Connected: ${info.name} ${info.version}`\r\n          : \"Connecting to the solver...\"\r\n      ),\r\n    [notify, info]\r\n  );\r\n\r\n  return <></>;\r\n}\r\n","import {\r\n  SnackbarLabel as Label,\r\n  useSnackbar,\r\n} from \"components/generic/Snackbar\";\r\nimport { usePlaybackState } from \"hooks/usePlaybackState\";\r\nimport { trimEnd } from \"lodash\";\r\nimport { ReactNode, useCallback, useEffect } from \"react\";\r\nimport { useBreakpoints } from \"../hooks/useBreakpoints\";\r\n\r\nfunction cancellable<T = void>(f: () => Promise<T>, g: (result: T) => void) {\r\n  let cancelled = false;\r\n  requestAnimationFrame(async () => {\r\n    const result = await f();\r\n    if (!cancelled) {\r\n      g(result);\r\n    }\r\n  });\r\n  return () => {\r\n    cancelled = true;\r\n  };\r\n}\r\n\r\nexport function PlaybackService() {\r\n  const notify = useSnackbar();\r\n  const { playing, end, step, pause, tick } = usePlaybackState();\r\n  const shouldBreak = useBreakpoints();\r\n\r\n  const renderLabel = useCallback(\r\n    (label: ReactNode) => <Label primary={label} secondary={`Step ${step}`} />,\r\n    [step]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (playing) {\r\n      return step < end\r\n        ? cancellable(\r\n            () => shouldBreak(step),\r\n            ({ result, error }) => {\r\n              if (!error) {\r\n                if (result) {\r\n                  notify(renderLabel(`Breakpoint hit: ${result}.`));\r\n                  pause();\r\n                } else tick();\r\n              } else {\r\n                notify(renderLabel(`${trimEnd(error, \".\")}.`));\r\n                pause();\r\n              }\r\n            }\r\n          )\r\n        : pause();\r\n    }\r\n  }, [renderLabel, playing, end, step, pause, tick, notify, shouldBreak]);\r\n\r\n  return <></>;\r\n}\r\n","import { call } from \"components/script-editor/call\";\r\nimport { transpile } from \"components/script-editor/transpile\";\r\nimport { get, lowerCase as lower, memoize, startCase } from \"lodash\";\r\nimport { useMemo } from \"react\";\r\nimport { useSpecimen } from \"slices/specimen\";\r\nimport { useUIState } from \"slices/UIState\";\r\n\r\nconst EVAL = true;\r\n\r\nexport function useBreakpoints() {\r\n  const [{ specimen }] = useSpecimen();\r\n  const [{ code, breakpoints = [], monotonicF, monotonicG }] = useUIState();\r\n  const es5 = useMemo(() => transpile(code), [code]) ?? \"\";\r\n\r\n  return useMemo(\r\n    () =>\r\n      memoize(async (step: number) => {\r\n        const event = specimen?.eventList?.[step];\r\n        if (event) {\r\n          try {\r\n            // Check monotonic f or g values\r\n            // TODO Fix definition of a monotonic f or g value\r\n            if (step) {\r\n              for (const p of [monotonicF && \"f\", monotonicG && \"g\"]) {\r\n                const prev = specimen?.eventList?.[step - 1];\r\n                if (p && get(prev, p) > get(event, p)) {\r\n                  return { result: `Monotonicity violation on ${p}` };\r\n                }\r\n              }\r\n            }\r\n            // Check breakpoints in the breakpoints section\r\n            for (const {\r\n              active,\r\n              condition,\r\n              type,\r\n              property = \"\",\r\n              reference = 0,\r\n            } of breakpoints) {\r\n              const isType = !type || type === event.type;\r\n              const match = condition?.apply?.(get(event, property), reference);\r\n              if (active && isType && match) {\r\n                return {\r\n                  result: `${property} ${lower(\r\n                    startCase(condition?.key)\r\n                  )} ${reference}`,\r\n                };\r\n              }\r\n            }\r\n            // Check breakpoints in the script editor section\r\n            if (await call(es5, \"shouldBreak\", [step, event], false, EVAL)) {\r\n              return { result: `Script editor` };\r\n            }\r\n          } catch (e) {\r\n            return { error: `${e}` };\r\n          }\r\n        }\r\n        return { result: \"\" };\r\n      }),\r\n    [es5, specimen, breakpoints, monotonicF, monotonicG]\r\n  );\r\n}\r\n"],"sourceRoot":""}